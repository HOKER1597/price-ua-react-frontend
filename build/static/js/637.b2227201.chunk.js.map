{"version":3,"file":"static/js/637.b2227201.chunk.js","mappings":"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","sources":["components/Admin/AdminStoreEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../../utils/api';\r\nimport './AdminProductCreate.css';\r\nimport '../Wishlist.css'; // Import Wishlist.css for modal styles\r\n\r\nfunction AdminStoreEdit() {\r\n  const [stores, setStores] = useState([]);\r\n  const [selectedStoreId, setSelectedStoreId] = useState('');\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    logo: null,\r\n    years_with_us: '',\r\n    link: ''\r\n  });\r\n  const [previewImage, setPreviewImage] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false); // State for delete modal\r\n\r\n  useEffect(() => {\r\n    const fetchStores = async () => {\r\n      try {\r\n        const response = await axios.get(`${API_URL}/stores`);\r\n        setStores(response.data.sort((a, b) => a.name.localeCompare(b.name)));\r\n      } catch (err) {\r\n        console.error('Пом ATVилка завантаження магазинів:', err);\r\n      }\r\n    };\r\n    fetchStores();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedStoreId) {\r\n      const fetchStore = async () => {\r\n        try {\r\n          const token = localStorage.getItem('token');\r\n          const response = await axios.get(`${API_URL}/stores/${selectedStoreId}`, {\r\n            headers: { Authorization: `Bearer ${token}` }\r\n          });\r\n          setFormData({\r\n            name: response.data.name,\r\n            logo: null,\r\n            years_with_us: response.data.years_with_us || '',\r\n            link: response.data.link || ''\r\n          });\r\n          setPreviewImage(response.data.logo || null);\r\n        } catch (err) {\r\n          setError('Не вдалося завантажити дані магазину.');\r\n        }\r\n      };\r\n      fetchStore();\r\n    }\r\n  }, [selectedStoreId]);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setFormData({ ...formData, logo: file });\r\n    setPreviewImage(file ? URL.createObjectURL(file) : formData.logo);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    if (!formData.name) {\r\n      setError('Назва магазину є обов’язковою');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const data = new FormData();\r\n    data.append('name', formData.name);\r\n    if (formData.logo) {\r\n      data.append('logo', formData.logo);\r\n    }\r\n    data.append('years_with_us', formData.years_with_us);\r\n    data.append('link', formData.link);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.put(`${API_URL}/admin/store/${selectedStoreId}`, data, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      setSuccess('Магазин успішно оновлено!');\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Не вдалося оновити магазин.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleOpenDeleteModal = () => {\r\n    setIsDeleteModalOpen(true);\r\n  };\r\n\r\n  const handleCloseDeleteModal = () => {\r\n    setIsDeleteModalOpen(false);\r\n    setError(null);\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete(`${API_URL}/admin/store/${selectedStoreId}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setSuccess('Магазин успішно видалено!');\r\n      setFormData({ name: '', logo: null, years_with_us: '', link: '' });\r\n      setSelectedStoreId('');\r\n      setPreviewImage(null);\r\n      setIsDeleteModalOpen(false);\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Не вдалося видалити магазин.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"admin-product-create animate-page\">\r\n        <h2 className=\"centered-heading\">Редагувати магазин</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group animate-field\">\r\n            <label>Виберіть магазин</label>\r\n            <select\r\n              value={selectedStoreId}\r\n              onChange={(e) => setSelectedStoreId(e.target.value)}\r\n              required\r\n            >\r\n              <option value=\"\">Виберіть магазин</option>\r\n              {stores.map((store) => (\r\n                <option key={store.id} value={store.id}>\r\n                  {store.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"form-group animate-field\">\r\n            <label>Назва магазину</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name}\r\n              onChange={handleInputChange}\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"form-group animate-field\">\r\n            <label>Логотип</label>\r\n            <input\r\n              type=\"file\"\r\n              name=\"logo\"\r\n              accept=\"image/*\"\r\n              onChange={handleFileChange}\r\n            />\r\n            {previewImage && (\r\n              <div className=\"image-preview\">\r\n                <label>Попередній перегляд</label>\r\n                <img src={previewImage} alt=\"Preview\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"form-group animate-field\">\r\n            <label>Роки співпраці</label>\r\n            <input\r\n              type=\"number\"\r\n              name=\"years_with_us\"\r\n              value={formData.years_with_us}\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-group animate-field\">\r\n            <label>Посилання</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"link\"\r\n              value={formData.link}\r\n              onChange={handleInputChange}\r\n            />\r\n          </div>\r\n          {error && <div className=\"error-message centered-message\">{error}</div>}\r\n          {success && <div className=\"success-message centered-message\">{success}</div>}\r\n          <button type=\"submit\" className=\"save-button animate-field\" disabled={isLoading || !selectedStoreId}>\r\n            {isLoading ? 'Збереження...' : 'Зберегти'}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"save-button animate-field\"\r\n            style={{ backgroundColor: '#ff6f61', marginTop: '10px' }}\r\n            onClick={handleOpenDeleteModal}\r\n            disabled={!selectedStoreId}\r\n          >\r\n            Видалити\r\n          </button>\r\n        </form>\r\n      </div>\r\n      {isDeleteModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"delete-modal\">\r\n            <p>Ви точно хочете видалити цей магазин \"{formData.name}\"?</p>\r\n            {error && <div className=\"modal-error\">{error}</div>}\r\n            <div className=\"modal-buttons\">\r\n              <button className=\"wishlist-modal-confirm-delete-btn\" onClick={handleDelete}>Так</button>\r\n              <button className=\"wishlist-modal-cancel-btn\" onClick={handleCloseDeleteModal}>Ні</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AdminStoreEdit;"],"names":["stores","setStores","useState","selectedStoreId","setSelectedStoreId","formData","setFormData","name","logo","years_with_us","link","previewImage","setPreviewImage","error","setError","success","setSuccess","isLoading","setIsLoading","isDeleteModalOpen","setIsDeleteModalOpen","useEffect","async","response","axios","get","concat","API_URL","data","sort","a","b","localeCompare","err","console","fetchStores","token","localStorage","getItem","headers","Authorization","fetchStore","handleInputChange","e","value","target","_objectSpread","_jsxs","_Fragment","children","className","_jsx","onSubmit","preventDefault","FormData","append","put","_err$response","_err$response$data","onChange","required","map","store","id","type","accept","file","files","URL","createObjectURL","src","alt","disabled","style","backgroundColor","marginTop","onClick","handleOpenDeleteModal","delete","_err$response2","_err$response2$data","handleCloseDeleteModal"],"sourceRoot":""}