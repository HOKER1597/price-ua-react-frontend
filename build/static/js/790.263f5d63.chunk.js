"use strict";(self.webpackChunkprice_ua=self.webpackChunkprice_ua||[]).push([[790],{790:(e,r,t)=>{t.r(r),t.d(r,{default:()=>U});var a=t(2555),s=t(5043),i=t(9002),l=t(9722),n=t(2382),o=t(4105),c=t(2284),d=t(6797),m=t(1990),u=t(4918),x=t(9570),h=t(4227),p=t(4074),g=t(9292),b=t(614),f=t(8557),v=t(3388),y=t(3986),j=t(917),w=t(579);const N=["className","variant","size"],k=(0,j.F)("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors",{variants:{variant:{default:"bg-primary-50 text-foreground/70 dark:bg-card-dark dark:text-foreground/70",primary:"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300",secondary:"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300",accent:"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300",success:"bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-300",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",danger:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",outline:"border border-border text-foreground/70",hit:"bg-red-500 text-white",top:"bg-primary-500 text-white",premium:"bg-amber-500 text-white",deal:"bg-success-500 text-white"},size:{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-xs",lg:"px-3 py-1 text-sm"}},defaultVariants:{variant:"default",size:"md"}});function C(e){let{className:r,variant:t,size:s}=e,i=(0,y.A)(e,N);return(0,w.jsx)("span",(0,a.A)({className:(0,f.cn)(k({variant:t,size:s}),r)},i))}var A=t(6801);function S(e){let{title:r,items:t,selectedItems:a,onToggle:i,showSearch:l=!1,maxVisible:o=8,renderLabel:c=e=>e}=e;const[d,m]=(0,s.useState)(!0),[u,p]=(0,s.useState)(!1),[b,v]=(0,s.useState)(""),y=l?t.filter((e=>e.toLowerCase().includes(b.toLowerCase()))):t,j=u?y:y.slice(0,o),N=y.length>o;return(0,w.jsxs)("div",{className:"border-b border-border py-4",children:[(0,w.jsxs)("button",{onClick:()=>m(!d),className:"flex w-full items-center justify-between text-left",children:[(0,w.jsx)("span",{className:"text-sm font-semibold text-foreground",children:r}),(0,w.jsx)(n.A,{className:(0,f.cn)("h-4 w-4 text-foreground/40 transition-transform",d&&"rotate-180")})]}),(0,w.jsx)(x.N,{children:d&&(0,w.jsx)(h.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,w.jsxs)("div",{className:"mt-3 space-y-2",children:[l&&(0,w.jsxs)("div",{className:"relative mb-3",children:[(0,w.jsx)(g.A,{className:"absolute left-2.5 top-1/2 h-4 w-4 -translate-y-1/2 text-foreground/40"}),(0,w.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0448\u0443\u043a...",value:b,onChange:e=>v(e.target.value),className:"w-full rounded-lg border border-border bg-surface-light py-2 pl-9 pr-3 text-sm text-foreground placeholder:text-foreground/40 focus:border-primary-500 focus:outline-none dark:bg-surface-dark"})]}),(0,w.jsx)("div",{className:"max-h-[200px] space-y-1 overflow-y-auto scrollbar-thin",children:j.map((e=>(0,w.jsxs)("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1.5 transition-colors hover:bg-primary-50 dark:hover:bg-primary-900/20",children:[(0,w.jsx)("input",{type:"checkbox",checked:a.includes(e),onChange:()=>i(e),className:"h-4 w-4 rounded border-border text-primary-500 focus:ring-primary-500"}),(0,w.jsx)("span",{className:"text-sm text-foreground/70",children:c(e)})]},e)))}),N&&(0,w.jsx)("button",{onClick:()=>p(!u),className:"mt-2 text-xs font-medium text-primary-500 hover:text-primary-600",children:u?"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u043c\u0435\u043d\u0448\u0435":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0449\u0435 ".concat(y.length-o)})]})})})]})}function _(e){let{filters:r,selectedFilters:t,onFilterChange:a,onApply:s,onReset:i,customPriceFrom:l,customPriceTo:n,onCustomPriceChange:o,previewCount:c,isSearchPage:m=!1,isMobile:u=!1,onClose:x}=e;const h=t.brands.length+t.priceRanges.length+t.volumes.length+t.types.length+(m?t.categories.length:0);return(0,w.jsxs)("div",{className:(0,f.cn)("flex flex-col bg-card-light dark:bg-card-dark",u?"fixed inset-0 z-50 overflow-hidden":"sticky top-24 h-fit max-h-[calc(100vh-120px)] overflow-y-auto rounded-xl border border-border shadow-card"),children:[(0,w.jsxs)("div",{className:"flex items-center justify-between border-b border-border p-4",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)(d.A,{className:"h-5 w-5 text-primary-500"}),(0,w.jsx)("h3",{className:"font-semibold text-foreground",children:"\u0424\u0456\u043b\u044c\u0442\u0440\u0438"}),h>0&&(0,w.jsx)(C,{variant:"primary",size:"sm",children:h})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[h>0&&(0,w.jsx)("button",{onClick:i,className:"text-xs text-foreground/50 hover:text-primary-500",children:"\u0421\u043a\u0438\u043d\u0443\u0442\u0438"}),u&&x&&(0,w.jsx)("button",{onClick:x,className:"rounded-lg p-1 hover:bg-primary-50 dark:hover:bg-primary-900/20",children:(0,w.jsx)(b.A,{className:"h-5 w-5"})})]})]}),h>0&&(0,w.jsxs)("div",{className:"flex flex-wrap gap-2 border-b border-border p-4",children:[t.brands.map((e=>(0,w.jsxs)(C,{variant:"primary",className:"gap-1",children:[e,(0,w.jsx)("button",{onClick:()=>a("brands",e),children:(0,w.jsx)(b.A,{className:"h-3 w-3"})})]},e))),t.priceRanges.map((e=>(0,w.jsxs)(C,{variant:"accent",className:"gap-1",children:[e," \u20b4",(0,w.jsx)("button",{onClick:()=>a("priceRanges",e),children:(0,w.jsx)(b.A,{className:"h-3 w-3"})})]},e))),t.volumes.map((e=>(0,w.jsxs)(C,{variant:"default",className:"gap-1",children:[e,(0,w.jsx)("button",{onClick:()=>a("volumes",e),children:(0,w.jsx)(b.A,{className:"h-3 w-3"})})]},e))),t.types.map((e=>(0,w.jsxs)(C,{variant:"accent",className:"gap-1",children:[e,(0,w.jsx)("button",{onClick:()=>a("types",e),children:(0,w.jsx)(b.A,{className:"h-3 w-3"})})]},e)))]}),(0,w.jsxs)("div",{className:"flex-1 overflow-y-auto px-4 scrollbar-thin",children:[m&&r.categories.length>0&&(0,w.jsx)(S,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u044f",items:r.categories,selectedItems:t.categories,onToggle:e=>a("categories",e),renderLabel:e=>A.Z[e]||e}),r.brands.length>0&&(0,w.jsx)(S,{title:"\u0411\u0440\u0435\u043d\u0434",items:r.brands,selectedItems:t.brands,onToggle:e=>a("brands",e),showSearch:!0,maxVisible:10}),(0,w.jsxs)("div",{className:"border-b border-border py-4",children:[(0,w.jsx)("span",{className:"text-sm font-semibold text-foreground",children:"\u0426\u0456\u043d\u0430 (\u20b4)"}),(0,w.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,w.jsx)("input",{type:"number",placeholder:"\u0412\u0456\u0434",value:l,onChange:e=>o("from",e.target.value),className:"w-full rounded-lg border border-border bg-surface-light px-3 py-2 text-sm focus:border-primary-500 focus:outline-none dark:bg-surface-dark dark:text-white"}),(0,w.jsx)("input",{type:"number",placeholder:"\u0414\u043e",value:n,onChange:e=>o("to",e.target.value),className:"w-full rounded-lg border border-border bg-surface-light px-3 py-2 text-sm focus:border-primary-500 focus:outline-none dark:bg-surface-dark dark:text-white"})]}),r.priceRanges.length>0&&(0,w.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:r.priceRanges.map((e=>(0,w.jsx)("button",{onClick:()=>a("priceRanges",e.label),className:(0,f.cn)("rounded-full px-3 py-1 text-xs font-medium transition-colors",t.priceRanges.includes(e.label)?"bg-primary-500 text-white":"bg-primary-50 text-foreground/70 hover:bg-primary-100 dark:bg-card-dark"),children:e.label},e.label)))})]}),r.volumes.length>0&&(0,w.jsx)(S,{title:"\u041e\u0431'\u0454\u043c",items:r.volumes,selectedItems:t.volumes,onToggle:e=>a("volumes",e)}),r.types.length>0&&(0,w.jsx)(S,{title:"\u0422\u0438\u043f",items:r.types,selectedItems:t.types,onToggle:e=>a("types",e)})]}),(0,w.jsx)("div",{className:"border-t border-border p-4",children:(0,w.jsxs)(v.$,{onClick:s,className:"w-full",children:["\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0442\u043e\u0432\u0430\u0440\u0438 (",c,")"]})})]})}var P=t(9463),R=t(5379),z=t(8326);function L(e){let{currentPage:r,totalPages:t,onPageChange:a,showLoadMore:s=!1,onLoadMore:i,className:l}=e;if(t<=1)return null;return(0,w.jsxs)("div",{className:(0,f.cn)("flex flex-col items-center gap-4",l),children:[s&&i&&r<t&&(0,w.jsx)("button",{onClick:i,className:"rounded-xl bg-gradient-to-r from-primary-500 to-primary-400 px-8 py-3 font-medium text-white shadow-md transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0449\u0435"}),(0,w.jsxs)("div",{className:"flex items-center gap-1",children:[(0,w.jsx)("button",{onClick:()=>a(r-1),disabled:1===r,className:(0,f.cn)("flex h-10 w-10 items-center justify-center rounded-lg transition-all duration-300",1===r?"cursor-not-allowed text-border":"text-foreground/50 hover:bg-primary-50 dark:hover:bg-card-dark"),"aria-label":"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u044f \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430",children:(0,w.jsx)(P.A,{className:"h-5 w-5"})}),(()=>{const e=[];if(t>7){e.push(1),r>3&&e.push("ellipsis");const a=Math.max(2,r-1),s=Math.min(t-1,r+1);for(let r=a;r<=s;r++)e.push(r);r<t-2&&e.push("ellipsis"),e.push(t)}else for(let r=1;r<=t;r++)e.push(r);return e})().map(((e,t)=>"ellipsis"===e?(0,w.jsx)("span",{className:"flex h-10 w-10 items-center justify-center text-foreground/40",children:(0,w.jsx)(R.A,{className:"h-5 w-5"})},"ellipsis-".concat(t)):(0,w.jsx)("button",{onClick:()=>a(e),className:(0,f.cn)("flex h-10 w-10 items-center justify-center rounded-lg text-sm font-medium transition-all duration-300",r===e?"bg-primary-500 text-white shadow-md":"text-foreground/50 hover:bg-primary-50 dark:hover:bg-card-dark"),children:e},e))),(0,w.jsx)("button",{onClick:()=>a(r+1),disabled:r===t,className:(0,f.cn)("flex h-10 w-10 items-center justify-center rounded-lg transition-all duration-300",r===t?"cursor-not-allowed text-border":"text-foreground/50 hover:bg-primary-50 dark:hover:bg-card-dark"),"aria-label":"\u041d\u0430\u0441\u0442\u0443\u043f\u043d\u0430 \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0430",children:(0,w.jsx)(z.A,{className:"h-5 w-5"})})]}),(0,w.jsxs)("p",{className:"text-sm text-foreground/50",children:["\u0421\u0442\u043e\u0440\u0456\u043d\u043a\u0430 ",r," \u0437 ",t]})]})}var F=t(4049),M=t(2233),I=t(5270);const T={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-[95vw] max-h-[95vh]"};function E(e){let{isOpen:r,onClose:t,title:a,description:s,children:i,size:l="md",showCloseButton:n=!0}=e;return(0,w.jsx)(I.bL,{open:r,onOpenChange:e=>!e&&t(),children:(0,w.jsx)(x.N,{children:r&&(0,w.jsxs)(I.ZL,{forceMount:!0,children:[(0,w.jsx)(I.hJ,{asChild:!0,children:(0,w.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-50 bg-surface-dark/60 backdrop-blur-sm"})}),(0,w.jsx)(I.UC,{asChild:!0,children:(0,w.jsxs)(h.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2,ease:"easeOut"},className:(0,f.cn)("fixed left-1/2 top-1/2 z-50 w-full -translate-x-1/2 -translate-y-1/2 rounded-xl bg-card-light p-6 shadow-elevated dark:bg-card-dark",T[l]),children:[(a||n)&&(0,w.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,w.jsxs)("div",{children:[a&&(0,w.jsx)(I.hE,{className:"text-lg font-semibold text-foreground",children:a}),s&&(0,w.jsx)(I.VY,{className:"mt-1 text-sm text-foreground/50",children:s})]}),n&&(0,w.jsx)(I.bm,{asChild:!0,children:(0,w.jsx)("button",{className:"rounded-lg p-1.5 text-foreground/40 transition-colors hover:bg-primary-50 hover:text-foreground/60 dark:hover:bg-card-dark","aria-label":"\u0417\u0430\u043a\u0440\u0438\u0442\u0438",children:(0,w.jsx)(b.A,{className:"h-5 w-5"})})})]}),i]})})]})})})}function H(e){let{children:r,className:t}=e;return(0,w.jsx)("div",{className:(0,f.cn)("mt-6 flex justify-end gap-3",t),children:r})}var O=t(4854),B=t(2784),D=t(9688);const W=24,$=[{value:"popular",label:"\u0417\u0430 \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u0456\u0441\u0442\u044e"},{value:"price_asc",label:"\u0426\u0456\u043d\u0430: \u0432\u0456\u0434 \u0434\u0435\u0448\u0435\u0432\u0438\u0445"},{value:"price_desc",label:"\u0426\u0456\u043d\u0430: \u0432\u0456\u0434 \u0434\u043e\u0440\u043e\u0433\u0438\u0445"},{value:"rating",label:"\u0417\u0430 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u043e\u043c"}];function U(e){let{searchTerm:r}=e;const{categoryId:t}=(0,i.g)(),u=(0,i.zy)(),{setError:g}=(0,B.q)(),b=(0,s.useMemo)((()=>new URLSearchParams(u.search)),[u.search]),y=(0,s.useMemo)((()=>b.get("query")||b.get("search")||r||""),[b,r]),j="/search"===u.pathname,[N]=(0,s.useState)((()=>JSON.parse(localStorage.getItem("user")||"null"))),[k]=(0,s.useState)((()=>localStorage.getItem("token")||null)),C=null===N||void 0===N?void 0:N.is_admin,[S,P]=(0,s.useState)("grid"),[R,z]=(0,s.useState)("popular"),{allProducts:I,isLoading:T,filterOptions:U}=(0,O.QT)({categoryId:j?void 0:t,searchQuery:y}),[Q,q]=(0,s.useState)({brands:[],priceRanges:[],volumes:[],types:[],categories:[]}),[Z,J]=(0,s.useState)({brands:[],priceRanges:[],volumes:[],types:[],categories:[]}),[Y,G]=(0,s.useState)(""),[K,X]=(0,s.useState)(""),[ee,re]=(0,s.useState)(1),[te,ae]=(0,s.useState)(1),[se,ie]=(0,s.useState)(!1),[le,ne]=(0,s.useState)(new Set),[oe,ce]=(0,s.useState)(!1),[de,me]=(0,s.useState)(null),ue=(0,s.useMemo)((()=>{let e=[...I];y&&(e=e.filter((e=>e.name.toLowerCase().includes(y.toLowerCase()))));const r=Y&&K?{from:parseFloat(Y),to:parseFloat(K)}:void 0;switch(e=(0,O.ld)(e,Z,r),R){case"price_asc":e.sort(((e,r)=>(0,O.Wt)(e.store_prices)-(0,O.Wt)(r.store_prices)));break;case"price_desc":e.sort(((e,r)=>(0,O.Wt)(r.store_prices)-(0,O.Wt)(e.store_prices)));break;case"rating":e.sort(((e,r)=>(Number(r.rating)||0)-(Number(e.rating)||0)))}return e}),[I,Z,y,Y,K,R]),xe=(0,s.useMemo)((()=>{let e=[...I];y&&(e=e.filter((e=>e.name.toLowerCase().includes(y.toLowerCase()))));const r=Y&&K?{from:parseFloat(Y),to:parseFloat(K)}:void 0;return(0,O.ld)(e,Q,r).length}),[I,Q,y,Y,K]),he=(0,s.useMemo)((()=>{const e=te*W;return ue.slice(0,e)}),[ue,te]),pe=Math.ceil(ue.length/W);(0,s.useEffect)((()=>{(async()=>{if(N&&k&&0!==I.length)try{const e=I.map((e=>e.id)),r=await l.A.post("".concat(D.H,"/saved-products/bulk"),{productIds:e},{headers:{Authorization:"Bearer ".concat(k)}});ne(new Set(r.data.savedProductIds||[]))}catch(e){console.error("Error loading saved products:",e)}})()}),[I,N,k]),(0,s.useEffect)((()=>{q({brands:[],priceRanges:[],volumes:[],types:[],categories:[]}),J({brands:[],priceRanges:[],volumes:[],types:[],categories:[]}),re(1),ae(1)}),[t,y]);const ge=(0,s.useCallback)(((e,r)=>{q((t=>{const s=t[e],i=s.includes(r)?s.filter((e=>e!==r)):[...s,r];return(0,a.A)((0,a.A)({},t),{},{[e]:i})}))}),[]),be=(0,s.useCallback)((()=>{J((0,a.A)({},Q)),re(1),ae(1),ie(!1)}),[Q]),fe=(0,s.useCallback)((()=>{const e={brands:[],priceRanges:[],volumes:[],types:[],categories:[]};q(e),J(e),G(""),X(""),re(1),ae(1)}),[]),ve=(0,s.useCallback)((e=>{re(e),ae(e),window.scrollTo({top:0,behavior:"smooth"})}),[]),ye=(0,s.useCallback)((()=>{ae((e=>e+1))}),[]),je=(0,s.useCallback)((async(e,r)=>{if(r.preventDefault(),!N||!k)return void g("\u0423\u0432\u0456\u0439\u0434\u0456\u0442\u044c \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442, \u0449\u043e\u0431 \u0434\u043e\u0434\u0430\u0442\u0438 \u0434\u043e \u0431\u0430\u0436\u0430\u043d\u043e\u0433\u043e.");const t=le.has(e);ne((r=>{const a=new Set(r);return t?a.delete(e):a.add(e),a}));try{t?await l.A.delete("".concat(D.H,"/saved-products/").concat(e),{headers:{Authorization:"Bearer ".concat(k)}}):await l.A.post("".concat(D.H,"/saved-products"),{productId:e},{headers:{Authorization:"Bearer ".concat(k)}})}catch(a){ne((r=>{const a=new Set(r);return t?a.add(e):a.delete(e),a})),g("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u0431\u0430\u0436\u0430\u043d\u0435")}}),[N,k,le,g]),we=(0,s.useCallback)(((e,r)=>{r.preventDefault(),me(e),ce(!0)}),[]),Ne=(0,s.useCallback)((async()=>{if(de&&k)try{await l.A.delete("".concat(D.H,"/admin/product/").concat(de),{headers:{Authorization:"Bearer ".concat(k)}}),window.location.reload()}catch(e){g("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440")}finally{ce(!1),me(null)}}),[de,k,g]);if(T)return(0,w.jsx)(M.Y,{});const ke=t&&!j?A.Z[t]||"\u0422\u043e\u0432\u0430\u0440\u0438 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0456\u0457":y?'\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0438 \u043f\u043e\u0448\u0443\u043a\u0443: "'.concat(y,'"'):"\u0423\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438",Ce=[...t&&!j?[{label:ke}]:y?[{label:'\u041f\u043e\u0448\u0443\u043a: "'.concat(y,'"')}]:[{label:"\u0423\u0441\u0456 \u0442\u043e\u0432\u0430\u0440\u0438"}]];return(0,w.jsxs)("div",{className:"container-main py-6 lg:py-8",children:[(0,w.jsx)(F.B,{items:Ce,className:"mb-4"}),(0,w.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"font-serif text-2xl font-bold text-foreground lg:text-3xl",children:ke}),(0,w.jsxs)("p",{className:"mt-1 text-sm text-foreground/50",children:["\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u043e ",ue.length," \u0442\u043e\u0432\u0430\u0440\u0456\u0432"]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("select",{value:R,onChange:e=>z(e.target.value),className:"appearance-none rounded-lg border border-border bg-card-light py-2 pl-3 pr-8 text-sm text-foreground/70 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500/20 dark:bg-card-dark",children:$.map((e=>(0,w.jsx)("option",{value:e.value,children:e.label},e.value)))}),(0,w.jsx)(n.A,{className:"pointer-events-none absolute right-2 top-1/2 h-4 w-4 -translate-y-1/2 text-foreground/40"})]}),(0,w.jsxs)("div",{className:"hidden items-center rounded-lg border border-border sm:flex",children:[(0,w.jsx)("button",{onClick:()=>P("grid"),className:(0,f.cn)("rounded-l-lg p-2 transition-colors","grid"===S?"bg-primary-500 text-white":"text-foreground/50 hover:bg-primary-50 dark:hover:bg-primary-900/20"),children:(0,w.jsx)(o.A,{className:"h-4 w-4"})}),(0,w.jsx)("button",{onClick:()=>P("list"),className:(0,f.cn)("rounded-r-lg p-2 transition-colors","list"===S?"bg-primary-500 text-white":"text-foreground/50 hover:bg-primary-50 dark:hover:bg-primary-900/20"),children:(0,w.jsx)(c.A,{className:"h-4 w-4"})})]}),(0,w.jsxs)("button",{onClick:()=>ie(!0),className:"flex items-center gap-2 rounded-lg border border-border bg-card-light px-4 py-2 text-sm font-medium text-foreground/70 shadow-sm transition-colors hover:bg-primary-50 dark:bg-card-dark lg:hidden",children:[(0,w.jsx)(d.A,{className:"h-4 w-4"}),"\u0424\u0456\u043b\u044c\u0442\u0440\u0438",(Z.brands.length>0||Z.priceRanges.length>0||Z.volumes.length>0||Z.types.length>0)&&(0,w.jsx)("span",{className:"rounded-full bg-primary-500 px-2 py-0.5 text-xs text-white",children:Z.brands.length+Z.priceRanges.length+Z.volumes.length+Z.types.length})]})]})]}),(0,w.jsxs)("div",{className:"flex gap-6",children:[(0,w.jsx)("aside",{className:"hidden w-72 shrink-0 lg:block",children:(0,w.jsx)(_,{filters:U,selectedFilters:Q,onFilterChange:ge,onApply:be,onReset:fe,customPriceFrom:Y,customPriceTo:K,onCustomPriceChange:(e,r)=>"from"===e?G(r):X(r),previewCount:xe,isSearchPage:j})}),(0,w.jsx)("main",{className:"flex-1",children:he.length>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:(0,f.cn)("grid"===S?"grid grid-cols-1 gap-4 xs:grid-cols-2 md:grid-cols-3 xl:grid-cols-3":"flex flex-col gap-4"),children:he.map(((e,r)=>"list"===S?(0,w.jsx)(V,{product:e,isSaved:le.has(e.id),isAdmin:C,onHeartClick:je,index:r},e.id):(0,w.jsx)(p.A,{product:e,isSaved:le.has(e.id),isAdmin:C,onHeartClick:je,onDeleteClick:we,index:r},e.id)))}),(0,w.jsx)(L,{currentPage:ee,totalPages:pe,onPageChange:ve,showLoadMore:te<pe,onLoadMore:ye,className:"mt-8"})]}):(0,w.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,w.jsx)(m.A,{className:"mb-4 h-16 w-16 text-border"}),(0,w.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"\u0422\u043e\u0432\u0430\u0440\u0438 \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),(0,w.jsx)("p",{className:"mt-1 text-sm text-foreground/50",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043c\u0456\u043d\u0438\u0442\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0430\u0446\u0456\u0457"}),(Z.brands.length>0||Z.priceRanges.length>0)&&(0,w.jsx)(v.$,{variant:"outline",onClick:fe,className:"mt-4",children:"\u0421\u043a\u0438\u043d\u0443\u0442\u0438 \u0444\u0456\u043b\u044c\u0442\u0440\u0438"})]})})]}),(0,w.jsx)(x.N,{children:se&&(0,w.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 lg:hidden",onClick:()=>ie(!1),children:(0,w.jsx)(h.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"tween",duration:.3},className:"absolute inset-y-0 left-0 w-full max-w-sm",onClick:e=>e.stopPropagation(),children:(0,w.jsx)(_,{filters:U,selectedFilters:Q,onFilterChange:ge,onApply:be,onReset:fe,customPriceFrom:Y,customPriceTo:K,onCustomPriceChange:(e,r)=>"from"===e?G(r):X(r),previewCount:xe,isSearchPage:j,isMobile:!0,onClose:()=>ie(!1)})})})}),(0,w.jsx)(E,{isOpen:oe,onClose:()=>ce(!1),title:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0442\u043e\u0432\u0430\u0440?",description:"\u0426\u044f \u0434\u0456\u044f \u043d\u0435\u0437\u0432\u043e\u0440\u043e\u0442\u043d\u044f. \u0422\u043e\u0432\u0430\u0440 \u0431\u0443\u0434\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e \u043d\u0430\u0437\u0430\u0432\u0436\u0434\u0438.",children:(0,w.jsxs)(H,{children:[(0,w.jsx)(v.$,{variant:"ghost",onClick:()=>ce(!1),children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"}),(0,w.jsx)(v.$,{variant:"danger",onClick:Ne,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})})]})}function V(e){var r,t;let{product:a,isSaved:l,isAdmin:n,onHeartClick:o,index:c}=e;const[d,m]=(0,s.useState)(!1),x=(0,O.Wt)(a.store_prices),p=(null===(r=a.store_prices)||void 0===r?void 0:r.length)||0,g=!d&&null!==(t=a.images)&&void 0!==t&&t[0]?a.images[0]:"/img/placeholder.webp";return(0,w.jsx)(h.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.03*c},children:(0,w.jsxs)(i.N_,{to:"/product/".concat(a.id),className:"flex gap-4 rounded-xl border border-border bg-card-light p-3 shadow-card transition-all duration-300 hover:shadow-card-hover dark:bg-card-dark",children:[(0,w.jsx)("div",{className:"h-32 w-32 flex-shrink-0 overflow-hidden rounded-lg bg-surface-light dark:bg-card-dark",children:(0,w.jsx)("img",{src:g,alt:a.name,className:"h-full w-full object-cover",onError:()=>m(!0),loading:"lazy"})}),(0,w.jsxs)("div",{className:"flex flex-1 flex-col justify-between py-1",children:[(0,w.jsxs)("div",{children:[a.brand_name&&(0,w.jsx)("span",{className:"text-xs font-medium text-primary-500",children:a.brand_name}),(0,w.jsx)("h3",{className:"line-clamp-2 text-sm font-medium text-foreground",children:a.name})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[x>0?(0,w.jsxs)("span",{className:"text-lg font-bold text-success-500",children:[x," \u20b4"]}):(0,w.jsx)("span",{className:"text-sm text-foreground/40",children:"\u0426\u0456\u043d\u0430 \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u0430"}),p>0&&(0,w.jsxs)("span",{className:"ml-2 text-xs text-foreground/40",children:[p," ",1===p?"\u043c\u0430\u0433\u0430\u0437\u0438\u043d":"\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456\u0432"]})]}),(0,w.jsx)("button",{onClick:e=>{e.preventDefault(),o(a.id,e)},className:(0,f.cn)("rounded-full p-2 transition-colors",l?"text-error-500":"text-foreground/30 hover:text-error-500"),children:(0,w.jsx)(u.A,{className:(0,f.cn)("h-5 w-5",l&&"fill-current")})})]})]})]})})}},3388:(e,r,t)=>{t.d(r,{$:()=>u});var a=t(2555),s=t(3986),i=t(5043),l=t(917),n=t(8557),o=t(2024),c=t(579);const d=["className","variant","size","isLoading","leftIcon","rightIcon","children","disabled"],m=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{primary:"bg-primary-500 text-white shadow-md hover:bg-primary-600 hover:shadow-lg focus-visible:ring-primary-500",secondary:"bg-primary-100 text-primary-700 shadow-sm hover:bg-primary-200 hover:shadow-md focus-visible:ring-primary-500 dark:bg-primary-900/30 dark:text-primary-300 dark:hover:bg-primary-900/50",accent:"bg-primary-500 text-white shadow-md hover:bg-primary-600 hover:shadow-lg focus-visible:ring-primary-500",outline:"border-2 border-primary-500 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 focus-visible:ring-primary-500",ghost:"text-foreground/70 hover:bg-primary-50 dark:hover:bg-card-dark focus-visible:ring-primary-500",link:"text-primary-500 underline-offset-4 hover:underline focus-visible:ring-primary-500",danger:"bg-error-500 text-white shadow-md hover:bg-error-600 hover:shadow-lg focus-visible:ring-error-500",success:"bg-success-500 text-white shadow-md hover:bg-success-600 hover:shadow-lg focus-visible:ring-success-500"},size:{xs:"h-7 px-2 text-xs rounded-md",sm:"h-8 px-3 text-xs",md:"h-10 px-4",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg",icon:"h-10 w-10","icon-sm":"h-8 w-8","icon-lg":"h-12 w-12"}},defaultVariants:{variant:"primary",size:"md"}}),u=(0,i.forwardRef)(((e,r)=>{let{className:t,variant:i,size:l,isLoading:u,leftIcon:x,rightIcon:h,children:p,disabled:g}=e,b=(0,s.A)(e,d);return(0,c.jsxs)("button",(0,a.A)((0,a.A)({className:(0,n.cn)(m({variant:i,size:l,className:t})),ref:r,disabled:g||u},b),{},{children:[u?(0,c.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):x||null,p,!u&&h]}))}));u.displayName="Button"},4049:(e,r,t)=>{t.d(r,{B:()=>c});var a=t(5043),s=t(9002),i=t(3658),l=t(8326),n=t(8557),o=t(579);function c(e){let{items:r,className:t}=e;return(0,o.jsxs)("nav",{className:(0,n.cn)("flex items-center gap-1.5 text-sm",t),"aria-label":"Breadcrumb",children:[(0,o.jsx)(s.N_,{to:"/",className:"flex items-center text-foreground/40 transition-colors hover:text-primary-500",children:(0,o.jsx)(i.A,{className:"h-4 w-4"})}),r.map(((e,r)=>(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(l.A,{className:"h-3.5 w-3.5 text-foreground/30"}),e.href?(0,o.jsx)(s.N_,{to:e.href,className:"text-foreground/50 transition-colors hover:text-primary-500",children:e.label}):(0,o.jsx)("span",{className:"text-foreground/70 font-medium",children:e.label})]},r)))]})}},4074:(e,r,t)=>{t.d(r,{A:()=>h});var a=t(5043),s=t(9002),i=t(4918),l=t(9855),n=t(3944),o=t(6511),c=t(6533),d=t(4227),m=t(8557),u=t(4854),x=t(579);function h(e){var r;let{product:t,isSaved:h=!1,isAdmin:p=!1,onHeartClick:g,onDeleteClick:b,index:f=0}=e;const[v,y]=(0,a.useState)(!1),[j,w]=(0,a.useState)(!1),N=(0,u.Wt)(t.store_prices),k=(0,u.U$)(t.store_prices),C=(0,u.P_)(t.store_prices),A=Number(t.rating)||0,S=Number(t.review_count)||0,_=!v&&null!==(r=t.images)&&void 0!==r&&r[0]?t.images[0]:"/img/placeholder.webp",P=function(e){const r=Number(e.rating)||0,t=(0,u.P_)(e.store_prices);if(r>=4.5)return{label:"\u0422\u043e\u043f \u043f\u0440\u043e\u0434\u0430\u0436\u0456\u0432",variant:"bg-primary-500 text-white"};if(t>=8)return{label:"\u0425\u0456\u0442",variant:"bg-red-500 text-white"};if(e.brand_name&&["MAC","Chanel","Dior","Est\xe9e Lauder"].includes(e.brand_name))return{label:"\u041f\u0440\u0435\u043c\u0456\u0443\u043c",variant:"bg-amber-500 text-white"};const a=(0,u.Wt)(e.store_prices),s=(0,u.U$)(e.store_prices);return s>0&&a>0&&(s-a)/s>.2?{label:"\u0412\u0438\u0433\u0456\u0434\u043d\u043e",variant:"bg-success-500 text-white"}:null}(t);return(0,x.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*f},className:"group relative h-full",onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:[(0,x.jsxs)(s.N_,{to:"/product/".concat(t.id),className:"flex h-full flex-col overflow-hidden rounded-xl border border-border bg-card-light shadow-card transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1 dark:bg-card-dark",children:[(0,x.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-surface-light dark:bg-card-dark",children:[(0,x.jsx)("img",{src:_,alt:t.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",onError:()=>y(!0),loading:"lazy"}),P&&(0,x.jsx)("span",{className:(0,m.cn)("absolute left-3 top-3 rounded-full px-2.5 py-1 text-xs font-medium",P.variant),children:P.label}),(0,x.jsx)(d.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:j||h?1:0,scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.preventDefault(),null===g||void 0===g||g(t.id,e)},className:(0,m.cn)("absolute right-3 top-3 min-h-[44px] min-w-[44px] rounded-full p-2.5 shadow-md transition-all duration-200",h?"bg-error-500 text-white":"bg-card-light/90 text-foreground/50 hover:text-error-500 dark:bg-card-dark/90"),children:(0,x.jsx)(i.A,{className:(0,m.cn)("h-5 w-5",h&&"fill-current")})}),p&&(0,x.jsx)(d.P.button,{initial:{opacity:0,scale:.8},animate:{opacity:j?1:0,scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:e=>{e.preventDefault(),null===b||void 0===b||b(t.id,e)},className:"absolute left-3 bottom-3 rounded-full bg-error-500 p-2 text-white shadow-md transition-all duration-200 hover:bg-error-600",children:(0,x.jsx)(l.A,{className:"h-4 w-4"})})]}),(0,x.jsxs)("div",{className:"flex flex-1 flex-col p-4",children:[(0,x.jsxs)("div",{className:"mb-1 flex items-center gap-2",children:[t.brand_name&&(0,x.jsx)("span",{className:"text-xs font-medium text-primary-500",children:t.brand_name}),t.volume&&(0,x.jsx)("span",{className:"text-xs text-foreground/40",children:t.volume})]}),(0,x.jsx)("h3",{className:"mb-1.5 line-clamp-2 text-sm font-medium text-foreground transition-colors group-hover:text-primary-500",children:t.name}),A>0&&(0,x.jsxs)("div",{className:"mb-2 flex items-center gap-1 text-xs text-foreground/50",children:[(0,x.jsx)(n.A,{className:"h-3.5 w-3.5 fill-amber-400 text-amber-400"}),(0,x.jsx)("span",{className:"font-medium text-foreground/70",children:A.toFixed(1)}),S>0&&(0,x.jsxs)("span",{children:["(",S," \u0432\u0456\u0434\u0433\u0443\u043a\u0456\u0432)"]})]}),(0,x.jsx)("div",{className:"mb-2 border-t border-border"}),(0,x.jsx)("div",{className:"mb-1.5",children:N>0?(0,x.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,x.jsxs)("span",{className:"text-lg font-bold text-success-500",children:[N," \u20b4"]}),k>N&&(0,x.jsxs)("span",{className:"text-sm text-foreground/40 line-through",children:[k," \u20b4"]})]}):(0,x.jsx)("span",{className:"text-sm text-foreground/40",children:"\u0426\u0456\u043d\u0430 \u043d\u0435 \u0432\u043a\u0430\u0437\u0430\u043d\u0430"})}),C>0&&(0,x.jsxs)("div",{className:"mb-3 flex items-center gap-1.5 text-xs text-foreground/50",children:[(0,x.jsx)(o.A,{className:"h-3.5 w-3.5"}),(0,x.jsxs)("span",{children:["\ud83c\udfea ",C," ",1===C?"\u043c\u0430\u0433\u0430\u0437\u0438\u043d":C<5?"\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0438":"\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456\u0432"]})]}),(0,x.jsx)("div",{className:"mt-auto rounded-lg border border-primary-500/30 py-1.5 text-center text-xs font-medium text-primary-500 transition-colors group-hover:bg-primary-50 dark:group-hover:bg-primary-900/20",children:"\u041f\u043e\u0440\u0456\u0432\u043d\u044f\u0442\u0438"})]})]}),p&&(0,x.jsx)(s.N_,{to:"/admin/product-edit?id=".concat(t.id),className:"absolute bottom-3 right-3 rounded-full bg-primary-500 p-2 text-white opacity-0 shadow-md transition-all duration-200 hover:bg-primary-600 group-hover:opacity-100",children:(0,x.jsx)(c.A,{className:"h-4 w-4"})})]})}},4854:(e,r,t)=>{t.d(r,{P_:()=>c,QT:()=>l,U$:()=>o,Wt:()=>n,ld:()=>d});var a=t(5043),s=t(9722),i=t(9688);function l(e){let{categoryId:r,searchQuery:t,page:l=1,limit:o=24}=e;const[c,d]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)({brands:[],priceRanges:[],volumes:[],types:[],categories:[]});return(0,a.useEffect)((()=>{(async()=>{u(!0),h(null);try{const e=(await s.A.get("".concat(i.H,"/products"),{params:{search:t||void 0,category:r||void 0,limit:1e3}})).data.products||[];d(e);const a={},l={},o={},c=new Set,m=new Set;e.forEach((e=>{const r=e.brand_name||"",t=e.feature_type||"",s=e.category_name||"",i=e.volume||"",d=n(e.store_prices);r&&(a[r]=(a[r]||0)+1),t&&(l[t]=(l[t]||0)+1),s&&(o[s]=(o[s]||0)+1),i&&c.add(i),d>0&&(d<=100?m.add("0-100"):d<=200?m.add("100-200"):d<=500?m.add("200-500"):d<=1e3?m.add("500-1000"):m.add("1000+"))}));const u=Object.entries(a).sort(((e,r)=>r[1]-e[1])).map((e=>{let[r]=e;return r})),x=Object.entries(l).sort(((e,r)=>r[1]-e[1])).map((e=>{let[r]=e;return r})),h=Object.entries(o).sort(((e,r)=>r[1]-e[1])).map((e=>{let[r]=e;return r})),p=[{label:"0-100",min:0,max:100},{label:"100-200",min:100,max:200},{label:"200-500",min:200,max:500},{label:"500-1000",min:500,max:1e3},{label:"1000+",min:1e3,max:1/0}].filter((e=>m.has(e.label))),b=[...c].sort(((e,r)=>(parseFloat(e.replace(/[^0-9.]/g,""))||0)-(parseFloat(r.replace(/[^0-9.]/g,""))||0)));g({brands:u,priceRanges:p,volumes:b,types:x,categories:h})}catch(e){h(e.message||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0442\u043e\u0432\u0430\u0440\u0456\u0432"),d([])}finally{u(!1)}})()}),[r,t]),{allProducts:c,isLoading:m,error:x,filterOptions:p}}function n(e){return e&&0!==e.length?Math.min(...e.map((e=>e.price))):0}function o(e){return e&&0!==e.length?Math.max(...e.map((e=>e.price))):0}function c(e){return e?e.length:0}function d(e,r,t){let a=[...e];return r.brands.length>0&&(a=a.filter((e=>r.brands.includes(e.brand_name||"")))),t&&t.from>=0&&t.to>0?a=a.filter((e=>{const r=n(e.store_prices);return r>=t.from&&r<=t.to})):r.priceRanges.length>0&&(a=a.filter((e=>{const t=n(e.store_prices);return r.priceRanges.some((e=>{const[r,a]=e.includes("+")?[1e3,1/0]:e.split("-").map(Number);return t>=r&&(a===1/0||t<=a)}))}))),r.volumes.length>0&&(a=a.filter((e=>r.volumes.includes(e.volume||"")))),r.types.length>0&&(a=a.filter((e=>r.types.includes(e.feature_type||"")))),r.categories.length>0&&(a=a.filter((e=>r.categories.includes(e.category_name||"")))),a}}}]);
//# sourceMappingURL=790.263f5d63.chunk.js.map