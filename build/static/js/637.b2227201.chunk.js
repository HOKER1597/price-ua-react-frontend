"use strict";(self.webpackChunkprice_ua=self.webpackChunkprice_ua||[]).push([[637],{1498:()=>{},3637:(e,a,t)=>{t.r(a),t.d(a,{default:()=>o});var n=t(2555),s=t(5043),l=t(9722),i=t(9688),r=(t(1498),t(9409),t(579));const o=function(){const[e,a]=(0,s.useState)([]),[t,o]=(0,s.useState)(""),[c,d]=(0,s.useState)({name:"",logo:null,years_with_us:"",link:""}),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),[v,j]=(0,s.useState)(!1),[f,y]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(async()=>{try{const e=await l.A.get("".concat(i.H,"/stores"));a(e.data.sort(((e,a)=>e.name.localeCompare(a.name))))}catch(e){console.error("\u041f\u043e\u043c ATV\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0456\u0432:",e)}})()}),[]),(0,s.useEffect)((()=>{if(t){(async()=>{try{const e=localStorage.getItem("token"),a=await l.A.get("".concat(i.H,"/stores/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}});d({name:a.data.name,logo:null,years_with_us:a.data.years_with_us||"",link:a.data.link||""}),m(a.data.logo||null)}catch(e){p("\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0434\u0430\u043d\u0456 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443.")}})()}}),[t]);const b=e=>{const{name:a,value:t}=e.target;d((0,n.A)((0,n.A)({},c),{},{[a]:t}))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"admin-product-create animate-page",children:[(0,r.jsx)("h2",{className:"centered-heading",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),(0,r.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j(!0),p(null),x(null),!c.name)return p("\u041d\u0430\u0437\u0432\u0430 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443 \u0454 \u043e\u0431\u043e\u0432\u2019\u044f\u0437\u043a\u043e\u0432\u043e\u044e"),void j(!1);const a=new FormData;a.append("name",c.name),c.logo&&a.append("logo",c.logo),a.append("years_with_us",c.years_with_us),a.append("link",c.link);try{const e=localStorage.getItem("token");await l.A.put("".concat(i.H,"/admin/store/").concat(t),a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}}),x("\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e!")}catch(r){var n,s;p((null===(n=r.response)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.error)||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u043e\u043d\u043e\u0432\u0438\u0442\u0438 \u043c\u0430\u0433\u0430\u0437\u0438\u043d.")}finally{j(!1)}},children:[(0,r.jsxs)("div",{className:"form-group animate-field",children:[(0,r.jsx)("label",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),(0,r.jsxs)("select",{value:t,onChange:e=>o(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),e.map((e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,r.jsxs)("div",{className:"form-group animate-field",children:[(0,r.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443"}),(0,r.jsx)("input",{type:"text",name:"name",value:c.name,onChange:b,required:!0})]}),(0,r.jsxs)("div",{className:"form-group animate-field",children:[(0,r.jsx)("label",{children:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"}),(0,r.jsx)("input",{type:"file",name:"logo",accept:"image/*",onChange:e=>{const a=e.target.files[0];d((0,n.A)((0,n.A)({},c),{},{logo:a})),m(a?URL.createObjectURL(a):c.logo)}}),u&&(0,r.jsxs)("div",{className:"image-preview",children:[(0,r.jsx)("label",{children:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434"}),(0,r.jsx)("img",{src:u,alt:"Preview"})]})]}),(0,r.jsxs)("div",{className:"form-group animate-field",children:[(0,r.jsx)("label",{children:"\u0420\u043e\u043a\u0438 \u0441\u043f\u0456\u0432\u043f\u0440\u0430\u0446\u0456"}),(0,r.jsx)("input",{type:"number",name:"years_with_us",value:c.years_with_us,onChange:b})]}),(0,r.jsxs)("div",{className:"form-group animate-field",children:[(0,r.jsx)("label",{children:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f"}),(0,r.jsx)("input",{type:"text",name:"link",value:c.link,onChange:b})]}),h&&(0,r.jsx)("div",{className:"error-message centered-message",children:h}),g&&(0,r.jsx)("div",{className:"success-message centered-message",children:g}),(0,r.jsx)("button",{type:"submit",className:"save-button animate-field",disabled:v||!t,children:v?"\u0417\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u044f...":"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,r.jsx)("button",{type:"button",className:"save-button animate-field",style:{backgroundColor:"#ff6f61",marginTop:"10px"},onClick:()=>{y(!0)},disabled:!t,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})]})]}),f&&(0,r.jsx)("div",{className:"modal-overlay",children:(0,r.jsxs)("div",{className:"delete-modal",children:[(0,r.jsxs)("p",{children:['\u0412\u0438 \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435\u0439 \u043c\u0430\u0433\u0430\u0437\u0438\u043d "',c.name,'"?']}),h&&(0,r.jsx)("div",{className:"modal-error",children:h}),(0,r.jsxs)("div",{className:"modal-buttons",children:[(0,r.jsx)("button",{className:"wishlist-modal-confirm-delete-btn",onClick:async()=>{try{const e=localStorage.getItem("token");await l.A.delete("".concat(i.H,"/admin/store/").concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),x("\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043e!"),d({name:"",logo:null,years_with_us:"",link:""}),o(""),m(null),y(!1)}catch(n){var e,a;p((null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.error)||"\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043c\u0430\u0433\u0430\u0437\u0438\u043d.")}},children:"\u0422\u0430\u043a"}),(0,r.jsx)("button",{className:"wishlist-modal-cancel-btn",onClick:()=>{y(!1),p(null)},children:"\u041d\u0456"})]})]})})]})}},9409:()=>{}}]);
//# sourceMappingURL=637.b2227201.chunk.js.map