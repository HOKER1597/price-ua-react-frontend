"use strict";(self.webpackChunkprice_ua=self.webpackChunkprice_ua||[]).push([[210],{2210:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var n=t(5043),c=t(9002),s=t(9722),l=t(9688),o=t(579);const r=function(){const[e,a]=(0,n.useState)(null),[t,r]=(0,n.useState)(""),[i,u]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[v,g]=(0,n.useState)(""),[x,j]=(0,n.useState)(!1),[N,b]=(0,n.useState)({email:!1,gender:!1,birthDate:!1,avatar:!1}),k=(0,c.Zp)();return(0,n.useEffect)((()=>{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);a(t),r(t.email||""),u(t.gender||""),h(t.birth_date?t.birth_date.split("T")[0]:""),j(!0),setTimeout((()=>b({email:!0,gender:!0,birthDate:!0,avatar:!0})),100)}else k("/login")}),[k]),e?(0,o.jsx)("div",{className:"account-page",children:(0,o.jsxs)("div",{className:"account-container ".concat(x?"animate":""),children:[(0,o.jsxs)("div",{className:"account-header",children:[(0,o.jsxs)("div",{className:"account-avatar",children:[e.photo?(0,o.jsx)("img",{src:e.photo,alt:"User Avatar",className:"account-avatar-img",onClick:()=>document.getElementById("avatar-upload").click()}):(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100",viewBox:"0 0 24 24",fill:"none",stroke:"#555",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",onClick:()=>document.getElementById("avatar-upload").click(),className:"account-avatar-svg",children:[(0,o.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,o.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,o.jsx)("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return g("\u0424\u0430\u0439\u043b \u043d\u0435 \u043e\u0431\u0440\u0430\u043d\u043e"),void p("");try{const n=localStorage.getItem("token"),c=new FormData;c.append("avatar",t);const o=await s.A.post("".concat(l.H,"/upload-avatar"),c,{headers:{Authorization:"Bearer ".concat(n)}});localStorage.setItem("user",JSON.stringify(o.data.user)),window.dispatchEvent(new Event("storage")),a(o.data.user),p("\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0443 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043e"),g(""),e.target.value=null}catch(o){var n,c;g((null===(n=o.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.error)||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0438"),p("")}},style:{display:"none"}})]}),(0,o.jsx)("h2",{className:"account-nickname",children:e.nickname})]}),(0,o.jsxs)("div",{className:"account-details",children:[m&&(0,o.jsx)("p",{className:"success",children:m}),v&&(0,o.jsx)("p",{className:"error",style:{color:"#e53e3e",marginBottom:"12px",fontSize:"14px"},children:v}),(0,o.jsx)("button",{onClick:()=>document.getElementById("avatar-upload").click(),className:"account-button account-button-add-photo",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0456\u044e"}),(0,o.jsx)("label",{className:"account-label",children:"\u041f\u043e\u0448\u0442\u0430"}),(0,o.jsx)("input",{type:"email",value:t,onChange:e=>r(e.target.value),className:"account-input ".concat(N.email?"field-animate":""),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u043e\u0448\u0442\u0443"}),(0,o.jsx)("label",{className:"account-label",children:"\u0413\u0435\u043d\u0434\u0435\u0440"}),(0,o.jsxs)("select",{value:i,onChange:e=>u(e.target.value),className:"account-input ".concat(N.gender?"field-animate":""),children:[(0,o.jsx)("option",{value:"",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0433\u0435\u043d\u0434\u0435\u0440"}),(0,o.jsx)("option",{value:"male",children:"\u0427\u043e\u043b\u043e\u0432\u0456\u043a"}),(0,o.jsx)("option",{value:"female",children:"\u0416\u0456\u043d\u043a\u0430"}),(0,o.jsx)("option",{value:"other",children:"\u0406\u043d\u0448\u0435"})]}),(0,o.jsx)("label",{className:"account-label",children:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f"}),(0,o.jsx)("input",{type:"date",value:d,onChange:e=>h(e.target.value),className:"account-input ".concat(N.birthDate?"field-animate":"")}),(0,o.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token"),n=await s.A.post("".concat(l.H,"/update-user"),{email:t,gender:i,birth_date:d},{headers:{Authorization:"Bearer ".concat(e)}});localStorage.setItem("user",JSON.stringify(n.data.user)),window.dispatchEvent(new Event("storage")),a(n.data.user),p("\u0414\u0430\u043d\u0456 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),g("")}catch(c){var e,n;g((null===(e=c.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445"),p("")}},className:"account-button",children:"\u041e\u043d\u043e\u0432\u0438\u0442\u0438 \u0434\u0430\u043d\u0456"})]})]})}):null}}}]);
//# sourceMappingURL=210.a32a6c3c.chunk.js.map