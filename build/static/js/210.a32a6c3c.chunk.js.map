{"version":3,"file":"static/js/210.a32a6c3c.chunk.js","mappings":"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","sources":["components/Account.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../utils/api';\r\nimport './Account.css';\r\n\r\nfunction Account() {\r\n  const [user, setUser] = useState(null);\r\n  const [email, setEmail] = useState('');\r\n  const [gender, setGender] = useState('');\r\n  const [birthDate, setBirthDate] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [localError, setLocalError] = useState('');\r\n  const [animate, setAnimate] = useState(false);\r\n  const [fieldAnimations, setFieldAnimations] = useState({\r\n    email: false,\r\n    gender: false,\r\n    birthDate: false,\r\n    avatar: false,\r\n  });\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    if (storedUser) {\r\n      const parsedUser = JSON.parse(storedUser);\r\n      setUser(parsedUser);\r\n      setEmail(parsedUser.email || '');\r\n      setGender(parsedUser.gender || '');\r\n      setBirthDate(parsedUser.birth_date ? parsedUser.birth_date.split('T')[0] : '');\r\n      setAnimate(true);\r\n      setTimeout(() => setFieldAnimations({ email: true, gender: true, birthDate: true, avatar: true }), 100);\r\n    } else {\r\n      navigate('/login');\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleUpdate = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.post(\r\n        `${API_URL}/update-user`,\r\n        {\r\n          email,\r\n          gender,\r\n          birth_date: birthDate,\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n      localStorage.setItem('user', JSON.stringify(response.data.user));\r\n      window.dispatchEvent(new Event('storage'));\r\n      setUser(response.data.user);\r\n      setSuccess('Дані успішно оновлено');\r\n      setLocalError('');\r\n    } catch (err) {\r\n      setLocalError(err.response?.data?.error || 'Помилка оновлення даних');\r\n      setSuccess('');\r\n    }\r\n  };\r\n\r\n  const handleAvatarChange = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) {\r\n      setLocalError('Файл не обрано');\r\n      setSuccess('');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const formData = new FormData();\r\n      formData.append('avatar', file);\r\n\r\n      const response = await axios.post(\r\n        `${API_URL}/upload-avatar`,\r\n        formData,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      localStorage.setItem('user', JSON.stringify(response.data.user));\r\n      window.dispatchEvent(new Event('storage'));\r\n      setUser(response.data.user);\r\n      setSuccess('Аватарку успішно завантажено');\r\n      setLocalError('');\r\n      e.target.value = null;\r\n    } catch (err) {\r\n      setLocalError(err.response?.data?.error || 'Помилка завантаження аватарки');\r\n      setSuccess('');\r\n    }\r\n  };\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <div className=\"account-page\">\r\n      <div className={`account-container ${animate ? 'animate' : ''}`}>\r\n        <div className=\"account-header\">\r\n          <div className=\"account-avatar\">\r\n            {user.photo ? (\r\n              <img\r\n                src={user.photo}\r\n                alt=\"User Avatar\"\r\n                className=\"account-avatar-img\"\r\n                onClick={() => document.getElementById('avatar-upload').click()}\r\n              />\r\n            ) : (\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"100\"\r\n                height=\"100\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"#555\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                onClick={() => document.getElementById('avatar-upload').click()}\r\n                className=\"account-avatar-svg\"\r\n              >\r\n                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n                <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n              </svg>\r\n            )}\r\n            <input\r\n              id=\"avatar-upload\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleAvatarChange}\r\n              style={{ display: 'none' }}\r\n            />\r\n          </div>\r\n          <h2 className=\"account-nickname\">{user.nickname}</h2>\r\n        </div>\r\n        <div className=\"account-details\">\r\n          {success && <p className=\"success\">{success}</p>}\r\n          {localError && <p className=\"error\" style={{ color: '#e53e3e', marginBottom: '12px', fontSize: '14px' }}>{localError}</p>}\r\n          <button\r\n            onClick={() => document.getElementById('avatar-upload').click()}\r\n            className=\"account-button account-button-add-photo\"\r\n          >\r\n            Додати фотографію\r\n          </button>\r\n          <label className=\"account-label\">Пошта</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            className={`account-input ${fieldAnimations.email ? 'field-animate' : ''}`}\r\n            placeholder=\"Введіть пошту\"\r\n          />\r\n          <label className=\"account-label\">Гендер</label>\r\n          <select\r\n            value={gender}\r\n            onChange={(e) => setGender(e.target.value)}\r\n            className={`account-input ${fieldAnimations.gender ? 'field-animate' : ''}`}\r\n          >\r\n            <option value=\"\">Оберіть гендер</option>\r\n            <option value=\"male\">Чоловік</option>\r\n            <option value=\"female\">Жінка</option>\r\n            <option value=\"other\">Інше</option>\r\n          </select>\r\n          <label className=\"account-label\">Дата народження</label>\r\n          <input\r\n            type=\"date\"\r\n            value={birthDate}\r\n            onChange={(e) => setBirthDate(e.target.value)}\r\n            className={`account-input ${fieldAnimations.birthDate ? 'field-animate' : ''}`}\r\n          />\r\n          <button onClick={handleUpdate} className=\"account-button\">\r\n            Оновити дані\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Account;\r\n"],"names":["user","setUser","useState","email","setEmail","gender","setGender","birthDate","setBirthDate","success","setSuccess","localError","setLocalError","animate","setAnimate","fieldAnimations","setFieldAnimations","avatar","navigate","useNavigate","useEffect","storedUser","localStorage","getItem","parsedUser","JSON","parse","birth_date","split","setTimeout","_jsx","className","children","_jsxs","concat","photo","src","alt","onClick","document","getElementById","click","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","cx","cy","r","id","type","accept","onChange","async","file","e","target","files","token","formData","FormData","append","response","axios","post","API_URL","headers","Authorization","setItem","stringify","data","window","dispatchEvent","Event","value","err","_err$response2","_err$response2$data","error","style","display","nickname","color","marginBottom","fontSize","placeholder","_err$response","_err$response$data"],"sourceRoot":""}