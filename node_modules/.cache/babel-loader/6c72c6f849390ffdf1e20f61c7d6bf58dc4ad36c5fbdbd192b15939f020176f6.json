{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import'./Header.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const categoryNames={shampoos:'Шампуні',facecream:'Кремити для обличчя',facemask:'Маски для обличчя',tonal:'Тональльні засоби',powder:'удри',blush:'Рум’яна',highlighter:'Хайлайтери',concealer:'Консилери',lipstick:'Помади',lipgloss:'Блиски для губ',lipliner:'Олівці для губ',eyeshadow:'Тіні для повік',eyeliner:'Підводки',mascara:'Туші для вій',browpencil:'Олівці для брів',browshadow:'Тіні для брів',browgel:'Гелі для брів',nailpolish:'Лаки для нігтів',makeupremover:'Засоби для зняття макіяжу',brushes:'Пензлі для макіяжу',serum:'Сироватки',scrub:'Скраби',cleanser:'Очищувальні засоби',tonic:'Тоніки',micellar:'Міцелярна вода',eyecream:'Креми для очей',lipbalm:'Бальзами для губ',antiaging:'Антивікові засоби',sunscreen:'Сонцезахисні засоби',conditioner:'Кондиціонери',hairmask:'Маски для волосся',hairoil:'Олії для волосся',hairserum:'Сироватки для волосся',hairspray:'Лаки для волосся',hairdye:'Фарби для волосся',styling:'Засоби для укладки',dryshampoo:'Сухі шампуні',hairloss:'Засоби проти втрати волосся'};function Header(_ref){let{setSearchTerm}=_ref;const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[showResults,setShowResults]=useState(false);const[isLoading,setIsLoading]=useState(false);const[isResultsUpdated,setIsResultsUpdated]=useState(false);const[isInitialOpen,setIsInitialOpen]=useState(true);const[isClosing,setIsClosing]=useState(false);const[showText,setShowText]=useState(false);const[user,setUser]=useState(null);const[showContextMenu,setShowContextMenu]=useState(false);const[userLocation,setUserLocation]=useState(localStorage.getItem('userLocationStatus')||'Виберіть місто');const[showCityPopup,setShowCityPopup]=useState(false);const[cities,setCities]=useState([]);const[citySearch,setCitySearch]=useState('');const navigate=useNavigate();const searchInputRef=useRef(null);const resultsRef=useRef(null);const contextMenuRef=useRef(null);const cityPopupRef=useRef(null);// Логування рендерингу для дебагінгу\nconsole.log('Рендеринг Header, стан:',{userLocation,showCityPopup,user});// Top 10 largest Ukrainian cities, with last one as \"За розташуванням\"\nconst topCities=['Київ','Харків','Одеса','Дніпро','Херсон','Запоріжжя','Львів','Кривий Ріг','Миколаїв','За розташуванням'];// Fetch cities from backend\nuseEffect(()=>{console.log('useEffect для fetchCities викликано');const fetchCities=async()=>{try{const response=await axios.get('https://price-ua-react-backend.onrender.com/cities');console.log('Cities fetched:',response.data.length);setCities(response.data);}catch(error){console.error('Error fetching cities:',error);}};fetchCities();},[]);// Handle geolocation request (used for initial prompt and \"За розташуванням\")\nconst fetchGeolocation=useCallback(async()=>{console.log('fetchGeolocation викликано');if(!navigator.geolocation){console.log('Geolocation is not supported by this browser.');localStorage.setItem('userLocationStatus','denied');setUserLocation('Виберіть місто');return;}try{const position=await new Promise((resolve,reject)=>{navigator.geolocation.getCurrentPosition(resolve,reject,{enableHighAccuracy:true,timeout:10000,maximumAge:0});});const{latitude,longitude}=position.coords;console.log('Geolocation retrieved:',{latitude,longitude});const response=await axios.get(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`);const address=response.data.address;const location=address.city||address.town||address.village||'Невідоме місце';console.log('Reverse geocoding result:',location);setUserLocation(prev=>{if(prev===location){console.log('Місце не змінилося, пропускаємо оновлення');return prev;}console.log('Оновлення userLocation:',location);localStorage.setItem('userLocationStatus',location);return location;});setShowCityPopup(false);}catch(error){console.error('Error fetching location:',error);localStorage.setItem('userLocationStatus','denied');setUserLocation('Виберіть місто');setShowCityPopup(false);}},[]);// Handle initial geolocation prompt on first visit\nuseEffect(()=>{console.log('useEffect для ініціалізації геолокації викликано');let isMounted=true;const locationStatus=localStorage.getItem('userLocationStatus');if(locationStatus){console.log('Location status from localStorage:',locationStatus);if(locationStatus!=='denied'&&isMounted){setUserLocation(locationStatus);}else if(isMounted){setUserLocation('Виберіть місто');}return;}fetchGeolocation();return()=>{console.log('Очищення useEffect для ініціалізації геолокації');isMounted=false;};},[fetchGeolocation]);// Load user from localStorage and validate token\nuseEffect(()=>{console.log('useEffect для валідації токена викликано');const storedUser=localStorage.getItem('user');const token=localStorage.getItem('token');if(storedUser&&token){const validateToken=async()=>{try{console.log('Validating token in Header');const response=await axios.get('https://price-ua-react-backend.onrender.com/profile',{headers:{Authorization:`Bearer ${token}`}});console.log('Token valid, user data:',response.data);setUser(JSON.parse(storedUser));}catch(err){var _err$response,_err$response2,_err$response3,_err$response4,_err$response5,_err$response5$data,_err$response5$data$e,_err$response6,_err$response6$data,_err$response6$data$e;console.error('Token validation failed in Header:',{status:(_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status,data:(_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data,message:err.message});if(((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.status)===401||((_err$response4=err.response)===null||_err$response4===void 0?void 0:_err$response4.status)===403||(_err$response5=err.response)!==null&&_err$response5!==void 0&&(_err$response5$data=_err$response5.data)!==null&&_err$response5$data!==void 0&&(_err$response5$data$e=_err$response5$data.error)!==null&&_err$response5$data$e!==void 0&&_err$response5$data$e.toLowerCase().includes('недійсний токен')||(_err$response6=err.response)!==null&&_err$response6!==void 0&&(_err$response6$data=_err$response6.data)!==null&&_err$response6$data!==void 0&&(_err$response6$data$e=_err$response6$data.error)!==null&&_err$response6$data$e!==void 0&&_err$response6$data$e.toLowerCase().includes('jwt expired')){console.log('Invalid or expired token, logging out');localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);}else{console.error('Unexpected error during token validation:',err);localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);}}};validateToken();}else{console.log('No user or token found in localStorage');setUser(null);}const handleStorageChange=()=>{console.log('handleStorageChange викликано');const updatedUser=localStorage.getItem('user');const updatedToken=localStorage.getItem('token');if(updatedUser&&updatedToken){setUser(JSON.parse(updatedUser));}else{setUser(null);}};window.addEventListener('storage',handleStorageChange);return()=>{console.log('Очищення useEffect для валідації токена');window.removeEventListener('storage',handleStorageChange);};},[]);// Handle clicks outside context menu and city popup\nuseEffect(()=>{console.log('useEffect для handleClickOutside викликано');const handleClickOutside=event=>{if(contextMenuRef.current&&!contextMenuRef.current.contains(event.target)){setShowContextMenu(false);}if(cityPopupRef.current&&!cityPopupRef.current.contains(event.target)&&!event.target.classList.contains('location-text')){setShowCityPopup(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>{console.log('Очищення useEffect для handleClickOutside');document.removeEventListener('mousedown',handleClickOutside);};},[]);const handleSearch=useCallback(()=>{console.log('handleSearch викликано з searchQuery:',searchQuery);if(searchQuery.trim()){setSearchTerm(searchQuery);navigate(`/search?query=${encodeURIComponent(searchQuery)}`);setShowResults(false);setIsLoading(false);setIsResultsUpdated(false);setIsInitialOpen(true);setShowText(false);}},[searchQuery,setSearchTerm,navigate]);const handleInputChange=async e=>{const query=e.target.value;setSearchQuery(query);if(query.trim()){setIsLoading(true);setIsResultsUpdated(false);try{const response=await axios.get('https://price-ua-react-backend.onrender.com/products',{params:{search:query}});setSearchResults(response.data.groupedResults||[]);setShowResults(true);setIsResultsUpdated(true);}catch(error){console.error('Помилка пошуку:',error);setSearchResults([]);setShowResults(false);setIsResultsUpdated(false);}finally{setIsLoading(false);}}else{setSearchResults([]);setShowResults(false);setIsLoading(false);setIsResultsUpdated(false);}};const handleKeyPress=e=>{if(e.key==='Enter'){handleSearch();}};const handleClearSearch=()=>{console.log('handleClearSearch викликано');setSearchQuery('');if(searchInputRef.current){console.log('Clearing input value');searchInputRef.current.value='';}else{console.warn('searchInputRef.current is null');}setSearchResults([]);setShowResults(false);setSearchTerm('');setIsLoading(false);setIsResultsUpdated(false);setIsInitialOpen(true);setShowText(false);};const handleCloseResults=()=>{setIsClosing(true);setTimeout(()=>{setShowResults(false);setIsClosing(false);setIsInitialOpen(true);setShowText(false);},200);};const handleLinkClick=path=>{console.log('handleLinkClick викликано з path:',path);setIsClosing(true);handleClearSearch();setTimeout(()=>{setIsClosing(false);handleCloseResults();navigate(path);},200);};const handleLogout=()=>{console.log('Logging out user');localStorage.removeItem('token');localStorage.removeItem('user');setUser(null);setShowContextMenu(false);navigate('/');};const toggleContextMenu=()=>{setShowContextMenu(!showContextMenu);};const toggleCityPopup=()=>{setShowCityPopup(!showCityPopup);setCitySearch('');};const handleCitySelect=useCallback(cityName=>{console.log('handleCitySelect викликано з cityName:',cityName);if(cityName===userLocation){console.log('Місто не змінилося, пропускаємо оновлення');setShowCityPopup(false);setCitySearch('');return;}if(cityName==='За розташуванням'){fetchGeolocation();}else{setUserLocation(cityName);localStorage.setItem('userLocationStatus',cityName);setShowCityPopup(false);setCitySearch('');}},[userLocation,fetchGeolocation]);const filteredCities=citySearch?cities.filter(city=>city.name_ua.toLowerCase().includes(citySearch.toLowerCase())):[...cities.filter(city=>topCities.slice(0,-1).includes(city.name_ua)),{id:'geolocation',name_ua:'За розташуванням'}].slice(0,10);useEffect(()=>{console.log('useEffect для showText викликано');if(isResultsUpdated&&!isLoading&&searchResults.length>0){setShowText(false);const timer=setTimeout(()=>{setShowText(true);},50);return()=>{console.log('Очищення useEffect для showText');clearTimeout(timer);};}else{setShowText(false);}},[isResultsUpdated,isLoading,searchResults]);useEffect(()=>{console.log('useEffect для searchInputRef викликано, searchInputRef.current:',searchInputRef.current);return()=>{console.log('Очищення useEffect для searchInputRef');setSearchResults([]);setShowResults(false);setIsLoading(false);setIsResultsUpdated(false);};},[]);return/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo\",children:\"CosmetickUA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-input-wrapper\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0442\\u043E\\u0432\\u0430\\u0440\\u0456\\u0432...\",value:searchQuery,onChange:handleInputChange,onKeyPress:handleKeyPress,className:\"search-input\",ref:searchInputRef}),searchQuery&&/*#__PURE__*/_jsxs(_Fragment,{children:[isLoading&&/*#__PURE__*/_jsxs(\"svg\",{className:\"loading-circle\",xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\",fill:\"none\",stroke:\"#555\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12 2a10 10 0 0 1 10 10\",fill:\"none\",stroke:\"#0288d1\",strokeWidth:\"4\",strokeLinecap:\"round\"})]}),/*#__PURE__*/_jsxs(\"svg\",{className:\"clear-icon\",onClick:handleClearSearch,xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"16\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#555\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"line\",{x1:\"18\",y1:\"6\",x2:\"6\",y2:\"18\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"6\",y1:\"6\",x2:\"18\",y2:\"18\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"search-button\",children:\"\\u0417\\u043D\\u0430\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"span\",{className:\"location-text\",onClick:toggleCityPopup,style:{cursor:'pointer'},children:userLocation}),showCityPopup&&/*#__PURE__*/_jsxs(\"div\",{className:`city-popup ${showCityPopup?'open':''}`,ref:cityPopupRef,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u043C\\u0456\\u0441\\u0442\\u0430...\",value:citySearch,onChange:e=>setCitySearch(e.target.value),className:\"city-search-input\"}),/*#__PURE__*/_jsx(\"div\",{className:\"city-list\",children:filteredCities.map(city=>/*#__PURE__*/_jsx(\"div\",{className:\"city-item\",onClick:()=>handleCitySelect(city.name_ua),children:city.name_ua},city.id))})]}),showResults&&searchResults.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:`search-results ${isInitialOpen?'initial-open':''} ${isClosing?'closing':''}`,ref:resultsRef,children:[searchResults.slice(0,2).map((category,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"search-category\",children:[/*#__PURE__*/_jsxs(\"span\",{className:`category-title ${showText&&!isLoading?'animate-text':''}`,onClick:()=>handleLinkClick(`/category/${category.category}`),style:{animationDelay:`${index*0.1}s`,cursor:'pointer'},children:[categoryNames[category.category]||category.category,\" (\",category.count,\")\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:category.products.slice(0,5).map((product,idx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"span\",{className:`product-link ${showText&&!isLoading?'animate-text':''}`,onClick:()=>handleLinkClick(`/product/${product.id}`),style:{animationDelay:`${index*0.1+idx*0.05+0.2}s`,cursor:'pointer'},children:`${product.name} (${product.specs.volume||'Н/Д'})`})},`${product.id}-${searchQuery}`))}),category.products.length>5&&/*#__PURE__*/_jsxs(\"button\",{className:`more-products ${showText&&!isLoading?'animate-text':''}`,onClick:()=>handleSearch(),style:{animationDelay:`${index*0.1+0.45}s`,cursor:'pointer'},children:[\"\\u041F\\u043E\\u0434\\u0438\\u0432\\u0438\\u0442\\u0438\\u0441\\u044C \\u0456\\u043D\\u0448\\u0456 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",category.products.length-5,\")\"]})]},`${category.category}-${searchQuery}`)),searchResults.length>0&&/*#__PURE__*/_jsxs(\"span\",{className:`view-all ${showText&&!isLoading?'animate-text':''}`,onClick:()=>handleLinkClick(`/search?query=${encodeURIComponent(searchQuery)}`),style:{animationDelay:'0.5s',cursor:'pointer'},children:[\"\\u041F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u043D\\u0443\\u0442\\u0438 \\u0443\\u0441\\u0456 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",searchResults.reduce((sum,cat)=>sum+cat.count,0),\")\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile\",children:user?/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[user.photo?/*#__PURE__*/_jsx(\"img\",{src:user.photo,alt:\"User Avatar\",className:\"header-avatar-img\"}):/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"7\",r:\"4\"})]}),/*#__PURE__*/_jsx(\"span\",{onClick:toggleContextMenu,className:\"nickname\",style:{cursor:'pointer'},children:user.nickname}),showContextMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"context-menu\",ref:contextMenuRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"context-menu-item\",onClick:()=>{navigate('/account');setShowContextMenu(false);},children:\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"div\",{className:\"context-menu-item\",onClick:()=>{navigate('/wishlist');setShowContextMenu(false);},children:\"\\u0411\\u0430\\u0436\\u0430\\u043D\\u0435\"}),user.is_admin&&/*#__PURE__*/_jsx(\"div\",{className:\"context-menu-item\",onClick:()=>{navigate('/admin');setShowContextMenu(false);},children:\"\\u0410\\u0434\\u043C\\u0456\\u043D\"}),/*#__PURE__*/_jsx(\"div\",{className:\"context-menu-item\",onClick:handleLogout,children:\"\\u0412\\u0438\\u0439\\u0442\\u0438\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"32\",height:\"32\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"white\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"7\",r:\"4\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-link\",children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"})]})})]})});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","categoryNames","shampoos","facecream","facemask","tonal","powder","blush","highlighter","concealer","lipstick","lipgloss","lipliner","eyeshadow","eyeliner","mascara","browpencil","browshadow","browgel","nailpolish","makeupremover","brushes","serum","scrub","cleanser","tonic","micellar","eyecream","lipbalm","antiaging","sunscreen","conditioner","hairmask","hairoil","hairserum","hairspray","hairdye","styling","dryshampoo","hairloss","Header","_ref","setSearchTerm","searchQuery","setSearchQuery","searchResults","setSearchResults","showResults","setShowResults","isLoading","setIsLoading","isResultsUpdated","setIsResultsUpdated","isInitialOpen","setIsInitialOpen","isClosing","setIsClosing","showText","setShowText","user","setUser","showContextMenu","setShowContextMenu","userLocation","setUserLocation","localStorage","getItem","showCityPopup","setShowCityPopup","cities","setCities","citySearch","setCitySearch","navigate","searchInputRef","resultsRef","contextMenuRef","cityPopupRef","console","log","topCities","fetchCities","response","get","data","length","error","fetchGeolocation","navigator","geolocation","setItem","position","Promise","resolve","reject","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","latitude","longitude","coords","address","location","city","town","village","prev","isMounted","locationStatus","storedUser","token","validateToken","headers","Authorization","JSON","parse","err","_err$response","_err$response2","_err$response3","_err$response4","_err$response5","_err$response5$data","_err$response5$data$e","_err$response6","_err$response6$data","_err$response6$data$e","status","message","toLowerCase","includes","removeItem","handleStorageChange","updatedUser","updatedToken","window","addEventListener","removeEventListener","handleClickOutside","event","current","contains","target","classList","document","handleSearch","trim","encodeURIComponent","handleInputChange","e","query","value","params","search","groupedResults","handleKeyPress","key","handleClearSearch","warn","handleCloseResults","setTimeout","handleLinkClick","path","handleLogout","toggleContextMenu","toggleCityPopup","handleCitySelect","cityName","filteredCities","filter","name_ua","slice","id","timer","clearTimeout","className","children","to","type","placeholder","onChange","onKeyPress","ref","xmlns","width","height","viewBox","cx","cy","r","fill","stroke","strokeWidth","d","strokeLinecap","onClick","strokeLinejoin","x1","y1","x2","y2","style","cursor","map","category","index","animationDelay","count","products","product","idx","name","specs","volume","reduce","sum","cat","photo","src","alt","nickname","is_admin"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Header.css';\r\n\r\nexport const categoryNames = {\r\n  shampoos: 'Шампуні',\r\n  facecream: 'Кремити для обличчя',\r\n  facemask: 'Маски для обличчя',\r\n  tonal: 'Тональльні засоби',\r\n  powder: 'удри',\r\n  blush: 'Рум’яна',\r\n  highlighter: 'Хайлайтери',\r\n  concealer: 'Консилери',\r\n  lipstick: 'Помади',\r\n  lipgloss: 'Блиски для губ',\r\n  lipliner: 'Олівці для губ',\r\n  eyeshadow: 'Тіні для повік',\r\n  eyeliner: 'Підводки',\r\n  mascara: 'Туші для вій',\r\n  browpencil: 'Олівці для брів',\r\n  browshadow: 'Тіні для брів',\r\n  browgel: 'Гелі для брів',\r\n  nailpolish: 'Лаки для нігтів',\r\n  makeupremover: 'Засоби для зняття макіяжу',\r\n  brushes: 'Пензлі для макіяжу',\r\n  serum: 'Сироватки',\r\n  scrub: 'Скраби',\r\n  cleanser: 'Очищувальні засоби',\r\n  tonic: 'Тоніки',\r\n  micellar: 'Міцелярна вода',\r\n  eyecream: 'Креми для очей',\r\n  lipbalm: 'Бальзами для губ',\r\n  antiaging: 'Антивікові засоби',\r\n  sunscreen: 'Сонцезахисні засоби',\r\n  conditioner: 'Кондиціонери',\r\n  hairmask: 'Маски для волосся',\r\n  hairoil: 'Олії для волосся',\r\n  hairserum: 'Сироватки для волосся',\r\n  hairspray: 'Лаки для волосся',\r\n  hairdye: 'Фарби для волосся',\r\n  styling: 'Засоби для укладки',\r\n  dryshampoo: 'Сухі шампуні',\r\n  hairloss: 'Засоби проти втрати волосся',\r\n};\r\n\r\nfunction Header({ setSearchTerm }) {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [showResults, setShowResults] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isResultsUpdated, setIsResultsUpdated] = useState(false);\r\n  const [isInitialOpen, setIsInitialOpen] = useState(true);\r\n  const [isClosing, setIsClosing] = useState(false);\r\n  const [showText, setShowText] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [showContextMenu, setShowContextMenu] = useState(false);\r\n  const [userLocation, setUserLocation] = useState(localStorage.getItem('userLocationStatus') || 'Виберіть місто');\r\n  const [showCityPopup, setShowCityPopup] = useState(false);\r\n  const [cities, setCities] = useState([]);\r\n  const [citySearch, setCitySearch] = useState('');\r\n  const navigate = useNavigate();\r\n  const searchInputRef = useRef(null);\r\n  const resultsRef = useRef(null);\r\n  const contextMenuRef = useRef(null);\r\n  const cityPopupRef = useRef(null);\r\n\r\n  // Логування рендерингу для дебагінгу\r\n  console.log('Рендеринг Header, стан:', { userLocation, showCityPopup, user });\r\n\r\n  // Top 10 largest Ukrainian cities, with last one as \"За розташуванням\"\r\n  const topCities = [\r\n    'Київ', 'Харків', 'Одеса', 'Дніпро', 'Херсон',\r\n    'Запоріжжя', 'Львів', 'Кривий Ріг', 'Миколаїв', 'За розташуванням'\r\n  ];\r\n\r\n  // Fetch cities from backend\r\n  useEffect(() => {\r\n    console.log('useEffect для fetchCities викликано');\r\n    const fetchCities = async () => {\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/cities');\r\n        console.log('Cities fetched:', response.data.length);\r\n        setCities(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching cities:', error);\r\n      }\r\n    };\r\n    fetchCities();\r\n  }, []);\r\n\r\n  // Handle geolocation request (used for initial prompt and \"За розташуванням\")\r\n  const fetchGeolocation = useCallback(async () => {\r\n    console.log('fetchGeolocation викликано');\r\n    if (!navigator.geolocation) {\r\n      console.log('Geolocation is not supported by this browser.');\r\n      localStorage.setItem('userLocationStatus', 'denied');\r\n      setUserLocation('Виберіть місто');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const position = await new Promise((resolve, reject) => {\r\n        navigator.geolocation.getCurrentPosition(resolve, reject, {\r\n          enableHighAccuracy: true,\r\n          timeout: 10000,\r\n          maximumAge: 0,\r\n        });\r\n      });\r\n\r\n      const { latitude, longitude } = position.coords;\r\n      console.log('Geolocation retrieved:', { latitude, longitude });\r\n\r\n      const response = await axios.get(\r\n        `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`\r\n      );\r\n      const address = response.data.address;\r\n      const location = address.city || address.town || address.village || 'Невідоме місце';\r\n      console.log('Reverse geocoding result:', location);\r\n      setUserLocation(prev => {\r\n        if (prev === location) {\r\n          console.log('Місце не змінилося, пропускаємо оновлення');\r\n          return prev;\r\n        }\r\n        console.log('Оновлення userLocation:', location);\r\n        localStorage.setItem('userLocationStatus', location);\r\n        return location;\r\n      });\r\n      setShowCityPopup(false);\r\n    } catch (error) {\r\n      console.error('Error fetching location:', error);\r\n      localStorage.setItem('userLocationStatus', 'denied');\r\n      setUserLocation('Виберіть місто');\r\n      setShowCityPopup(false);\r\n    }\r\n  }, []);\r\n\r\n  // Handle initial geolocation prompt on first visit\r\n  useEffect(() => {\r\n    console.log('useEffect для ініціалізації геолокації викликано');\r\n    let isMounted = true;\r\n    const locationStatus = localStorage.getItem('userLocationStatus');\r\n    if (locationStatus) {\r\n      console.log('Location status from localStorage:', locationStatus);\r\n      if (locationStatus !== 'denied' && isMounted) {\r\n        setUserLocation(locationStatus);\r\n      } else if (isMounted) {\r\n        setUserLocation('Виберіть місто');\r\n      }\r\n      return;\r\n    }\r\n\r\n    fetchGeolocation();\r\n\r\n    return () => {\r\n      console.log('Очищення useEffect для ініціалізації геолокації');\r\n      isMounted = false;\r\n    };\r\n  }, [fetchGeolocation]);\r\n\r\n  // Load user from localStorage and validate token\r\n  useEffect(() => {\r\n    console.log('useEffect для валідації токена викликано');\r\n    const storedUser = localStorage.getItem('user');\r\n    const token = localStorage.getItem('token');\r\n\r\n    if (storedUser && token) {\r\n      const validateToken = async () => {\r\n        try {\r\n          console.log('Validating token in Header');\r\n          const response = await axios.get('https://price-ua-react-backend.onrender.com/profile', {\r\n            headers: { Authorization: `Bearer ${token}` },\r\n          });\r\n          console.log('Token valid, user data:', response.data);\r\n          setUser(JSON.parse(storedUser));\r\n        } catch (err) {\r\n          console.error('Token validation failed in Header:', {\r\n            status: err.response?.status,\r\n            data: err.response?.data,\r\n            message: err.message,\r\n          });\r\n          if (\r\n            err.response?.status === 401 ||\r\n            err.response?.status === 403 ||\r\n            err.response?.data?.error?.toLowerCase().includes('недійсний токен') ||\r\n            err.response?.data?.error?.toLowerCase().includes('jwt expired')\r\n          ) {\r\n            console.log('Invalid or expired token, logging out');\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user');\r\n            setUser(null);\r\n          } else {\r\n            console.error('Unexpected error during token validation:', err);\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user');\r\n            setUser(null);\r\n          }\r\n        }\r\n      };\r\n      validateToken();\r\n    } else {\r\n      console.log('No user or token found in localStorage');\r\n      setUser(null);\r\n    }\r\n\r\n    const handleStorageChange = () => {\r\n      console.log('handleStorageChange викликано');\r\n      const updatedUser = localStorage.getItem('user');\r\n      const updatedToken = localStorage.getItem('token');\r\n      if (updatedUser && updatedToken) {\r\n        setUser(JSON.parse(updatedUser));\r\n      } else {\r\n        setUser(null);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n    return () => {\r\n      console.log('Очищення useEffect для валідації токена');\r\n      window.removeEventListener('storage', handleStorageChange);\r\n    };\r\n  }, []);\r\n\r\n  // Handle clicks outside context menu and city popup\r\n  useEffect(() => {\r\n    console.log('useEffect для handleClickOutside викликано');\r\n    const handleClickOutside = (event) => {\r\n      if (contextMenuRef.current && !contextMenuRef.current.contains(event.target)) {\r\n        setShowContextMenu(false);\r\n      }\r\n      if (cityPopupRef.current && !cityPopupRef.current.contains(event.target) && !event.target.classList.contains('location-text')) {\r\n        setShowCityPopup(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => {\r\n      console.log('Очищення useEffect для handleClickOutside');\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  const handleSearch = useCallback(() => {\r\n    console.log('handleSearch викликано з searchQuery:', searchQuery);\r\n    if (searchQuery.trim()) {\r\n      setSearchTerm(searchQuery);\r\n      navigate(`/search?query=${encodeURIComponent(searchQuery)}`);\r\n      setShowResults(false);\r\n      setIsLoading(false);\r\n      setIsResultsUpdated(false);\r\n      setIsInitialOpen(true);\r\n      setShowText(false);\r\n    }\r\n  }, [searchQuery, setSearchTerm, navigate]);\r\n\r\n  const handleInputChange = async (e) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n\r\n    if (query.trim()) {\r\n      setIsLoading(true);\r\n      setIsResultsUpdated(false);\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n          params: { search: query },\r\n        });\r\n        setSearchResults(response.data.groupedResults || []);\r\n        setShowResults(true);\r\n        setIsResultsUpdated(true);\r\n      } catch (error) {\r\n        console.error('Помилка пошуку:', error);\r\n        setSearchResults([]);\r\n        setShowResults(false);\r\n        setIsResultsUpdated(false);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      setSearchResults([]);\r\n      setShowResults(false);\r\n      setIsLoading(false);\r\n      setIsResultsUpdated(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSearch();\r\n    }\r\n  };\r\n\r\n  const handleClearSearch = () => {\r\n    console.log('handleClearSearch викликано');\r\n    setSearchQuery('');\r\n    if (searchInputRef.current) {\r\n      console.log('Clearing input value');\r\n      searchInputRef.current.value = '';\r\n    } else {\r\n      console.warn('searchInputRef.current is null');\r\n    }\r\n    setSearchResults([]);\r\n    setShowResults(false);\r\n    setSearchTerm('');\r\n    setIsLoading(false);\r\n    setIsResultsUpdated(false);\r\n    setIsInitialOpen(true);\r\n    setShowText(false);\r\n  };\r\n\r\n  const handleCloseResults = () => {\r\n    setIsClosing(true);\r\n    setTimeout(() => {\r\n      setShowResults(false);\r\n      setIsClosing(false);\r\n      setIsInitialOpen(true);\r\n      setShowText(false);\r\n    }, 200);\r\n  };\r\n\r\n  const handleLinkClick = (path) => {\r\n    console.log('handleLinkClick викликано з path:', path);\r\n    setIsClosing(true);\r\n    handleClearSearch();\r\n    setTimeout(() => {\r\n      setIsClosing(false);\r\n      handleCloseResults();\r\n      navigate(path);\r\n    }, 200);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    console.log('Logging out user');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n    setShowContextMenu(false);\r\n    navigate('/');\r\n  };\r\n\r\n  const toggleContextMenu = () => {\r\n    setShowContextMenu(!showContextMenu);\r\n  };\r\n\r\n  const toggleCityPopup = () => {\r\n    setShowCityPopup(!showCityPopup);\r\n    setCitySearch('');\r\n  };\r\n\r\n  const handleCitySelect = useCallback((cityName) => {\r\n    console.log('handleCitySelect викликано з cityName:', cityName);\r\n    if (cityName === userLocation) {\r\n      console.log('Місто не змінилося, пропускаємо оновлення');\r\n      setShowCityPopup(false);\r\n      setCitySearch('');\r\n      return;\r\n    }\r\n    if (cityName === 'За розташуванням') {\r\n      fetchGeolocation();\r\n    } else {\r\n      setUserLocation(cityName);\r\n      localStorage.setItem('userLocationStatus', cityName);\r\n      setShowCityPopup(false);\r\n      setCitySearch('');\r\n    }\r\n  }, [userLocation, fetchGeolocation]);\r\n\r\n  const filteredCities = citySearch\r\n    ? cities.filter(city =>\r\n        city.name_ua.toLowerCase().includes(citySearch.toLowerCase())\r\n      )\r\n    : [\r\n        ...cities.filter(city => topCities.slice(0, -1).includes(city.name_ua)),\r\n        { id: 'geolocation', name_ua: 'За розташуванням' }\r\n      ].slice(0, 10);\r\n\r\n  useEffect(() => {\r\n    console.log('useEffect для showText викликано');\r\n    if (isResultsUpdated && !isLoading && searchResults.length > 0) {\r\n      setShowText(false);\r\n      const timer = setTimeout(() => {\r\n        setShowText(true);\r\n      }, 50);\r\n      return () => {\r\n        console.log('Очищення useEffect для showText');\r\n        clearTimeout(timer);\r\n      };\r\n    } else {\r\n      setShowText(false);\r\n    }\r\n  }, [isResultsUpdated, isLoading, searchResults]);\r\n\r\n  useEffect(() => {\r\n    console.log('useEffect для searchInputRef викликано, searchInputRef.current:', searchInputRef.current);\r\n    return () => {\r\n      console.log('Очищення useEffect для searchInputRef');\r\n      setSearchResults([]);\r\n      setShowResults(false);\r\n      setIsLoading(false);\r\n      setIsResultsUpdated(false);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"header-container\">\r\n        <Link to=\"/\" className=\"logo\">\r\n          CosmetickUA\r\n        </Link>\r\n        <div className=\"search-container\">\r\n          <div className=\"search-input-wrapper\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Пошук товарів...\"\r\n              value={searchQuery}\r\n              onChange={handleInputChange}\r\n              onKeyPress={handleKeyPress}\r\n              className=\"search-input\"\r\n              ref={searchInputRef}\r\n            />\r\n            {searchQuery && (\r\n              <>\r\n                {isLoading && (\r\n                  <svg\r\n                    className=\"loading-circle\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"16\"\r\n                    height=\"16\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" fill=\"none\" stroke=\"#555\" strokeWidth=\"4\" />\r\n                    <path\r\n                      d=\"M12 2a10 10 0 0 1 10 10\"\r\n                      fill=\"none\"\r\n                      stroke=\"#0288d1\"\r\n                      strokeWidth=\"4\"\r\n                      strokeLinecap=\"round\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n                <svg\r\n                  className=\"clear-icon\"\r\n                  onClick={handleClearSearch}\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"16\"\r\n                  height=\"16\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"#555\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                >\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\r\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\r\n                </svg>\r\n              </>\r\n            )}\r\n          </div>\r\n          <button onClick={handleSearch} className=\"search-button\">\r\n            Знайти\r\n          </button>\r\n          <span className=\"location-text\" onClick={toggleCityPopup} style={{ cursor: 'pointer' }}>\r\n            {userLocation}\r\n          </span>\r\n          {showCityPopup && (\r\n            <div className={`city-popup ${showCityPopup ? 'open' : ''}`} ref={cityPopupRef}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Пошук міста...\"\r\n                value={citySearch}\r\n                onChange={(e) => setCitySearch(e.target.value)}\r\n                className=\"city-search-input\"\r\n              />\r\n              <div className=\"city-list\">\r\n                {filteredCities.map((city) => (\r\n                  <div\r\n                    key={city.id}\r\n                    className=\"city-item\"\r\n                    onClick={() => handleCitySelect(city.name_ua)}\r\n                  >\r\n                    {city.name_ua}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {showResults && searchResults.length > 0 && (\r\n            <div\r\n              className={`search-results ${isInitialOpen ? 'initial-open' : ''} ${isClosing ? 'closing' : ''}`}\r\n              ref={resultsRef}\r\n            >\r\n              {searchResults.slice(0, 2).map((category, index) => (\r\n                <div key={`${category.category}-${searchQuery}`} className=\"search-category\">\r\n                  <span\r\n                    className={`category-title ${showText && !isLoading ? 'animate-text' : ''}`}\r\n                    onClick={() => handleLinkClick(`/category/${category.category}`)}\r\n                    style={{ animationDelay: `${index * 0.1}s`, cursor: 'pointer' }}\r\n                  >\r\n                    {categoryNames[category.category] || category.category} ({category.count})\r\n                  </span>\r\n                  <ul className=\"product-list\">\r\n                    {category.products.slice(0, 5).map((product, idx) => (\r\n                      <li key={`${product.id}-${searchQuery}`}>\r\n                        <span\r\n                          className={`product-link ${showText && !isLoading ? 'animate-text' : ''}`}\r\n                          onClick={() => handleLinkClick(`/product/${product.id}`)}\r\n                          style={{ animationDelay: `${index * 0.1 + idx * 0.05 + 0.2}s`, cursor: 'pointer' }}\r\n                        >\r\n                          {`${product.name} (${product.specs.volume || 'Н/Д'})`}\r\n                        </span>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                  {category.products.length > 5 && (\r\n                    <button\r\n                      className={`more-products ${showText && !isLoading ? 'animate-text' : ''}`}\r\n                      onClick={() => handleSearch()}\r\n                      style={{ animationDelay: `${index * 0.1 + 0.45}s`, cursor: 'pointer' }}\r\n                    >\r\n                      Подивитись інші товари ({category.products.length - 5})\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              ))}\r\n              {searchResults.length > 0 && (\r\n                <span\r\n                  className={`view-all ${showText && !isLoading ? 'animate-text' : ''}`}\r\n                  onClick={() => handleLinkClick(`/search?query=${encodeURIComponent(searchQuery)}`)}\r\n                  style={{ animationDelay: '0.5s', cursor: 'pointer' }}\r\n                >\r\n                  Переглянути усі товари ({searchResults.reduce((sum, cat) => sum + cat.count, 0)})\r\n                </span>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"profile\">\r\n          {user ? (\r\n            <div className=\"user-profile\">\r\n              {user.photo ? (\r\n                <img src={user.photo} alt=\"User Avatar\" className=\"header-avatar-img\" />\r\n              ) : (\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  width=\"32\"\r\n                  height=\"32\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"white\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                >\r\n                  <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n                  <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n                </svg>\r\n              )}\r\n              <span onClick={toggleContextMenu} className=\"nickname\" style={{ cursor: 'pointer' }}>\r\n                {user.nickname}\r\n              </span>\r\n              {showContextMenu && (\r\n                <div className=\"context-menu\" ref={contextMenuRef}>\r\n                  <div\r\n                    className=\"context-menu-item\"\r\n                    onClick={() => {\r\n                      navigate('/account');\r\n                      setShowContextMenu(false);\r\n                    }}\r\n                  >\r\n                    Аккаунт\r\n                  </div>\r\n                  <div\r\n                    className=\"context-menu-item\"\r\n                    onClick={() => {\r\n                      navigate('/wishlist');\r\n                      setShowContextMenu(false);\r\n                    }}\r\n                  >\r\n                    Бажане\r\n                  </div>\r\n                  {user.is_admin && (\r\n                    <div\r\n                      className=\"context-menu-item\"\r\n                      onClick={() => {\r\n                        navigate('/admin');\r\n                        setShowContextMenu(false);\r\n                      }}\r\n                    >\r\n                      Адмін\r\n                    </div>\r\n                  )}\r\n                  <div className=\"context-menu-item\" onClick={handleLogout}>\r\n                    Вийти\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"32\"\r\n                height=\"32\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"white\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              >\r\n                <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\r\n                <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\r\n              </svg>\r\n              <Link to=\"/login\" className=\"login-link\">\r\n                Увійти\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,MAAM,KAAQ,OAAO,CACvE,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEtB,MAAO,MAAM,CAAAC,aAAa,CAAG,CAC3BC,QAAQ,CAAE,SAAS,CACnBC,SAAS,CAAE,qBAAqB,CAChCC,QAAQ,CAAE,mBAAmB,CAC7BC,KAAK,CAAE,mBAAmB,CAC1BC,MAAM,CAAE,MAAM,CACdC,KAAK,CAAE,SAAS,CAChBC,WAAW,CAAE,YAAY,CACzBC,SAAS,CAAE,WAAW,CACtBC,QAAQ,CAAE,QAAQ,CAClBC,QAAQ,CAAE,gBAAgB,CAC1BC,QAAQ,CAAE,gBAAgB,CAC1BC,SAAS,CAAE,gBAAgB,CAC3BC,QAAQ,CAAE,UAAU,CACpBC,OAAO,CAAE,cAAc,CACvBC,UAAU,CAAE,iBAAiB,CAC7BC,UAAU,CAAE,eAAe,CAC3BC,OAAO,CAAE,eAAe,CACxBC,UAAU,CAAE,iBAAiB,CAC7BC,aAAa,CAAE,2BAA2B,CAC1CC,OAAO,CAAE,oBAAoB,CAC7BC,KAAK,CAAE,WAAW,CAClBC,KAAK,CAAE,QAAQ,CACfC,QAAQ,CAAE,oBAAoB,CAC9BC,KAAK,CAAE,QAAQ,CACfC,QAAQ,CAAE,gBAAgB,CAC1BC,QAAQ,CAAE,gBAAgB,CAC1BC,OAAO,CAAE,kBAAkB,CAC3BC,SAAS,CAAE,mBAAmB,CAC9BC,SAAS,CAAE,qBAAqB,CAChCC,WAAW,CAAE,cAAc,CAC3BC,QAAQ,CAAE,mBAAmB,CAC7BC,OAAO,CAAE,kBAAkB,CAC3BC,SAAS,CAAE,uBAAuB,CAClCC,SAAS,CAAE,kBAAkB,CAC7BC,OAAO,CAAE,mBAAmB,CAC5BC,OAAO,CAAE,oBAAoB,CAC7BC,UAAU,CAAE,cAAc,CAC1BC,QAAQ,CAAE,6BACZ,CAAC,CAED,QAAS,CAAAC,MAAMA,CAAAC,IAAA,CAAoB,IAAnB,CAAEC,aAAc,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGxD,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACyD,aAAa,CAAEC,gBAAgB,CAAC,CAAG1D,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC2D,WAAW,CAAEC,cAAc,CAAC,CAAG5D,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAC6D,SAAS,CAAEC,YAAY,CAAC,CAAG9D,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAC+D,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhE,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACiE,aAAa,CAAEC,gBAAgB,CAAC,CAAGlE,QAAQ,CAAC,IAAI,CAAC,CACxD,KAAM,CAACmE,SAAS,CAAEC,YAAY,CAAC,CAAGpE,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACqE,QAAQ,CAAEC,WAAW,CAAC,CAAGtE,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAACuE,IAAI,CAAEC,OAAO,CAAC,CAAGxE,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACyE,eAAe,CAAEC,kBAAkB,CAAC,CAAG1E,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAAC2E,YAAY,CAAEC,eAAe,CAAC,CAAG5E,QAAQ,CAAC6E,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,EAAI,gBAAgB,CAAC,CAChH,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGhF,QAAQ,CAAC,KAAK,CAAC,CACzD,KAAM,CAACiF,MAAM,CAAEC,SAAS,CAAC,CAAGlF,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACmF,UAAU,CAAEC,aAAa,CAAC,CAAGpF,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAAAqF,QAAQ,CAAGhF,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAiF,cAAc,CAAGnF,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAoF,UAAU,CAAGpF,MAAM,CAAC,IAAI,CAAC,CAC/B,KAAM,CAAAqF,cAAc,CAAGrF,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAsF,YAAY,CAAGtF,MAAM,CAAC,IAAI,CAAC,CAEjC;AACAuF,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAE,CAAEhB,YAAY,CAAEI,aAAa,CAAER,IAAK,CAAC,CAAC,CAE7E;AACA,KAAM,CAAAqB,SAAS,CAAG,CAChB,MAAM,CAAE,QAAQ,CAAE,OAAO,CAAE,QAAQ,CAAE,QAAQ,CAC7C,WAAW,CAAE,OAAO,CAAE,YAAY,CAAE,UAAU,CAAE,kBAAkB,CACnE,CAED;AACA3F,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAClD,KAAM,CAAAE,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAxF,KAAK,CAACyF,GAAG,CAAC,oDAAoD,CAAC,CACtFL,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEG,QAAQ,CAACE,IAAI,CAACC,MAAM,CAAC,CACpDf,SAAS,CAACY,QAAQ,CAACE,IAAI,CAAC,CAC1B,CAAE,MAAOE,KAAK,CAAE,CACdR,OAAO,CAACQ,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CACF,CAAC,CACDL,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,KAAM,CAAAM,gBAAgB,CAAGjG,WAAW,CAAC,SAAY,CAC/CwF,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzC,GAAI,CAACS,SAAS,CAACC,WAAW,CAAE,CAC1BX,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC,CAC5Dd,YAAY,CAACyB,OAAO,CAAC,oBAAoB,CAAE,QAAQ,CAAC,CACpD1B,eAAe,CAAC,gBAAgB,CAAC,CACjC,OACF,CAEA,GAAI,CACF,KAAM,CAAA2B,QAAQ,CAAG,KAAM,IAAI,CAAAC,OAAO,CAAC,CAACC,OAAO,CAAEC,MAAM,GAAK,CACtDN,SAAS,CAACC,WAAW,CAACM,kBAAkB,CAACF,OAAO,CAAEC,MAAM,CAAE,CACxDE,kBAAkB,CAAE,IAAI,CACxBC,OAAO,CAAE,KAAK,CACdC,UAAU,CAAE,CACd,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,KAAM,CAAEC,QAAQ,CAAEC,SAAU,CAAC,CAAGT,QAAQ,CAACU,MAAM,CAC/CvB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAE,CAAEoB,QAAQ,CAAEC,SAAU,CAAC,CAAC,CAE9D,KAAM,CAAAlB,QAAQ,CAAG,KAAM,CAAAxF,KAAK,CAACyF,GAAG,CAC9B,iEAAiEgB,QAAQ,QAAQC,SAAS,EAC5F,CAAC,CACD,KAAM,CAAAE,OAAO,CAAGpB,QAAQ,CAACE,IAAI,CAACkB,OAAO,CACrC,KAAM,CAAAC,QAAQ,CAAGD,OAAO,CAACE,IAAI,EAAIF,OAAO,CAACG,IAAI,EAAIH,OAAO,CAACI,OAAO,EAAI,gBAAgB,CACpF5B,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEwB,QAAQ,CAAC,CAClDvC,eAAe,CAAC2C,IAAI,EAAI,CACtB,GAAIA,IAAI,GAAKJ,QAAQ,CAAE,CACrBzB,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxD,MAAO,CAAA4B,IAAI,CACb,CACA7B,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEwB,QAAQ,CAAC,CAChDtC,YAAY,CAACyB,OAAO,CAAC,oBAAoB,CAAEa,QAAQ,CAAC,CACpD,MAAO,CAAAA,QAAQ,CACjB,CAAC,CAAC,CACFnC,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAE,MAAOkB,KAAK,CAAE,CACdR,OAAO,CAACQ,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChDrB,YAAY,CAACyB,OAAO,CAAC,oBAAoB,CAAE,QAAQ,CAAC,CACpD1B,eAAe,CAAC,gBAAgB,CAAC,CACjCI,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN;AACA/E,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC,CAC/D,GAAI,CAAA6B,SAAS,CAAG,IAAI,CACpB,KAAM,CAAAC,cAAc,CAAG5C,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CACjE,GAAI2C,cAAc,CAAE,CAClB/B,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAE8B,cAAc,CAAC,CACjE,GAAIA,cAAc,GAAK,QAAQ,EAAID,SAAS,CAAE,CAC5C5C,eAAe,CAAC6C,cAAc,CAAC,CACjC,CAAC,IAAM,IAAID,SAAS,CAAE,CACpB5C,eAAe,CAAC,gBAAgB,CAAC,CACnC,CACA,OACF,CAEAuB,gBAAgB,CAAC,CAAC,CAElB,MAAO,IAAM,CACXT,OAAO,CAACC,GAAG,CAAC,iDAAiD,CAAC,CAC9D6B,SAAS,CAAG,KAAK,CACnB,CAAC,CACH,CAAC,CAAE,CAACrB,gBAAgB,CAAC,CAAC,CAEtB;AACAlG,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC,CACvD,KAAM,CAAA+B,UAAU,CAAG7C,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,KAAM,CAAA6C,KAAK,CAAG9C,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAI4C,UAAU,EAAIC,KAAK,CAAE,CACvB,KAAM,CAAAC,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACFlC,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC,CACzC,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAxF,KAAK,CAACyF,GAAG,CAAC,qDAAqD,CAAE,CACtF8B,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAUH,KAAK,EAAG,CAC9C,CAAC,CAAC,CACFjC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAEG,QAAQ,CAACE,IAAI,CAAC,CACrDxB,OAAO,CAACuD,IAAI,CAACC,KAAK,CAACN,UAAU,CAAC,CAAC,CACjC,CAAE,MAAOO,GAAG,CAAE,KAAAC,aAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,cAAA,CAAAC,mBAAA,CAAAC,qBAAA,CAAAC,cAAA,CAAAC,mBAAA,CAAAC,qBAAA,CACZjD,OAAO,CAACQ,KAAK,CAAC,oCAAoC,CAAE,CAClD0C,MAAM,EAAAV,aAAA,CAAED,GAAG,CAACnC,QAAQ,UAAAoC,aAAA,iBAAZA,aAAA,CAAcU,MAAM,CAC5B5C,IAAI,EAAAmC,cAAA,CAAEF,GAAG,CAACnC,QAAQ,UAAAqC,cAAA,iBAAZA,cAAA,CAAcnC,IAAI,CACxB6C,OAAO,CAAEZ,GAAG,CAACY,OACf,CAAC,CAAC,CACF,GACE,EAAAT,cAAA,CAAAH,GAAG,CAACnC,QAAQ,UAAAsC,cAAA,iBAAZA,cAAA,CAAcQ,MAAM,IAAK,GAAG,EAC5B,EAAAP,cAAA,CAAAJ,GAAG,CAACnC,QAAQ,UAAAuC,cAAA,iBAAZA,cAAA,CAAcO,MAAM,IAAK,GAAG,GAAAN,cAAA,CAC5BL,GAAG,CAACnC,QAAQ,UAAAwC,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAActC,IAAI,UAAAuC,mBAAA,YAAAC,qBAAA,CAAlBD,mBAAA,CAAoBrC,KAAK,UAAAsC,qBAAA,WAAzBA,qBAAA,CAA2BM,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CAAC,GAAAN,cAAA,CACpER,GAAG,CAACnC,QAAQ,UAAA2C,cAAA,YAAAC,mBAAA,CAAZD,cAAA,CAAczC,IAAI,UAAA0C,mBAAA,YAAAC,qBAAA,CAAlBD,mBAAA,CAAoBxC,KAAK,UAAAyC,qBAAA,WAAzBA,qBAAA,CAA2BG,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,aAAa,CAAC,CAChE,CACArD,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CACpDd,YAAY,CAACmE,UAAU,CAAC,OAAO,CAAC,CAChCnE,YAAY,CAACmE,UAAU,CAAC,MAAM,CAAC,CAC/BxE,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,IAAM,CACLkB,OAAO,CAACQ,KAAK,CAAC,2CAA2C,CAAE+B,GAAG,CAAC,CAC/DpD,YAAY,CAACmE,UAAU,CAAC,OAAO,CAAC,CAChCnE,YAAY,CAACmE,UAAU,CAAC,MAAM,CAAC,CAC/BxE,OAAO,CAAC,IAAI,CAAC,CACf,CACF,CACF,CAAC,CACDoD,aAAa,CAAC,CAAC,CACjB,CAAC,IAAM,CACLlC,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACrDnB,OAAO,CAAC,IAAI,CAAC,CACf,CAEA,KAAM,CAAAyE,mBAAmB,CAAGA,CAAA,GAAM,CAChCvD,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C,KAAM,CAAAuD,WAAW,CAAGrE,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAChD,KAAM,CAAAqE,YAAY,CAAGtE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAClD,GAAIoE,WAAW,EAAIC,YAAY,CAAE,CAC/B3E,OAAO,CAACuD,IAAI,CAACC,KAAK,CAACkB,WAAW,CAAC,CAAC,CAClC,CAAC,IAAM,CACL1E,OAAO,CAAC,IAAI,CAAC,CACf,CACF,CAAC,CAED4E,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAEJ,mBAAmB,CAAC,CACvD,MAAO,IAAM,CACXvD,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC,CACtDyD,MAAM,CAACE,mBAAmB,CAAC,SAAS,CAAEL,mBAAmB,CAAC,CAC5D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN;AACAhJ,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CACzD,KAAM,CAAA4D,kBAAkB,CAAIC,KAAK,EAAK,CACpC,GAAIhE,cAAc,CAACiE,OAAO,EAAI,CAACjE,cAAc,CAACiE,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAC5EjF,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACA,GAAIe,YAAY,CAACgE,OAAO,EAAI,CAAChE,YAAY,CAACgE,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAI,CAACH,KAAK,CAACG,MAAM,CAACC,SAAS,CAACF,QAAQ,CAAC,eAAe,CAAC,CAAE,CAC7H1E,gBAAgB,CAAC,KAAK,CAAC,CACzB,CACF,CAAC,CACD6E,QAAQ,CAACR,gBAAgB,CAAC,WAAW,CAAEE,kBAAkB,CAAC,CAC1D,MAAO,IAAM,CACX7D,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxDkE,QAAQ,CAACP,mBAAmB,CAAC,WAAW,CAAEC,kBAAkB,CAAC,CAC/D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAO,YAAY,CAAG5J,WAAW,CAAC,IAAM,CACrCwF,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAEpC,WAAW,CAAC,CACjE,GAAIA,WAAW,CAACwG,IAAI,CAAC,CAAC,CAAE,CACtBzG,aAAa,CAACC,WAAW,CAAC,CAC1B8B,QAAQ,CAAC,iBAAiB2E,kBAAkB,CAACzG,WAAW,CAAC,EAAE,CAAC,CAC5DK,cAAc,CAAC,KAAK,CAAC,CACrBE,YAAY,CAAC,KAAK,CAAC,CACnBE,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,gBAAgB,CAAC,IAAI,CAAC,CACtBI,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAAE,CAACf,WAAW,CAAED,aAAa,CAAE+B,QAAQ,CAAC,CAAC,CAE1C,KAAM,CAAA4E,iBAAiB,CAAG,KAAO,CAAAC,CAAC,EAAK,CACrC,KAAM,CAAAC,KAAK,CAAGD,CAAC,CAACP,MAAM,CAACS,KAAK,CAC5B5G,cAAc,CAAC2G,KAAK,CAAC,CAErB,GAAIA,KAAK,CAACJ,IAAI,CAAC,CAAC,CAAE,CAChBjG,YAAY,CAAC,IAAI,CAAC,CAClBE,mBAAmB,CAAC,KAAK,CAAC,CAC1B,GAAI,CACF,KAAM,CAAA8B,QAAQ,CAAG,KAAM,CAAAxF,KAAK,CAACyF,GAAG,CAAC,sDAAsD,CAAE,CACvFsE,MAAM,CAAE,CAAEC,MAAM,CAAEH,KAAM,CAC1B,CAAC,CAAC,CACFzG,gBAAgB,CAACoC,QAAQ,CAACE,IAAI,CAACuE,cAAc,EAAI,EAAE,CAAC,CACpD3G,cAAc,CAAC,IAAI,CAAC,CACpBI,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAE,MAAOkC,KAAK,CAAE,CACdR,OAAO,CAACQ,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CACvCxC,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrBI,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAC,OAAS,CACRF,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,IAAM,CACLJ,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrBE,YAAY,CAAC,KAAK,CAAC,CACnBE,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CAED,KAAM,CAAAwG,cAAc,CAAIN,CAAC,EAAK,CAC5B,GAAIA,CAAC,CAACO,GAAG,GAAK,OAAO,CAAE,CACrBX,YAAY,CAAC,CAAC,CAChB,CACF,CAAC,CAED,KAAM,CAAAY,iBAAiB,CAAGA,CAAA,GAAM,CAC9BhF,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC,CAC1CnC,cAAc,CAAC,EAAE,CAAC,CAClB,GAAI8B,cAAc,CAACmE,OAAO,CAAE,CAC1B/D,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CACnCL,cAAc,CAACmE,OAAO,CAACW,KAAK,CAAG,EAAE,CACnC,CAAC,IAAM,CACL1E,OAAO,CAACiF,IAAI,CAAC,gCAAgC,CAAC,CAChD,CACAjH,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrBN,aAAa,CAAC,EAAE,CAAC,CACjBQ,YAAY,CAAC,KAAK,CAAC,CACnBE,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,gBAAgB,CAAC,IAAI,CAAC,CACtBI,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAED,KAAM,CAAAsG,kBAAkB,CAAGA,CAAA,GAAM,CAC/BxG,YAAY,CAAC,IAAI,CAAC,CAClByG,UAAU,CAAC,IAAM,CACfjH,cAAc,CAAC,KAAK,CAAC,CACrBQ,YAAY,CAAC,KAAK,CAAC,CACnBF,gBAAgB,CAAC,IAAI,CAAC,CACtBI,WAAW,CAAC,KAAK,CAAC,CACpB,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAED,KAAM,CAAAwG,eAAe,CAAIC,IAAI,EAAK,CAChCrF,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAEoF,IAAI,CAAC,CACtD3G,YAAY,CAAC,IAAI,CAAC,CAClBsG,iBAAiB,CAAC,CAAC,CACnBG,UAAU,CAAC,IAAM,CACfzG,YAAY,CAAC,KAAK,CAAC,CACnBwG,kBAAkB,CAAC,CAAC,CACpBvF,QAAQ,CAAC0F,IAAI,CAAC,CAChB,CAAC,CAAE,GAAG,CAAC,CACT,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBtF,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC,CAC/Bd,YAAY,CAACmE,UAAU,CAAC,OAAO,CAAC,CAChCnE,YAAY,CAACmE,UAAU,CAAC,MAAM,CAAC,CAC/BxE,OAAO,CAAC,IAAI,CAAC,CACbE,kBAAkB,CAAC,KAAK,CAAC,CACzBW,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,KAAM,CAAA4F,iBAAiB,CAAGA,CAAA,GAAM,CAC9BvG,kBAAkB,CAAC,CAACD,eAAe,CAAC,CACtC,CAAC,CAED,KAAM,CAAAyG,eAAe,CAAGA,CAAA,GAAM,CAC5BlG,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAChCK,aAAa,CAAC,EAAE,CAAC,CACnB,CAAC,CAED,KAAM,CAAA+F,gBAAgB,CAAGjL,WAAW,CAAEkL,QAAQ,EAAK,CACjD1F,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAEyF,QAAQ,CAAC,CAC/D,GAAIA,QAAQ,GAAKzG,YAAY,CAAE,CAC7Be,OAAO,CAACC,GAAG,CAAC,2CAA2C,CAAC,CACxDX,gBAAgB,CAAC,KAAK,CAAC,CACvBI,aAAa,CAAC,EAAE,CAAC,CACjB,OACF,CACA,GAAIgG,QAAQ,GAAK,kBAAkB,CAAE,CACnCjF,gBAAgB,CAAC,CAAC,CACpB,CAAC,IAAM,CACLvB,eAAe,CAACwG,QAAQ,CAAC,CACzBvG,YAAY,CAACyB,OAAO,CAAC,oBAAoB,CAAE8E,QAAQ,CAAC,CACpDpG,gBAAgB,CAAC,KAAK,CAAC,CACvBI,aAAa,CAAC,EAAE,CAAC,CACnB,CACF,CAAC,CAAE,CAACT,YAAY,CAAEwB,gBAAgB,CAAC,CAAC,CAEpC,KAAM,CAAAkF,cAAc,CAAGlG,UAAU,CAC7BF,MAAM,CAACqG,MAAM,CAAClE,IAAI,EAChBA,IAAI,CAACmE,OAAO,CAACzC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC5D,UAAU,CAAC2D,WAAW,CAAC,CAAC,CAC9D,CAAC,CACD,CACE,GAAG7D,MAAM,CAACqG,MAAM,CAAClE,IAAI,EAAIxB,SAAS,CAAC4F,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAAC,CAACzC,QAAQ,CAAC3B,IAAI,CAACmE,OAAO,CAAC,CAAC,CACvE,CAAEE,EAAE,CAAE,aAAa,CAAEF,OAAO,CAAE,kBAAmB,CAAC,CACnD,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAElBvL,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC,CAC/C,GAAI5B,gBAAgB,EAAI,CAACF,SAAS,EAAIJ,aAAa,CAACwC,MAAM,CAAG,CAAC,CAAE,CAC9D3B,WAAW,CAAC,KAAK,CAAC,CAClB,KAAM,CAAAoH,KAAK,CAAGb,UAAU,CAAC,IAAM,CAC7BvG,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CACN,MAAO,IAAM,CACXoB,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAC9CgG,YAAY,CAACD,KAAK,CAAC,CACrB,CAAC,CACH,CAAC,IAAM,CACLpH,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAAE,CAACP,gBAAgB,CAAEF,SAAS,CAAEJ,aAAa,CAAC,CAAC,CAEhDxD,SAAS,CAAC,IAAM,CACdyF,OAAO,CAACC,GAAG,CAAC,iEAAiE,CAAEL,cAAc,CAACmE,OAAO,CAAC,CACtG,MAAO,IAAM,CACX/D,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CACpDjC,gBAAgB,CAAC,EAAE,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrBE,YAAY,CAAC,KAAK,CAAC,CACnBE,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACExD,IAAA,WAAQoL,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACxBnL,KAAA,QAAKkL,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BrL,IAAA,CAACJ,IAAI,EAAC0L,EAAE,CAAC,GAAG,CAACF,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,aAE9B,CAAM,CAAC,cACPnL,KAAA,QAAKkL,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BnL,KAAA,QAAKkL,SAAS,CAAC,sBAAsB,CAAAC,QAAA,eACnCrL,IAAA,UACEuL,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,8EAAkB,CAC9B5B,KAAK,CAAE7G,WAAY,CACnB0I,QAAQ,CAAEhC,iBAAkB,CAC5BiC,UAAU,CAAE1B,cAAe,CAC3BoB,SAAS,CAAC,cAAc,CACxBO,GAAG,CAAE7G,cAAe,CACrB,CAAC,CACD/B,WAAW,eACV7C,KAAA,CAAAE,SAAA,EAAAiL,QAAA,EACGhI,SAAS,eACRnD,KAAA,QACEkL,SAAS,CAAC,gBAAgB,CAC1BQ,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CAAAV,QAAA,eAEnBrL,IAAA,WAAQgM,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,MAAM,CAACC,WAAW,CAAC,GAAG,CAAE,CAAC,cAC3ErM,IAAA,SACEsM,CAAC,CAAC,yBAAyB,CAC3BH,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,SAAS,CAChBC,WAAW,CAAC,GAAG,CACfE,aAAa,CAAC,OAAO,CACtB,CAAC,EACC,CACN,cACDrM,KAAA,QACEkL,SAAS,CAAC,YAAY,CACtBoB,OAAO,CAAEtC,iBAAkB,CAC3B0B,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CACnBI,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbC,WAAW,CAAC,GAAG,CACfE,aAAa,CAAC,OAAO,CACrBE,cAAc,CAAC,OAAO,CAAApB,QAAA,eAEtBrL,IAAA,SAAM0M,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAAO,CAAC,cAC3C7M,IAAA,SAAM0M,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAAO,CAAC,EACxC,CAAC,EACN,CACH,EACE,CAAC,cACN7M,IAAA,WAAQwM,OAAO,CAAElD,YAAa,CAAC8B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,sCAEzD,CAAQ,CAAC,cACTrL,IAAA,SAAMoL,SAAS,CAAC,eAAe,CAACoB,OAAO,CAAE9B,eAAgB,CAACoC,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,CACpFlH,YAAY,CACT,CAAC,CACNI,aAAa,eACZrE,KAAA,QAAKkL,SAAS,CAAE,cAAc7G,aAAa,CAAG,MAAM,CAAG,EAAE,EAAG,CAACoH,GAAG,CAAE1G,YAAa,CAAAoG,QAAA,eAC7ErL,IAAA,UACEuL,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,kEAAgB,CAC5B5B,KAAK,CAAEjF,UAAW,CAClB8G,QAAQ,CAAG/B,CAAC,EAAK9E,aAAa,CAAC8E,CAAC,CAACP,MAAM,CAACS,KAAK,CAAE,CAC/CwB,SAAS,CAAC,mBAAmB,CAC9B,CAAC,cACFpL,IAAA,QAAKoL,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvBR,cAAc,CAACmC,GAAG,CAAEpG,IAAI,eACvB5G,IAAA,QAEEoL,SAAS,CAAC,WAAW,CACrBoB,OAAO,CAAEA,CAAA,GAAM7B,gBAAgB,CAAC/D,IAAI,CAACmE,OAAO,CAAE,CAAAM,QAAA,CAE7CzE,IAAI,CAACmE,OAAO,EAJRnE,IAAI,CAACqE,EAKP,CACN,CAAC,CACC,CAAC,EACH,CACN,CACA9H,WAAW,EAAIF,aAAa,CAACwC,MAAM,CAAG,CAAC,eACtCvF,KAAA,QACEkL,SAAS,CAAE,kBAAkB3H,aAAa,CAAG,cAAc,CAAG,EAAE,IAAIE,SAAS,CAAG,SAAS,CAAG,EAAE,EAAG,CACjGgI,GAAG,CAAE5G,UAAW,CAAAsG,QAAA,EAEfpI,aAAa,CAAC+H,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACgC,GAAG,CAAC,CAACC,QAAQ,CAAEC,KAAK,gBAC7ChN,KAAA,QAAiDkL,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC1EnL,KAAA,SACEkL,SAAS,CAAE,kBAAkBvH,QAAQ,EAAI,CAACR,SAAS,CAAG,cAAc,CAAG,EAAE,EAAG,CAC5EmJ,OAAO,CAAEA,CAAA,GAAMlC,eAAe,CAAC,aAAa2C,QAAQ,CAACA,QAAQ,EAAE,CAAE,CACjEH,KAAK,CAAE,CAAEK,cAAc,CAAE,GAAGD,KAAK,CAAG,GAAG,GAAG,CAAEH,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,EAE/DhL,aAAa,CAAC4M,QAAQ,CAACA,QAAQ,CAAC,EAAIA,QAAQ,CAACA,QAAQ,CAAC,IAAE,CAACA,QAAQ,CAACG,KAAK,CAAC,GAC3E,EAAM,CAAC,cACPpN,IAAA,OAAIoL,SAAS,CAAC,cAAc,CAAAC,QAAA,CACzB4B,QAAQ,CAACI,QAAQ,CAACrC,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAACgC,GAAG,CAAC,CAACM,OAAO,CAAEC,GAAG,gBAC9CvN,IAAA,OAAAqL,QAAA,cACErL,IAAA,SACEoL,SAAS,CAAE,gBAAgBvH,QAAQ,EAAI,CAACR,SAAS,CAAG,cAAc,CAAG,EAAE,EAAG,CAC1EmJ,OAAO,CAAEA,CAAA,GAAMlC,eAAe,CAAC,YAAYgD,OAAO,CAACrC,EAAE,EAAE,CAAE,CACzD6B,KAAK,CAAE,CAAEK,cAAc,CAAE,GAAGD,KAAK,CAAG,GAAG,CAAGK,GAAG,CAAG,IAAI,CAAG,GAAG,GAAG,CAAER,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,CAElF,GAAGiC,OAAO,CAACE,IAAI,KAAKF,OAAO,CAACG,KAAK,CAACC,MAAM,EAAI,KAAK,GAAG,CACjD,CAAC,EAPA,GAAGJ,OAAO,CAACrC,EAAE,IAAIlI,WAAW,EAQjC,CACL,CAAC,CACA,CAAC,CACJkK,QAAQ,CAACI,QAAQ,CAAC5H,MAAM,CAAG,CAAC,eAC3BvF,KAAA,WACEkL,SAAS,CAAE,iBAAiBvH,QAAQ,EAAI,CAACR,SAAS,CAAG,cAAc,CAAG,EAAE,EAAG,CAC3EmJ,OAAO,CAAEA,CAAA,GAAMlD,YAAY,CAAC,CAAE,CAC9BwD,KAAK,CAAE,CAAEK,cAAc,CAAE,GAAGD,KAAK,CAAG,GAAG,CAAG,IAAI,GAAG,CAAEH,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,EACxE,8HACyB,CAAC4B,QAAQ,CAACI,QAAQ,CAAC5H,MAAM,CAAG,CAAC,CAAC,GACxD,EAAQ,CACT,GA7BO,GAAGwH,QAAQ,CAACA,QAAQ,IAAIlK,WAAW,EA8BxC,CACN,CAAC,CACDE,aAAa,CAACwC,MAAM,CAAG,CAAC,eACvBvF,KAAA,SACEkL,SAAS,CAAE,YAAYvH,QAAQ,EAAI,CAACR,SAAS,CAAG,cAAc,CAAG,EAAE,EAAG,CACtEmJ,OAAO,CAAEA,CAAA,GAAMlC,eAAe,CAAC,iBAAiBd,kBAAkB,CAACzG,WAAW,CAAC,EAAE,CAAE,CACnF+J,KAAK,CAAE,CAAEK,cAAc,CAAE,MAAM,CAAEJ,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,EACtD,8HACyB,CAACpI,aAAa,CAAC0K,MAAM,CAAC,CAACC,GAAG,CAAEC,GAAG,GAAKD,GAAG,CAAGC,GAAG,CAACT,KAAK,CAAE,CAAC,CAAC,CAAC,GAClF,EAAM,CACP,EACE,CACN,EACE,CAAC,cACNpN,IAAA,QAAKoL,SAAS,CAAC,SAAS,CAAAC,QAAA,CACrBtH,IAAI,cACH7D,KAAA,QAAKkL,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BtH,IAAI,CAAC+J,KAAK,cACT9N,IAAA,QAAK+N,GAAG,CAAEhK,IAAI,CAAC+J,KAAM,CAACE,GAAG,CAAC,aAAa,CAAC5C,SAAS,CAAC,mBAAmB,CAAE,CAAC,cAExElL,KAAA,QACE0L,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CACnBI,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,OAAO,CACdC,WAAW,CAAC,GAAG,CACfE,aAAa,CAAC,OAAO,CACrBE,cAAc,CAAC,OAAO,CAAApB,QAAA,eAEtBrL,IAAA,SAAMsM,CAAC,CAAC,2CAA2C,CAAO,CAAC,cAC3DtM,IAAA,WAAQgM,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,CAAC,CAAC,GAAG,CAAS,CAAC,EACnC,CACN,cACDlM,IAAA,SAAMwM,OAAO,CAAE/B,iBAAkB,CAACW,SAAS,CAAC,UAAU,CAAC0B,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAA1B,QAAA,CACjFtH,IAAI,CAACkK,QAAQ,CACV,CAAC,CACNhK,eAAe,eACd/D,KAAA,QAAKkL,SAAS,CAAC,cAAc,CAACO,GAAG,CAAE3G,cAAe,CAAAqG,QAAA,eAChDrL,IAAA,QACEoL,SAAS,CAAC,mBAAmB,CAC7BoB,OAAO,CAAEA,CAAA,GAAM,CACb3H,QAAQ,CAAC,UAAU,CAAC,CACpBX,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,CAAAmH,QAAA,CACH,4CAED,CAAK,CAAC,cACNrL,IAAA,QACEoL,SAAS,CAAC,mBAAmB,CAC7BoB,OAAO,CAAEA,CAAA,GAAM,CACb3H,QAAQ,CAAC,WAAW,CAAC,CACrBX,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,CAAAmH,QAAA,CACH,sCAED,CAAK,CAAC,CACLtH,IAAI,CAACmK,QAAQ,eACZlO,IAAA,QACEoL,SAAS,CAAC,mBAAmB,CAC7BoB,OAAO,CAAEA,CAAA,GAAM,CACb3H,QAAQ,CAAC,QAAQ,CAAC,CAClBX,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CAAE,CAAAmH,QAAA,CACH,gCAED,CAAK,CACN,cACDrL,IAAA,QAAKoL,SAAS,CAAC,mBAAmB,CAACoB,OAAO,CAAEhC,YAAa,CAAAa,QAAA,CAAC,gCAE1D,CAAK,CAAC,EACH,CACN,EACE,CAAC,cAENnL,KAAA,CAAAE,SAAA,EAAAiL,QAAA,eACEnL,KAAA,QACE0L,KAAK,CAAC,4BAA4B,CAClCC,KAAK,CAAC,IAAI,CACVC,MAAM,CAAC,IAAI,CACXC,OAAO,CAAC,WAAW,CACnBI,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,OAAO,CACdC,WAAW,CAAC,GAAG,CACfE,aAAa,CAAC,OAAO,CACrBE,cAAc,CAAC,OAAO,CAAApB,QAAA,eAEtBrL,IAAA,SAAMsM,CAAC,CAAC,2CAA2C,CAAO,CAAC,cAC3DtM,IAAA,WAAQgM,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,CAAC,CAAC,GAAG,CAAS,CAAC,EACnC,CAAC,cACNlM,IAAA,CAACJ,IAAI,EAAC0L,EAAE,CAAC,QAAQ,CAACF,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,sCAEzC,CAAM,CAAC,EACP,CACH,CACE,CAAC,EACH,CAAC,CACA,CAAC,CAEb,CAEA,cAAe,CAAAzI,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}