{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{useLocation}from'react-router-dom';import Error404 from'./components/Error/Error404';import{useError}from'./components/ErrorContext';import{jsx as _jsx}from\"react/jsx-runtime\";function ErrorBoundary(_ref){let{children}=_ref;const{error,clearError}=useError();const location=useLocation();const prevLocation=useRef(location);// Зберігаємо попередній маршрут\nuseEffect(()=>{if(location.pathname!==prevLocation.current.pathname){clearError();// Очищаємо помилку лише при зміні маршруту\n}prevLocation.current=location;// Оновлюємо попередній маршрут\n},[location,clearError]);if(error){return/*#__PURE__*/_jsx(Error404,{errorMessage:error});}return children;}export default ErrorBoundary;","map":{"version":3,"names":["React","useEffect","useRef","useLocation","Error404","useError","jsx","_jsx","ErrorBoundary","_ref","children","error","clearError","location","prevLocation","pathname","current","errorMessage"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/ErrorBoundary.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport Error404 from './components/Error/Error404';\r\nimport { useError } from './components/ErrorContext';\r\n\r\nfunction ErrorBoundary({ children }) {\r\n  const { error, clearError } = useError();\r\n  const location = useLocation();\r\n  const prevLocation = useRef(location); // Зберігаємо попередній маршрут\r\n\r\n  useEffect(() => {\r\n    if (location.pathname !== prevLocation.current.pathname) {\r\n      clearError(); // Очищаємо помилку лише при зміні маршруту\r\n    }\r\n    prevLocation.current = location; // Оновлюємо попередній маршрут\r\n  }, [location, clearError]);\r\n\r\n  if (error) {\r\n    return <Error404 errorMessage={error} />;\r\n  }\r\n  return children;\r\n}\r\n\r\nexport default ErrorBoundary;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,QAAQ,KAAM,6BAA6B,CAClD,OAASC,QAAQ,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErD,QAAS,CAAAC,aAAaA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACjC,KAAM,CAAEE,KAAK,CAAEC,UAAW,CAAC,CAAGP,QAAQ,CAAC,CAAC,CACxC,KAAM,CAAAQ,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,YAAY,CAAGZ,MAAM,CAACW,QAAQ,CAAC,CAAE;AAEvCZ,SAAS,CAAC,IAAM,CACd,GAAIY,QAAQ,CAACE,QAAQ,GAAKD,YAAY,CAACE,OAAO,CAACD,QAAQ,CAAE,CACvDH,UAAU,CAAC,CAAC,CAAE;AAChB,CACAE,YAAY,CAACE,OAAO,CAAGH,QAAQ,CAAE;AACnC,CAAC,CAAE,CAACA,QAAQ,CAAED,UAAU,CAAC,CAAC,CAE1B,GAAID,KAAK,CAAE,CACT,mBAAOJ,IAAA,CAACH,QAAQ,EAACa,YAAY,CAAEN,KAAM,CAAE,CAAC,CAC1C,CACA,MAAO,CAAAD,QAAQ,CACjB,CAEA,cAAe,CAAAF,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}