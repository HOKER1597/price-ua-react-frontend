{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import'./AdminProductCreate.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminStoreCreate(){const[formData,setFormData]=useState({name:'',logo:null,years_with_us:'',link:''});const[previewImage,setPreviewImage]=useState(null);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[isLoading,setIsLoading]=useState(false);const handleInputChange=e=>{const{name,value}=e.target;setFormData({...formData,[name]:value});};const handleFileChange=e=>{const file=e.target.files[0];setFormData({...formData,logo:file});setPreviewImage(file?URL.createObjectURL(file):null);};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError(null);setSuccess(null);if(!formData.name){setError('Назва магазину є обов’язковою');setIsLoading(false);return;}const data=new FormData();data.append('name',formData.name);if(formData.logo){data.append('logo',formData.logo);}data.append('years_with_us',formData.years_with_us);data.append('link',formData.link);try{const token=localStorage.getItem('token');await axios.post('https://price-ua-react-backend.onrender.com/admin/store',data,{headers:{Authorization:`Bearer ${token}`,'Content-Type':'multipart/form-data'}});setSuccess('Магазин успішно створено!');setFormData({name:'',logo:null,years_with_us:'',link:''});setPreviewImage(null);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Не вдалося створити магазин. Перевірте дані.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-product-create animate-page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"centered-heading\",children:\"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043D\\u043E\\u0432\\u0438\\u0439 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\\u0443\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"logo\",accept:\"image/*\",onChange:handleFileChange}),previewImage&&/*#__PURE__*/_jsxs(\"div\",{className:\"image-preview\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u043E\\u043F\\u0435\\u0440\\u0435\\u0434\\u043D\\u0456\\u0439 \\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u0434\"}),/*#__PURE__*/_jsx(\"img\",{src:previewImage,alt:\"Preview\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0420\\u043E\\u043A\\u0438 \\u0441\\u043F\\u0456\\u0432\\u043F\\u0440\\u0430\\u0446\\u0456\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"years_with_us\",value:formData.years_with_us,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u043E\\u0441\\u0438\\u043B\\u0430\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"link\",value:formData.link,onChange:handleInputChange})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message centered-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message centered-message\",children:success}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button animate-field\",disabled:isLoading,children:isLoading?'Збереження...':'Зберегти'})]})]});}export default AdminStoreCreate;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AdminStoreCreate","formData","setFormData","name","logo","years_with_us","link","previewImage","setPreviewImage","error","setError","success","setSuccess","isLoading","setIsLoading","handleInputChange","e","value","target","handleFileChange","file","files","URL","createObjectURL","handleSubmit","preventDefault","data","FormData","append","token","localStorage","getItem","post","headers","Authorization","err","_err$response","_err$response$data","response","className","children","onSubmit","type","onChange","required","accept","src","alt","disabled"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Admin/AdminStoreCreate.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport './AdminProductCreate.css';\r\n\r\nfunction AdminStoreCreate() {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    logo: null,\r\n    years_with_us: '',\r\n    link: ''\r\n  });\r\n  const [previewImage, setPreviewImage] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData({ ...formData, [name]: value });\r\n  };\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setFormData({ ...formData, logo: file });\r\n    setPreviewImage(file ? URL.createObjectURL(file) : null);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    if (!formData.name) {\r\n      setError('Назва магазину є обов’язковою');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const data = new FormData();\r\n    data.append('name', formData.name);\r\n    if (formData.logo) {\r\n      data.append('logo', formData.logo);\r\n    }\r\n    data.append('years_with_us', formData.years_with_us);\r\n    data.append('link', formData.link);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.post('https://price-ua-react-backend.onrender.com/admin/store', data, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      });\r\n      setSuccess('Магазин успішно створено!');\r\n      setFormData({ name: '', logo: null, years_with_us: '', link: '' });\r\n      setPreviewImage(null);\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Не вдалося створити магазин. Перевірте дані.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-product-create animate-page\">\r\n      <h2 className=\"centered-heading\">Додати новий магазин</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Назва магазину</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={handleInputChange}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Логотип</label>\r\n          <input\r\n            type=\"file\"\r\n            name=\"logo\"\r\n            accept=\"image/*\"\r\n            onChange={handleFileChange}\r\n          />\r\n          {previewImage && (\r\n            <div className=\"image-preview\">\r\n              <label>Попередній перегляд</label>\r\n              <img src={previewImage} alt=\"Preview\" />\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Роки співпраці</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"years_with_us\"\r\n            value={formData.years_with_us}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Посилання</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"link\"\r\n            value={formData.link}\r\n            onChange={handleInputChange}\r\n          />\r\n        </div>\r\n        {error && <div className=\"error-message centered-message\">{error}</div>}\r\n        {success && <div className=\"success-message centered-message\">{success}</div>}\r\n        <button type=\"submit\" className=\"save-button animate-field\" disabled={isLoading}>\r\n          {isLoading ? 'Збереження...' : 'Зберегти'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminStoreCreate;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}