{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import axios from'axios';import'./AdminProductEdit.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function AdminProductEdit(){const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[brands,setBrands]=useState([]);const[stores,setStores]=useState([]);const[selectedProductId,setSelectedProductId]=useState('');const[formData,setFormData]=useState({category_id:'',brand_id:'',name:'',volume:'',images:[{type:'new',file:null}],code:'',features:[{key:'',value:''}],description:'',description_full:'',composition:'',usage:'',store_prices:[{store_id:'',price:'',link:''}]});const[previewImages,setPreviewImages]=useState([]);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[isLoading,setIsLoading]=useState(false);const location=useLocation();useEffect(()=>{const queryParams=new URLSearchParams(location.search);const productIdFromQuery=queryParams.get('productId');if(productIdFromQuery){setSelectedProductId(productIdFromQuery);}},[location]);useEffect(()=>{const fetchProducts=async()=>{try{const response=await axios.get('https://price-ua-react-backend.onrender.com/products?limit=1000');setProducts(response.data.products.sort((a,b)=>a.name.localeCompare(b.name)));}catch(err){console.error('Помилка завантаження товарів:',err);setError('Не вдалося завантажити товари.');}};const fetchCategories=async()=>{try{const response=await axios.get('https://price-ua-react-backend.onrender.com/categories/public');setCategories(response.data.sort((a,b)=>a.name_ua.localeCompare(b.name_ua)));}catch(err){console.error('Помилка завантаження категорій:',err);setError('Не вдалося завантажити категорії.');}};const fetchBrands=async()=>{try{const response=await axios.get('https://price-ua-react-backend.onrender.com/brands');setBrands(response.data.sort((a,b)=>a.name.localeCompare(b.name)));}catch(err){console.error('Помилка завантаження брендів:',err);setError('Не вдалося завантажити бренди.');}};const fetchStores=async()=>{try{const response=await axios.get('https://price-ua-react-backend.onrender.com/stores');setStores(response.data.sort((a,b)=>a.name.localeCompare(b.name)));}catch(err){console.error('Помилка завантаження магазинів:',err);setError('Не вдалося завантажити магазини.');}};fetchProducts();fetchCategories();fetchBrands();fetchStores();},[]);useEffect(()=>{if(selectedProductId){const fetchProductDetails=async()=>{try{const response=await axios.get(`https://price-ua-react-backend.onrender.com/products/${selectedProductId}`);const product=response.data;const featuresArray=Object.entries(product.features||{}).map(_ref=>{let[key,value]=_ref;return{key:key==='hairType'?'type':key,value:value||''};}).filter(f=>f.key&&f.value);const images=product.images.filter(url=>url&&!url.includes('placeholder.webp')).map(url=>({type:'existing',url}));setFormData({category_id:product.category_id?product.category_id.toString():'',brand_id:product.brand_id?product.brand_id.toString():'',name:product.name||'',volume:product.volume||'',images:images.length>0?images:[{type:'new',file:null}],code:product.code||'',features:featuresArray.length>0?featuresArray:[{key:'',value:''}],description:product.description||'',description_full:product.description_full||'',composition:product.composition||'',usage:product.usage||'',store_prices:product.store_prices.length>0?product.store_prices.map(sp=>({store_id:sp.store_id.toString(),price:sp.price.toString(),link:sp.link||''})):[{store_id:'',price:'',link:''}]});setPreviewImages(product.images.filter(url=>url&&!url.includes('placeholder.webp')));}catch(err){console.error('Помилка завантаження деталей товару:',err);setError('Не вдалося завантажити дані товару.');}};fetchProductDetails();}else{setFormData({category_id:'',brand_id:'',name:'',volume:'',images:[{type:'new',file:null}],code:'',features:[{key:'',value:''}],description:'',description_full:'',composition:'',usage:'',store_prices:[{store_id:'',price:'',link:''}]});setPreviewImages([]);}},[selectedProductId]);const handleInputChange=(e,index,field,type)=>{const{name,value}=e.target;if(type==='image'){const newImages=[...formData.images];const newPreviewImages=[...previewImages];if(e.target.files[0]){newImages[index]={type:'new',file:e.target.files[0]};newPreviewImages[index]=URL.createObjectURL(e.target.files[0]);}else{newImages[index]={type:'new',file:null};newPreviewImages[index]=null;}setFormData({...formData,images:newImages});setPreviewImages(newPreviewImages);}else if(type==='feature'){const newFeatures=[...formData.features];newFeatures[index][field]=value;setFormData({...formData,features:newFeatures});}else if(type==='store_price'){const newStorePrices=[...formData.store_prices];newStorePrices[index][field]=value;setFormData({...formData,store_prices:newStorePrices});}else{setFormData({...formData,[name]:value});}};const addImageField=()=>{if(formData.images.length<10){setFormData({...formData,images:[...formData.images,{type:'new',file:null}]});setPreviewImages([...previewImages,null]);}};const removeImageField=index=>{const newImages=formData.images.filter((_,i)=>i!==index);const newPreviewImages=previewImages.filter((_,i)=>i!==index);setFormData({...formData,images:newImages.length>0?newImages:[{type:'new',file:null}]});setPreviewImages(newPreviewImages.length>0?newPreviewImages:[]);};const addFeatureField=()=>{if(formData.features.length<10){setFormData({...formData,features:[...formData.features,{key:'',value:''}]});}};const removeFeatureField=index=>{const newFeatures=formData.features.filter((_,i)=>i!==index);setFormData({...formData,features:newFeatures.length>0?newFeatures:[{key:'',value:''}]});};const addStorePriceField=()=>{if(formData.store_prices.length<10){setFormData({...formData,store_prices:[...formData.store_prices,{store_id:'',price:'',link:''}]});}};const removeStorePriceField=index=>{const newStorePrices=formData.store_prices.filter((_,i)=>i!==index);setFormData({...formData,store_prices:newStorePrices.length>0?newStorePrices:[{store_id:'',price:'',link:''}]});};const handleSubmit=async e=>{e.preventDefault();if(!selectedProductId){setError('Виберіть товар для редагування.');return;}setIsLoading(true);setError(null);setSuccess(null);if(!formData.category_id||!formData.brand_id||!formData.name){setError('Заповніть обов’язкові поля: категорія, бренд, назва');setIsLoading(false);return;}const token=localStorage.getItem('token');const formDataToSend=new FormData();formDataToSend.append('category_id',formData.category_id);formDataToSend.append('brand_id',formData.brand_id);formDataToSend.append('name',formData.name);formDataToSend.append('volume',formData.volume);formDataToSend.append('code',formData.code);formDataToSend.append('description',formData.description);formDataToSend.append('description_full',formData.description_full);formDataToSend.append('composition',formData.composition);formDataToSend.append('usage',formData.usage);const featureMap=formData.features.reduce((acc,feature)=>{if(feature.key&&feature.value){acc[feature.key]=feature.value;}return acc;},{});formDataToSend.append('features',JSON.stringify(featureMap));const validStorePrices=formData.store_prices.filter(store=>store.store_id&&store.price&&!isNaN(parseFloat(store.price)));formDataToSend.append('store_prices',JSON.stringify(validStorePrices));const existingImages=formData.images.filter(image=>image.type==='existing'&&image.url&&!image.url.includes('placeholder.webp')).map(image=>image.url);formDataToSend.append('existing_images',JSON.stringify(existingImages));formData.images.forEach(image=>{if(image.type==='new'&&image.file instanceof File){formDataToSend.append('images',image.file);}});try{await axios.put(`https://price-ua-react-backend.onrender.com/admin/product/${selectedProductId}`,formDataToSend,{headers:{Authorization:`Bearer ${token}`,'Content-Type':'multipart/form-data'}});setSuccess('Товар успішно оновлено!');}catch(err){var _err$response,_err$response$data;console.error('Помилка оновлення товару:',{message:err.message,response:err.response?err.response.data:'No response data'});setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Не вдалося оновити товар. Перевірте дані або підключення до сервера.');}finally{setIsLoading(false);}};const featureOptions=[{key:'brand',label:'Бренд'},{key:'country',label:'Країна'},{key:'type',label:'Тип'},{key:'class',label:'Клас'},{key:'category',label:'Категорія'},{key:'purpose',label:'Призначення'},{key:'gender',label:'Стать'},{key:'active_ingredients',label:'Активні інгредієнти'}];const getAvailableFeatureOptions=currentIndex=>{const selectedKeys=formData.features.filter((_,index)=>index!==currentIndex).map(f=>f.key).filter(key=>key);return featureOptions.filter(option=>!selectedKeys.includes(option.key));};const getAvailableStoreOptions=currentIndex=>{const selectedStoreIds=formData.store_prices.filter((_,index)=>index!==currentIndex).map(s=>s.store_id).filter(id=>id);return stores.filter(store=>!selectedStoreIds.includes(store.id.toString()));};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-product-edit animate-page\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"centered-heading\",children:\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedProductId,onChange:e=>setSelectedProductId(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"}),products.map(product=>/*#__PURE__*/_jsxs(\"option\",{value:product.id,children:[product.name,\" (ID: \",product.id,\")\"]},product.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"category_id\",value:formData.category_id,onChange:e=>handleInputChange(e),required:true,disabled:categories.length===0,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044E\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name_ua},category.id))]}),categories.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u0439...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"brand_id\",value:formData.brand_id,onChange:e=>handleInputChange(e),required:true,disabled:brands.length===0,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0431\\u0440\\u0435\\u043D\\u0434\"}),brands.map(brand=>/*#__PURE__*/_jsx(\"option\",{value:brand.id,children:brand.name},brand.id))]}),brands.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u0431\\u0440\\u0435\\u043D\\u0434\\u0456\\u0432...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:e=>handleInputChange(e),required:true})]}),formData.images.map((image,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field image-group\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u0417\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-button\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>handleInputChange(e,index,'image','image')}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[index===formData.images.length-1&&formData.images.length<10&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-button\",onClick:addImageField,children:\"+\"}),formData.images.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeImageField(index),children:\"-\"})]}),index!==formData.images.length-1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeImageField(index),children:\"-\"})]})]}),previewImages[index]&&/*#__PURE__*/_jsx(\"div\",{className:\"image-preview\",children:/*#__PURE__*/_jsx(\"img\",{src:previewImages[index],alt:`Preview ${index+1}`})})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u0431\\u2019\\u0454\\u043C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"volume\",value:formData.volume,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"code\",value:formData.code,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"}),formData.features.map((feature,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"form-group feature-group animate-field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-button\",children:[/*#__PURE__*/_jsxs(\"select\",{value:feature.key,onChange:e=>handleInputChange(e,index,'key','feature'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0445\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0443\"}),getAvailableFeatureOptions(index).map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.key,children:option.label},option.key))]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:feature.value,onChange:e=>handleInputChange(e,index,'value','feature'),placeholder:\"\\u0417\\u043D\\u0430\\u0447\\u0435\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[index===formData.features.length-1&&formData.features.length<10&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-button\",onClick:addFeatureField,children:\"+\"}),formData.features.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeFeatureField(index),children:\"-\"})]}),index!==formData.features.length-1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeFeatureField(index),children:\"-\"})]})]})},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041A\\u043E\\u0440\\u043E\\u0442\\u043A\\u0438\\u0439 \\u043E\\u043F\\u0438\\u0441\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041F\\u043E\\u0432\\u043D\\u0438\\u0439 \\u043E\\u043F\\u0438\\u0441\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description_full\",value:formData.description_full,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0421\\u043A\\u043B\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"composition\",value:formData.composition,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group animate-field\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0412\\u0438\\u043A\\u043E\\u0440\\u0438\\u0441\\u0442\\u0430\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"usage\",value:formData.usage,onChange:e=>handleInputChange(e)})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0426\\u0456\\u043D\\u0438 \\u0432 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\\u0430\\u0445\"}),formData.store_prices.map((store,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"form-group store-price-group animate-field\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-button\",children:[/*#__PURE__*/_jsxs(\"select\",{value:store.store_id,onChange:e=>handleInputChange(e,index,'store_id','store_price'),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"}),getAvailableStoreOptions(index).map(store=>/*#__PURE__*/_jsx(\"option\",{value:store.id,children:store.name},store.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:store.price,onChange:e=>handleInputChange(e,index,'price','store_price'),placeholder:\"\\u0426\\u0456\\u043D\\u0430\",min:\"0\",step:\"0.01\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:store.link,onChange:e=>handleInputChange(e,index,'link','store_price'),placeholder:\"\\u041F\\u043E\\u0441\\u0438\\u043B\\u0430\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[index===formData.store_prices.length-1&&formData.store_prices.length<10&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"add-button\",onClick:addStorePriceField,children:\"+\"}),formData.store_prices.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeStorePriceField(index),children:\"-\"})]}),index!==formData.store_prices.length-1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-button\",onClick:()=>removeStorePriceField(index),children:\"-\"})]})]})},index)),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message centered-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message centered-message\",children:success}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"save-button animate-field\",disabled:isLoading,children:isLoading?'Оновлення...':'Оновити товар'})]})]});}export default AdminProductEdit;","map":{"version":3,"names":["React","useState","useEffect","useLocation","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminProductEdit","products","setProducts","categories","setCategories","brands","setBrands","stores","setStores","selectedProductId","setSelectedProductId","formData","setFormData","category_id","brand_id","name","volume","images","type","file","code","features","key","value","description","description_full","composition","usage","store_prices","store_id","price","link","previewImages","setPreviewImages","error","setError","success","setSuccess","isLoading","setIsLoading","location","queryParams","URLSearchParams","search","productIdFromQuery","get","fetchProducts","response","data","sort","a","b","localeCompare","err","console","fetchCategories","name_ua","fetchBrands","fetchStores","fetchProductDetails","product","featuresArray","Object","entries","map","_ref","filter","f","url","includes","toString","length","sp","handleInputChange","e","index","field","target","newImages","newPreviewImages","files","URL","createObjectURL","newFeatures","newStorePrices","addImageField","removeImageField","_","i","addFeatureField","removeFeatureField","addStorePriceField","removeStorePriceField","handleSubmit","preventDefault","token","localStorage","getItem","formDataToSend","FormData","append","featureMap","reduce","acc","feature","JSON","stringify","validStorePrices","store","isNaN","parseFloat","existingImages","image","forEach","File","put","headers","Authorization","_err$response","_err$response$data","message","featureOptions","label","getAvailableFeatureOptions","currentIndex","selectedKeys","option","getAvailableStoreOptions","selectedStoreIds","s","id","className","children","onSubmit","onChange","required","disabled","category","brand","accept","onClick","src","alt","placeholder","min","step"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Admin/AdminProductEdit.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './AdminProductEdit.css';\r\n\r\nfunction AdminProductEdit() {\r\n  const [products, setProducts] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [brands, setBrands] = useState([]);\r\n  const [stores, setStores] = useState([]);\r\n  const [selectedProductId, setSelectedProductId] = useState('');\r\n  const [formData, setFormData] = useState({\r\n    category_id: '',\r\n    brand_id: '',\r\n    name: '',\r\n    volume: '',\r\n    images: [{ type: 'new', file: null }],\r\n    code: '',\r\n    features: [{ key: '', value: '' }],\r\n    description: '',\r\n    description_full: '',\r\n    composition: '',\r\n    usage: '',\r\n    store_prices: [{ store_id: '', price: '', link: '' }],\r\n  });\r\n  const [previewImages, setPreviewImages] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const productIdFromQuery = queryParams.get('productId');\r\n    if (productIdFromQuery) {\r\n      setSelectedProductId(productIdFromQuery);\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/products?limit=1000');\r\n        setProducts(response.data.products.sort((a, b) => a.name.localeCompare(b.name)));\r\n      } catch (err) {\r\n        console.error('Помилка завантаження товарів:', err);\r\n        setError('Не вдалося завантажити товари.');\r\n      }\r\n    };\r\n\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/categories/public');\r\n        setCategories(response.data.sort((a, b) => a.name_ua.localeCompare(b.name_ua)));\r\n      } catch (err) {\r\n        console.error('Помилка завантаження категорій:', err);\r\n        setError('Не вдалося завантажити категорії.');\r\n      }\r\n    };\r\n\r\n    const fetchBrands = async () => {\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/brands');\r\n        setBrands(response.data.sort((a, b) => a.name.localeCompare(b.name)));\r\n      } catch (err) {\r\n        console.error('Помилка завантаження брендів:', err);\r\n        setError('Не вдалося завантажити бренди.');\r\n      }\r\n    };\r\n\r\n    const fetchStores = async () => {\r\n      try {\r\n        const response = await axios.get('https://price-ua-react-backend.onrender.com/stores');\r\n        setStores(response.data.sort((a, b) => a.name.localeCompare(b.name)));\r\n      } catch (err) {\r\n        console.error('Помилка завантаження магазинів:', err);\r\n        setError('Не вдалося завантажити магазини.');\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n    fetchCategories();\r\n    fetchBrands();\r\n    fetchStores();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (selectedProductId) {\r\n      const fetchProductDetails = async () => {\r\n        try {\r\n          const response = await axios.get(`https://price-ua-react-backend.onrender.com/products/${selectedProductId}`);\r\n          const product = response.data;\r\n          const featuresArray = Object.entries(product.features || {}).map(([key, value]) => ({\r\n            key: key === 'hairType' ? 'type' : key,\r\n            value: value || '',\r\n          })).filter(f => f.key && f.value);\r\n          const images = product.images\r\n            .filter(url => url && !url.includes('placeholder.webp'))\r\n            .map(url => ({ type: 'existing', url }));\r\n          setFormData({\r\n            category_id: product.category_id ? product.category_id.toString() : '',\r\n            brand_id: product.brand_id ? product.brand_id.toString() : '',\r\n            name: product.name || '',\r\n            volume: product.volume || '',\r\n            images: images.length > 0 ? images : [{ type: 'new', file: null }],\r\n            code: product.code || '',\r\n            features: featuresArray.length > 0 ? featuresArray : [{ key: '', value: '' }],\r\n            description: product.description || '',\r\n            description_full: product.description_full || '',\r\n            composition: product.composition || '',\r\n            usage: product.usage || '',\r\n            store_prices: product.store_prices.length > 0 ? product.store_prices.map(sp => ({\r\n              store_id: sp.store_id.toString(),\r\n              price: sp.price.toString(),\r\n              link: sp.link || '',\r\n            })) : [{ store_id: '', price: '', link: '' }],\r\n          });\r\n          setPreviewImages(product.images.filter(url => url && !url.includes('placeholder.webp')));\r\n        } catch (err) {\r\n          console.error('Помилка завантаження деталей товару:', err);\r\n          setError('Не вдалося завантажити дані товару.');\r\n        }\r\n      };\r\n      fetchProductDetails();\r\n    } else {\r\n      setFormData({\r\n        category_id: '',\r\n        brand_id: '',\r\n        name: '',\r\n        volume: '',\r\n        images: [{ type: 'new', file: null }],\r\n        code: '',\r\n        features: [{ key: '', value: '' }],\r\n        description: '',\r\n        description_full: '',\r\n        composition: '',\r\n        usage: '',\r\n        store_prices: [{ store_id: '', price: '', link: '' }],\r\n      });\r\n      setPreviewImages([]);\r\n    }\r\n  }, [selectedProductId]);\r\n\r\n  const handleInputChange = (e, index, field, type) => {\r\n    const { name, value } = e.target;\r\n    if (type === 'image') {\r\n      const newImages = [...formData.images];\r\n      const newPreviewImages = [...previewImages];\r\n      if (e.target.files[0]) {\r\n        newImages[index] = { type: 'new', file: e.target.files[0] };\r\n        newPreviewImages[index] = URL.createObjectURL(e.target.files[0]);\r\n      } else {\r\n        newImages[index] = { type: 'new', file: null };\r\n        newPreviewImages[index] = null;\r\n      }\r\n      setFormData({ ...formData, images: newImages });\r\n      setPreviewImages(newPreviewImages);\r\n    } else if (type === 'feature') {\r\n      const newFeatures = [...formData.features];\r\n      newFeatures[index][field] = value;\r\n      setFormData({ ...formData, features: newFeatures });\r\n    } else if (type === 'store_price') {\r\n      const newStorePrices = [...formData.store_prices];\r\n      newStorePrices[index][field] = value;\r\n      setFormData({ ...formData, store_prices: newStorePrices });\r\n    } else {\r\n      setFormData({ ...formData, [name]: value });\r\n    }\r\n  };\r\n\r\n  const addImageField = () => {\r\n    if (formData.images.length < 10) {\r\n      setFormData({ ...formData, images: [...formData.images, { type: 'new', file: null }] });\r\n      setPreviewImages([...previewImages, null]);\r\n    }\r\n  };\r\n\r\n  const removeImageField = (index) => {\r\n    const newImages = formData.images.filter((_, i) => i !== index);\r\n    const newPreviewImages = previewImages.filter((_, i) => i !== index);\r\n    setFormData({ ...formData, images: newImages.length > 0 ? newImages : [{ type: 'new', file: null }] });\r\n    setPreviewImages(newPreviewImages.length > 0 ? newPreviewImages : []);\r\n  };\r\n\r\n  const addFeatureField = () => {\r\n    if (formData.features.length < 10) {\r\n      setFormData({ ...formData, features: [...formData.features, { key: '', value: '' }] });\r\n    }\r\n  };\r\n\r\n  const removeFeatureField = (index) => {\r\n    const newFeatures = formData.features.filter((_, i) => i !== index);\r\n    setFormData({ ...formData, features: newFeatures.length > 0 ? newFeatures : [{ key: '', value: '' }] });\r\n  };\r\n\r\n  const addStorePriceField = () => {\r\n    if (formData.store_prices.length < 10) {\r\n      setFormData({\r\n        ...formData,\r\n        store_prices: [...formData.store_prices, { store_id: '', price: '', link: '' }],\r\n      });\r\n    }\r\n  };\r\n\r\n  const removeStorePriceField = (index) => {\r\n    const newStorePrices = formData.store_prices.filter((_, i) => i !== index);\r\n    setFormData({\r\n      ...formData,\r\n      store_prices: newStorePrices.length > 0 ? newStorePrices : [{ store_id: '', price: '', link: '' }],\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!selectedProductId) {\r\n      setError('Виберіть товар для редагування.');\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    if (!formData.category_id || !formData.brand_id || !formData.name) {\r\n      setError('Заповніть обов’язкові поля: категорія, бренд, назва');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    const token = localStorage.getItem('token');\r\n    const formDataToSend = new FormData();\r\n\r\n    formDataToSend.append('category_id', formData.category_id);\r\n    formDataToSend.append('brand_id', formData.brand_id);\r\n    formDataToSend.append('name', formData.name);\r\n    formDataToSend.append('volume', formData.volume);\r\n    formDataToSend.append('code', formData.code);\r\n    formDataToSend.append('description', formData.description);\r\n    formDataToSend.append('description_full', formData.description_full);\r\n    formDataToSend.append('composition', formData.composition);\r\n    formDataToSend.append('usage', formData.usage);\r\n\r\n    const featureMap = formData.features.reduce((acc, feature) => {\r\n      if (feature.key && feature.value) {\r\n        acc[feature.key] = feature.value;\r\n      }\r\n      return acc;\r\n    }, {});\r\n    formDataToSend.append('features', JSON.stringify(featureMap));\r\n\r\n    const validStorePrices = formData.store_prices.filter(\r\n      (store) => store.store_id && store.price && !isNaN(parseFloat(store.price))\r\n    );\r\n    formDataToSend.append('store_prices', JSON.stringify(validStorePrices));\r\n\r\n    const existingImages = formData.images\r\n      .filter(image => image.type === 'existing' && image.url && !image.url.includes('placeholder.webp'))\r\n      .map(image => image.url);\r\n    formDataToSend.append('existing_images', JSON.stringify(existingImages));\r\n\r\n    formData.images.forEach((image) => {\r\n      if (image.type === 'new' && image.file instanceof File) {\r\n        formDataToSend.append('images', image.file);\r\n      }\r\n    });\r\n\r\n    try {\r\n      await axios.put(`https://price-ua-react-backend.onrender.com/admin/product/${selectedProductId}`, formDataToSend, {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      setSuccess('Товар успішно оновлено!');\r\n    } catch (err) {\r\n      console.error('Помилка оновлення товару:', {\r\n        message: err.message,\r\n        response: err.response ? err.response.data : 'No response data',\r\n      });\r\n      setError(err.response?.data?.error || 'Не вдалося оновити товар. Перевірте дані або підключення до сервера.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const featureOptions = [\r\n    { key: 'brand', label: 'Бренд' },\r\n    { key: 'country', label: 'Країна' },\r\n    { key: 'type', label: 'Тип' },\r\n    { key: 'class', label: 'Клас' },\r\n    { key: 'category', label: 'Категорія' },\r\n    { key: 'purpose', label: 'Призначення' },\r\n    { key: 'gender', label: 'Стать' },\r\n    { key: 'active_ingredients', label: 'Активні інгредієнти' },\r\n  ];\r\n\r\n  const getAvailableFeatureOptions = (currentIndex) => {\r\n    const selectedKeys = formData.features\r\n      .filter((_, index) => index !== currentIndex)\r\n      .map(f => f.key)\r\n      .filter(key => key);\r\n    return featureOptions.filter(option => !selectedKeys.includes(option.key));\r\n  };\r\n\r\n  const getAvailableStoreOptions = (currentIndex) => {\r\n    const selectedStoreIds = formData.store_prices\r\n      .filter((_, index) => index !== currentIndex)\r\n      .map(s => s.store_id)\r\n      .filter(id => id);\r\n    return stores.filter(store => !selectedStoreIds.includes(store.id.toString()));\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-product-edit animate-page\">\r\n      <h2 className=\"centered-heading\">Редагувати товар</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Товар</label>\r\n          <select\r\n            value={selectedProductId}\r\n            onChange={(e) => setSelectedProductId(e.target.value)}\r\n          >\r\n            <option value=\"\">Виберіть товар</option>\r\n            {products.map((product) => (\r\n              <option key={product.id} value={product.id}>\r\n                {product.name} (ID: {product.id})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Категорія</label>\r\n          <select\r\n            name=\"category_id\"\r\n            value={formData.category_id}\r\n            onChange={(e) => handleInputChange(e)}\r\n            required\r\n            disabled={categories.length === 0}\r\n          >\r\n            <option value=\"\">Виберіть категорію</option>\r\n            {categories.map((category) => (\r\n              <option key={category.id} value={category.id}>\r\n                {category.name_ua}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {categories.length === 0 && <p>Завантаження категорій...</p>}\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Бренд</label>\r\n          <select\r\n            name=\"brand_id\"\r\n            value={formData.brand_id}\r\n            onChange={(e) => handleInputChange(e)}\r\n            required\r\n            disabled={brands.length === 0}\r\n          >\r\n            <option value=\"\">Виберіть бренд</option>\r\n            {brands.map((brand) => (\r\n              <option key={brand.id} value={brand.id}>\r\n                {brand.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {brands.length === 0 && <p>Завантаження брендів...</p>}\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Назва</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            value={formData.name}\r\n            onChange={(e) => handleInputChange(e)}\r\n            required\r\n          />\r\n        </div>\r\n        {formData.images.map((image, index) => (\r\n          <div key={index} className=\"form-group animate-field image-group\">\r\n            <label>Зображення {index + 1}</label>\r\n            <div className=\"input-with-button\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={(e) => handleInputChange(e, index, 'image', 'image')}\r\n              />\r\n              <div className=\"button-group\">\r\n                {index === formData.images.length - 1 && formData.images.length < 10 && (\r\n                  <>\r\n                    <button type=\"button\" className=\"add-button\" onClick={addImageField}>\r\n                      +\r\n                    </button>\r\n                    {formData.images.length > 1 && (\r\n                      <button type=\"button\" className=\"remove-button\" onClick={() => removeImageField(index)}>\r\n                        -\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {index !== formData.images.length - 1 && (\r\n                  <button type=\"button\" className=\"remove-button\" onClick={() => removeImageField(index)}>\r\n                    -\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {previewImages[index] && (\r\n              <div className=\"image-preview\">\r\n                <img src={previewImages[index]} alt={`Preview ${index + 1}`} />\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div className=\"form-group animate-field\">\r\n          <label>Об’єм</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"volume\"\r\n            value={formData.volume}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Код</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"code\"\r\n            value={formData.code}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <h3>Характеристики</h3>\r\n        {formData.features.map((feature, index) => (\r\n          <div key={index} className=\"form-group feature-group animate-field\">\r\n            <div className=\"input-with-button\">\r\n              <select\r\n                value={feature.key}\r\n                onChange={(e) => handleInputChange(e, index, 'key', 'feature')}\r\n              >\r\n                <option value=\"\">Виберіть характеристику</option>\r\n                {getAvailableFeatureOptions(index).map((option) => (\r\n                  <option key={option.key} value={option.key}>\r\n                    {option.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <input\r\n                type=\"text\"\r\n                value={feature.value}\r\n                onChange={(e) => handleInputChange(e, index, 'value', 'feature')}\r\n                placeholder=\"Значення\"\r\n              />\r\n              <div className=\"button-group\">\r\n                {index === formData.features.length - 1 && formData.features.length < 10 && (\r\n                  <>\r\n                    <button type=\"button\" className=\"add-button\" onClick={addFeatureField}>\r\n                      +\r\n                    </button>\r\n                    {formData.features.length > 1 && (\r\n                      <button type=\"button\" className=\"remove-button\" onClick={() => removeFeatureField(index)}>\r\n                        -\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {index !== formData.features.length - 1 && (\r\n                  <button type=\"button\" className=\"remove-button\" onClick={() => removeFeatureField(index)}>\r\n                    -\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        <div className=\"form-group animate-field\">\r\n          <label>Короткий опис</label>\r\n          <textarea\r\n            name=\"description\"\r\n            value={formData.description}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Повний опис</label>\r\n          <textarea\r\n            name=\"description_full\"\r\n            value={formData.description_full}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Склад</label>\r\n          <textarea\r\n            name=\"composition\"\r\n            value={formData.composition}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group animate-field\">\r\n          <label>Використання</label>\r\n          <textarea\r\n            name=\"usage\"\r\n            value={formData.usage}\r\n            onChange={(e) => handleInputChange(e)}\r\n          />\r\n        </div>\r\n        <h3>Ціни в магазинах</h3>\r\n        {formData.store_prices.map((store, index) => (\r\n          <div key={index} className=\"form-group store-price-group animate-field\">\r\n            <div className=\"input-with-button\">\r\n              <select\r\n                value={store.store_id}\r\n                onChange={(e) => handleInputChange(e, index, 'store_id', 'store_price')}\r\n              >\r\n                <option value=\"\">Виберіть магазин</option>\r\n                {getAvailableStoreOptions(index).map((store) => (\r\n                  <option key={store.id} value={store.id}>\r\n                    {store.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n              <input\r\n                type=\"number\"\r\n                value={store.price}\r\n                onChange={(e) => handleInputChange(e, index, 'price', 'store_price')}\r\n                placeholder=\"Ціна\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                value={store.link}\r\n                onChange={(e) => handleInputChange(e, index, 'link', 'store_price')}\r\n                placeholder=\"Посилання\"\r\n              />\r\n              <div className=\"button-group\">\r\n                {index === formData.store_prices.length - 1 && formData.store_prices.length < 10 && (\r\n                  <>\r\n                    <button type=\"button\" className=\"add-button\" onClick={addStorePriceField}>\r\n                      +\r\n                    </button>\r\n                    {formData.store_prices.length > 1 && (\r\n                      <button type=\"button\" className=\"remove-button\" onClick={() => removeStorePriceField(index)}>\r\n                        -\r\n                      </button>\r\n                    )}\r\n                  </>\r\n                )}\r\n                {index !== formData.store_prices.length - 1 && (\r\n                  <button type=\"button\" className=\"remove-button\" onClick={() => removeStorePriceField(index)}>\r\n                    -\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        {error && <div className=\"error-message centered-message\">{error}</div>}\r\n        {success && <div className=\"success-message centered-message\">{success}</div>}\r\n        <button type=\"submit\" className=\"save-button animate-field\" disabled={isLoading}>\r\n          {isLoading ? 'Оновлення...' : 'Оновити товар'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminProductEdit;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEhC,QAAS,CAAAC,gBAAgBA,CAAA,CAAG,CAC1B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACe,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACiB,MAAM,CAAEC,SAAS,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACmB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACqB,QAAQ,CAAEC,WAAW,CAAC,CAAGtB,QAAQ,CAAC,CACvCuB,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CACrCC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,CAAC,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CAClCC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EAAE,CACpBC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EAAE,CACTC,YAAY,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CACtD,CAAC,CAAC,CACF,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAG3C,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC4C,KAAK,CAAEC,QAAQ,CAAC,CAAG7C,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC8C,OAAO,CAAEC,UAAU,CAAC,CAAG/C,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgD,SAAS,CAAEC,YAAY,CAAC,CAAGjD,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAAkD,QAAQ,CAAGhD,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkD,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC,CACxD,KAAM,CAAAC,kBAAkB,CAAGH,WAAW,CAACI,GAAG,CAAC,WAAW,CAAC,CACvD,GAAID,kBAAkB,CAAE,CACtBlC,oBAAoB,CAACkC,kBAAkB,CAAC,CAC1C,CACF,CAAC,CAAE,CAACJ,QAAQ,CAAC,CAAC,CAEdjD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuD,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtD,KAAK,CAACoD,GAAG,CAAC,iEAAiE,CAAC,CACnG3C,WAAW,CAAC6C,QAAQ,CAACC,IAAI,CAAC/C,QAAQ,CAACgD,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACnC,IAAI,CAACqC,aAAa,CAACD,CAAC,CAACpC,IAAI,CAAC,CAAC,CAAC,CAClF,CAAE,MAAOsC,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,+BAA+B,CAAEmB,GAAG,CAAC,CACnDlB,QAAQ,CAAC,gCAAgC,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAoB,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAR,QAAQ,CAAG,KAAM,CAAAtD,KAAK,CAACoD,GAAG,CAAC,+DAA+D,CAAC,CACjGzC,aAAa,CAAC2C,QAAQ,CAACC,IAAI,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACM,OAAO,CAACJ,aAAa,CAACD,CAAC,CAACK,OAAO,CAAC,CAAC,CAAC,CACjF,CAAE,MAAOH,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,iCAAiC,CAAEmB,GAAG,CAAC,CACrDlB,QAAQ,CAAC,mCAAmC,CAAC,CAC/C,CACF,CAAC,CAED,KAAM,CAAAsB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAV,QAAQ,CAAG,KAAM,CAAAtD,KAAK,CAACoD,GAAG,CAAC,oDAAoD,CAAC,CACtFvC,SAAS,CAACyC,QAAQ,CAACC,IAAI,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACnC,IAAI,CAACqC,aAAa,CAACD,CAAC,CAACpC,IAAI,CAAC,CAAC,CAAC,CACvE,CAAE,MAAOsC,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,+BAA+B,CAAEmB,GAAG,CAAC,CACnDlB,QAAQ,CAAC,gCAAgC,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAuB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAX,QAAQ,CAAG,KAAM,CAAAtD,KAAK,CAACoD,GAAG,CAAC,oDAAoD,CAAC,CACtFrC,SAAS,CAACuC,QAAQ,CAACC,IAAI,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACnC,IAAI,CAACqC,aAAa,CAACD,CAAC,CAACpC,IAAI,CAAC,CAAC,CAAC,CACvE,CAAE,MAAOsC,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,iCAAiC,CAAEmB,GAAG,CAAC,CACrDlB,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CACF,CAAC,CAEDW,aAAa,CAAC,CAAC,CACfS,eAAe,CAAC,CAAC,CACjBE,WAAW,CAAC,CAAC,CACbC,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAENnE,SAAS,CAAC,IAAM,CACd,GAAIkB,iBAAiB,CAAE,CACrB,KAAM,CAAAkD,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,CACF,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAtD,KAAK,CAACoD,GAAG,CAAC,wDAAwDpC,iBAAiB,EAAE,CAAC,CAC7G,KAAM,CAAAmD,OAAO,CAAGb,QAAQ,CAACC,IAAI,CAC7B,KAAM,CAAAa,aAAa,CAAGC,MAAM,CAACC,OAAO,CAACH,OAAO,CAACvC,QAAQ,EAAI,CAAC,CAAC,CAAC,CAAC2C,GAAG,CAACC,IAAA,MAAC,CAAC3C,GAAG,CAAEC,KAAK,CAAC,CAAA0C,IAAA,OAAM,CAClF3C,GAAG,CAAEA,GAAG,GAAK,UAAU,CAAG,MAAM,CAAGA,GAAG,CACtCC,KAAK,CAAEA,KAAK,EAAI,EAClB,CAAC,EAAC,CAAC,CAAC2C,MAAM,CAACC,CAAC,EAAIA,CAAC,CAAC7C,GAAG,EAAI6C,CAAC,CAAC5C,KAAK,CAAC,CACjC,KAAM,CAAAN,MAAM,CAAG2C,OAAO,CAAC3C,MAAM,CAC1BiD,MAAM,CAACE,GAAG,EAAIA,GAAG,EAAI,CAACA,GAAG,CAACC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CACvDL,GAAG,CAACI,GAAG,GAAK,CAAElD,IAAI,CAAE,UAAU,CAAEkD,GAAI,CAAC,CAAC,CAAC,CAC1CxD,WAAW,CAAC,CACVC,WAAW,CAAE+C,OAAO,CAAC/C,WAAW,CAAG+C,OAAO,CAAC/C,WAAW,CAACyD,QAAQ,CAAC,CAAC,CAAG,EAAE,CACtExD,QAAQ,CAAE8C,OAAO,CAAC9C,QAAQ,CAAG8C,OAAO,CAAC9C,QAAQ,CAACwD,QAAQ,CAAC,CAAC,CAAG,EAAE,CAC7DvD,IAAI,CAAE6C,OAAO,CAAC7C,IAAI,EAAI,EAAE,CACxBC,MAAM,CAAE4C,OAAO,CAAC5C,MAAM,EAAI,EAAE,CAC5BC,MAAM,CAAEA,MAAM,CAACsD,MAAM,CAAG,CAAC,CAAGtD,MAAM,CAAG,CAAC,CAAEC,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CAClEC,IAAI,CAAEwC,OAAO,CAACxC,IAAI,EAAI,EAAE,CACxBC,QAAQ,CAAEwC,aAAa,CAACU,MAAM,CAAG,CAAC,CAAGV,aAAa,CAAG,CAAC,CAAEvC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CAC7EC,WAAW,CAAEoC,OAAO,CAACpC,WAAW,EAAI,EAAE,CACtCC,gBAAgB,CAAEmC,OAAO,CAACnC,gBAAgB,EAAI,EAAE,CAChDC,WAAW,CAAEkC,OAAO,CAAClC,WAAW,EAAI,EAAE,CACtCC,KAAK,CAAEiC,OAAO,CAACjC,KAAK,EAAI,EAAE,CAC1BC,YAAY,CAAEgC,OAAO,CAAChC,YAAY,CAAC2C,MAAM,CAAG,CAAC,CAAGX,OAAO,CAAChC,YAAY,CAACoC,GAAG,CAACQ,EAAE,GAAK,CAC9E3C,QAAQ,CAAE2C,EAAE,CAAC3C,QAAQ,CAACyC,QAAQ,CAAC,CAAC,CAChCxC,KAAK,CAAE0C,EAAE,CAAC1C,KAAK,CAACwC,QAAQ,CAAC,CAAC,CAC1BvC,IAAI,CAAEyC,EAAE,CAACzC,IAAI,EAAI,EACnB,CAAC,CAAC,CAAC,CAAG,CAAC,CAAEF,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAC9C,CAAC,CAAC,CACFE,gBAAgB,CAAC2B,OAAO,CAAC3C,MAAM,CAACiD,MAAM,CAACE,GAAG,EAAIA,GAAG,EAAI,CAACA,GAAG,CAACC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAC1F,CAAE,MAAOhB,GAAG,CAAE,CACZC,OAAO,CAACpB,KAAK,CAAC,sCAAsC,CAAEmB,GAAG,CAAC,CAC1DlB,QAAQ,CAAC,qCAAqC,CAAC,CACjD,CACF,CAAC,CACDwB,mBAAmB,CAAC,CAAC,CACvB,CAAC,IAAM,CACL/C,WAAW,CAAC,CACVC,WAAW,CAAE,EAAE,CACfC,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,EAAE,CACRC,MAAM,CAAE,EAAE,CACVC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CACrCC,IAAI,CAAE,EAAE,CACRC,QAAQ,CAAE,CAAC,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CAClCC,WAAW,CAAE,EAAE,CACfC,gBAAgB,CAAE,EAAE,CACpBC,WAAW,CAAE,EAAE,CACfC,KAAK,CAAE,EAAE,CACTC,YAAY,CAAE,CAAC,CAAEC,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CACtD,CAAC,CAAC,CACFE,gBAAgB,CAAC,EAAE,CAAC,CACtB,CACF,CAAC,CAAE,CAACxB,iBAAiB,CAAC,CAAC,CAEvB,KAAM,CAAAgE,iBAAiB,CAAGA,CAACC,CAAC,CAAEC,KAAK,CAAEC,KAAK,CAAE1D,IAAI,GAAK,CACnD,KAAM,CAAEH,IAAI,CAAEQ,KAAM,CAAC,CAAGmD,CAAC,CAACG,MAAM,CAChC,GAAI3D,IAAI,GAAK,OAAO,CAAE,CACpB,KAAM,CAAA4D,SAAS,CAAG,CAAC,GAAGnE,QAAQ,CAACM,MAAM,CAAC,CACtC,KAAM,CAAA8D,gBAAgB,CAAG,CAAC,GAAG/C,aAAa,CAAC,CAC3C,GAAI0C,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAE,CACrBF,SAAS,CAACH,KAAK,CAAC,CAAG,CAAEzD,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAEuD,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC,CAAC,CAAE,CAAC,CAC3DD,gBAAgB,CAACJ,KAAK,CAAC,CAAGM,GAAG,CAACC,eAAe,CAACR,CAAC,CAACG,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAClE,CAAC,IAAM,CACLF,SAAS,CAACH,KAAK,CAAC,CAAG,CAAEzD,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAC9C4D,gBAAgB,CAACJ,KAAK,CAAC,CAAG,IAAI,CAChC,CACA/D,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEM,MAAM,CAAE6D,SAAU,CAAC,CAAC,CAC/C7C,gBAAgB,CAAC8C,gBAAgB,CAAC,CACpC,CAAC,IAAM,IAAI7D,IAAI,GAAK,SAAS,CAAE,CAC7B,KAAM,CAAAiE,WAAW,CAAG,CAAC,GAAGxE,QAAQ,CAACU,QAAQ,CAAC,CAC1C8D,WAAW,CAACR,KAAK,CAAC,CAACC,KAAK,CAAC,CAAGrD,KAAK,CACjCX,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEU,QAAQ,CAAE8D,WAAY,CAAC,CAAC,CACrD,CAAC,IAAM,IAAIjE,IAAI,GAAK,aAAa,CAAE,CACjC,KAAM,CAAAkE,cAAc,CAAG,CAAC,GAAGzE,QAAQ,CAACiB,YAAY,CAAC,CACjDwD,cAAc,CAACT,KAAK,CAAC,CAACC,KAAK,CAAC,CAAGrD,KAAK,CACpCX,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEiB,YAAY,CAAEwD,cAAe,CAAC,CAAC,CAC5D,CAAC,IAAM,CACLxE,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAE,CAACI,IAAI,EAAGQ,KAAM,CAAC,CAAC,CAC7C,CACF,CAAC,CAED,KAAM,CAAA8D,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI1E,QAAQ,CAACM,MAAM,CAACsD,MAAM,CAAG,EAAE,CAAE,CAC/B3D,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEM,MAAM,CAAE,CAAC,GAAGN,QAAQ,CAACM,MAAM,CAAE,CAAEC,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAE,CAAC,CAAC,CACvFc,gBAAgB,CAAC,CAAC,GAAGD,aAAa,CAAE,IAAI,CAAC,CAAC,CAC5C,CACF,CAAC,CAED,KAAM,CAAAsD,gBAAgB,CAAIX,KAAK,EAAK,CAClC,KAAM,CAAAG,SAAS,CAAGnE,QAAQ,CAACM,MAAM,CAACiD,MAAM,CAAC,CAACqB,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKb,KAAK,CAAC,CAC/D,KAAM,CAAAI,gBAAgB,CAAG/C,aAAa,CAACkC,MAAM,CAAC,CAACqB,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKb,KAAK,CAAC,CACpE/D,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEM,MAAM,CAAE6D,SAAS,CAACP,MAAM,CAAG,CAAC,CAAGO,SAAS,CAAG,CAAC,CAAE5D,IAAI,CAAE,KAAK,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAE,CAAC,CAAC,CACtGc,gBAAgB,CAAC8C,gBAAgB,CAACR,MAAM,CAAG,CAAC,CAAGQ,gBAAgB,CAAG,EAAE,CAAC,CACvE,CAAC,CAED,KAAM,CAAAU,eAAe,CAAGA,CAAA,GAAM,CAC5B,GAAI9E,QAAQ,CAACU,QAAQ,CAACkD,MAAM,CAAG,EAAE,CAAE,CACjC3D,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEU,QAAQ,CAAE,CAAC,GAAGV,QAAQ,CAACU,QAAQ,CAAE,CAAEC,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAE,CAAC,CAAC,CACxF,CACF,CAAC,CAED,KAAM,CAAAmE,kBAAkB,CAAIf,KAAK,EAAK,CACpC,KAAM,CAAAQ,WAAW,CAAGxE,QAAQ,CAACU,QAAQ,CAAC6C,MAAM,CAAC,CAACqB,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKb,KAAK,CAAC,CACnE/D,WAAW,CAAC,CAAE,GAAGD,QAAQ,CAAEU,QAAQ,CAAE8D,WAAW,CAACZ,MAAM,CAAG,CAAC,CAAGY,WAAW,CAAG,CAAC,CAAE7D,GAAG,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAE,CAAC,CAAC,CACzG,CAAC,CAED,KAAM,CAAAoE,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,GAAIhF,QAAQ,CAACiB,YAAY,CAAC2C,MAAM,CAAG,EAAE,CAAE,CACrC3D,WAAW,CAAC,CACV,GAAGD,QAAQ,CACXiB,YAAY,CAAE,CAAC,GAAGjB,QAAQ,CAACiB,YAAY,CAAE,CAAEC,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CAChF,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAA6D,qBAAqB,CAAIjB,KAAK,EAAK,CACvC,KAAM,CAAAS,cAAc,CAAGzE,QAAQ,CAACiB,YAAY,CAACsC,MAAM,CAAC,CAACqB,CAAC,CAAEC,CAAC,GAAKA,CAAC,GAAKb,KAAK,CAAC,CAC1E/D,WAAW,CAAC,CACV,GAAGD,QAAQ,CACXiB,YAAY,CAAEwD,cAAc,CAACb,MAAM,CAAG,CAAC,CAAGa,cAAc,CAAG,CAAC,CAAEvD,QAAQ,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAG,CAAC,CACnG,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAA8D,YAAY,CAAG,KAAO,CAAAnB,CAAC,EAAK,CAChCA,CAAC,CAACoB,cAAc,CAAC,CAAC,CAClB,GAAI,CAACrF,iBAAiB,CAAE,CACtB0B,QAAQ,CAAC,iCAAiC,CAAC,CAC3C,OACF,CACAI,YAAY,CAAC,IAAI,CAAC,CAClBJ,QAAQ,CAAC,IAAI,CAAC,CACdE,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CAAC1B,QAAQ,CAACE,WAAW,EAAI,CAACF,QAAQ,CAACG,QAAQ,EAAI,CAACH,QAAQ,CAACI,IAAI,CAAE,CACjEoB,QAAQ,CAAC,qDAAqD,CAAC,CAC/DI,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEA,KAAM,CAAAwD,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,cAAc,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAErCD,cAAc,CAACE,MAAM,CAAC,aAAa,CAAEzF,QAAQ,CAACE,WAAW,CAAC,CAC1DqF,cAAc,CAACE,MAAM,CAAC,UAAU,CAAEzF,QAAQ,CAACG,QAAQ,CAAC,CACpDoF,cAAc,CAACE,MAAM,CAAC,MAAM,CAAEzF,QAAQ,CAACI,IAAI,CAAC,CAC5CmF,cAAc,CAACE,MAAM,CAAC,QAAQ,CAAEzF,QAAQ,CAACK,MAAM,CAAC,CAChDkF,cAAc,CAACE,MAAM,CAAC,MAAM,CAAEzF,QAAQ,CAACS,IAAI,CAAC,CAC5C8E,cAAc,CAACE,MAAM,CAAC,aAAa,CAAEzF,QAAQ,CAACa,WAAW,CAAC,CAC1D0E,cAAc,CAACE,MAAM,CAAC,kBAAkB,CAAEzF,QAAQ,CAACc,gBAAgB,CAAC,CACpEyE,cAAc,CAACE,MAAM,CAAC,aAAa,CAAEzF,QAAQ,CAACe,WAAW,CAAC,CAC1DwE,cAAc,CAACE,MAAM,CAAC,OAAO,CAAEzF,QAAQ,CAACgB,KAAK,CAAC,CAE9C,KAAM,CAAA0E,UAAU,CAAG1F,QAAQ,CAACU,QAAQ,CAACiF,MAAM,CAAC,CAACC,GAAG,CAAEC,OAAO,GAAK,CAC5D,GAAIA,OAAO,CAAClF,GAAG,EAAIkF,OAAO,CAACjF,KAAK,CAAE,CAChCgF,GAAG,CAACC,OAAO,CAAClF,GAAG,CAAC,CAAGkF,OAAO,CAACjF,KAAK,CAClC,CACA,MAAO,CAAAgF,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CACNL,cAAc,CAACE,MAAM,CAAC,UAAU,CAAEK,IAAI,CAACC,SAAS,CAACL,UAAU,CAAC,CAAC,CAE7D,KAAM,CAAAM,gBAAgB,CAAGhG,QAAQ,CAACiB,YAAY,CAACsC,MAAM,CAClD0C,KAAK,EAAKA,KAAK,CAAC/E,QAAQ,EAAI+E,KAAK,CAAC9E,KAAK,EAAI,CAAC+E,KAAK,CAACC,UAAU,CAACF,KAAK,CAAC9E,KAAK,CAAC,CAC5E,CAAC,CACDoE,cAAc,CAACE,MAAM,CAAC,cAAc,CAAEK,IAAI,CAACC,SAAS,CAACC,gBAAgB,CAAC,CAAC,CAEvE,KAAM,CAAAI,cAAc,CAAGpG,QAAQ,CAACM,MAAM,CACnCiD,MAAM,CAAC8C,KAAK,EAAIA,KAAK,CAAC9F,IAAI,GAAK,UAAU,EAAI8F,KAAK,CAAC5C,GAAG,EAAI,CAAC4C,KAAK,CAAC5C,GAAG,CAACC,QAAQ,CAAC,kBAAkB,CAAC,CAAC,CAClGL,GAAG,CAACgD,KAAK,EAAIA,KAAK,CAAC5C,GAAG,CAAC,CAC1B8B,cAAc,CAACE,MAAM,CAAC,iBAAiB,CAAEK,IAAI,CAACC,SAAS,CAACK,cAAc,CAAC,CAAC,CAExEpG,QAAQ,CAACM,MAAM,CAACgG,OAAO,CAAED,KAAK,EAAK,CACjC,GAAIA,KAAK,CAAC9F,IAAI,GAAK,KAAK,EAAI8F,KAAK,CAAC7F,IAAI,WAAY,CAAA+F,IAAI,CAAE,CACtDhB,cAAc,CAACE,MAAM,CAAC,QAAQ,CAAEY,KAAK,CAAC7F,IAAI,CAAC,CAC7C,CACF,CAAC,CAAC,CAEF,GAAI,CACF,KAAM,CAAA1B,KAAK,CAAC0H,GAAG,CAAC,6DAA6D1G,iBAAiB,EAAE,CAAEyF,cAAc,CAAE,CAChHkB,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUtB,KAAK,EAAE,CAChC,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,CACF1D,UAAU,CAAC,yBAAyB,CAAC,CACvC,CAAE,MAAOgB,GAAG,CAAE,KAAAiE,aAAA,CAAAC,kBAAA,CACZjE,OAAO,CAACpB,KAAK,CAAC,2BAA2B,CAAE,CACzCsF,OAAO,CAAEnE,GAAG,CAACmE,OAAO,CACpBzE,QAAQ,CAAEM,GAAG,CAACN,QAAQ,CAAGM,GAAG,CAACN,QAAQ,CAACC,IAAI,CAAG,kBAC/C,CAAC,CAAC,CACFb,QAAQ,CAAC,EAAAmF,aAAA,CAAAjE,GAAG,CAACN,QAAQ,UAAAuE,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAActE,IAAI,UAAAuE,kBAAA,iBAAlBA,kBAAA,CAAoBrF,KAAK,GAAI,sEAAsE,CAAC,CAC/G,CAAC,OAAS,CACRK,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,KAAM,CAAAkF,cAAc,CAAG,CACrB,CAAEnG,GAAG,CAAE,OAAO,CAAEoG,KAAK,CAAE,OAAQ,CAAC,CAChC,CAAEpG,GAAG,CAAE,SAAS,CAAEoG,KAAK,CAAE,QAAS,CAAC,CACnC,CAAEpG,GAAG,CAAE,MAAM,CAAEoG,KAAK,CAAE,KAAM,CAAC,CAC7B,CAAEpG,GAAG,CAAE,OAAO,CAAEoG,KAAK,CAAE,MAAO,CAAC,CAC/B,CAAEpG,GAAG,CAAE,UAAU,CAAEoG,KAAK,CAAE,WAAY,CAAC,CACvC,CAAEpG,GAAG,CAAE,SAAS,CAAEoG,KAAK,CAAE,aAAc,CAAC,CACxC,CAAEpG,GAAG,CAAE,QAAQ,CAAEoG,KAAK,CAAE,OAAQ,CAAC,CACjC,CAAEpG,GAAG,CAAE,oBAAoB,CAAEoG,KAAK,CAAE,qBAAsB,CAAC,CAC5D,CAED,KAAM,CAAAC,0BAA0B,CAAIC,YAAY,EAAK,CACnD,KAAM,CAAAC,YAAY,CAAGlH,QAAQ,CAACU,QAAQ,CACnC6C,MAAM,CAAC,CAACqB,CAAC,CAAEZ,KAAK,GAAKA,KAAK,GAAKiD,YAAY,CAAC,CAC5C5D,GAAG,CAACG,CAAC,EAAIA,CAAC,CAAC7C,GAAG,CAAC,CACf4C,MAAM,CAAC5C,GAAG,EAAIA,GAAG,CAAC,CACrB,MAAO,CAAAmG,cAAc,CAACvD,MAAM,CAAC4D,MAAM,EAAI,CAACD,YAAY,CAACxD,QAAQ,CAACyD,MAAM,CAACxG,GAAG,CAAC,CAAC,CAC5E,CAAC,CAED,KAAM,CAAAyG,wBAAwB,CAAIH,YAAY,EAAK,CACjD,KAAM,CAAAI,gBAAgB,CAAGrH,QAAQ,CAACiB,YAAY,CAC3CsC,MAAM,CAAC,CAACqB,CAAC,CAAEZ,KAAK,GAAKA,KAAK,GAAKiD,YAAY,CAAC,CAC5C5D,GAAG,CAACiE,CAAC,EAAIA,CAAC,CAACpG,QAAQ,CAAC,CACpBqC,MAAM,CAACgE,EAAE,EAAIA,EAAE,CAAC,CACnB,MAAO,CAAA3H,MAAM,CAAC2D,MAAM,CAAC0C,KAAK,EAAI,CAACoB,gBAAgB,CAAC3D,QAAQ,CAACuC,KAAK,CAACsB,EAAE,CAAC5D,QAAQ,CAAC,CAAC,CAAC,CAAC,CAChF,CAAC,CAED,mBACEzE,KAAA,QAAKsI,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC9CzI,IAAA,OAAIwI,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,6FAAgB,CAAI,CAAC,cACtDvI,KAAA,SAAMwI,QAAQ,CAAExC,YAAa,CAAAuC,QAAA,eAC3BvI,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,gCAAK,CAAO,CAAC,cACpBvI,KAAA,WACE0B,KAAK,CAAEd,iBAAkB,CACzB6H,QAAQ,CAAG5D,CAAC,EAAKhE,oBAAoB,CAACgE,CAAC,CAACG,MAAM,CAACtD,KAAK,CAAE,CAAA6G,QAAA,eAEtDzI,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,iFAAc,CAAQ,CAAC,CACvCnI,QAAQ,CAAC+D,GAAG,CAAEJ,OAAO,eACpB/D,KAAA,WAAyB0B,KAAK,CAAEqC,OAAO,CAACsE,EAAG,CAAAE,QAAA,EACxCxE,OAAO,CAAC7C,IAAI,CAAC,QAAM,CAAC6C,OAAO,CAACsE,EAAE,CAAC,GAClC,GAFatE,OAAO,CAACsE,EAEb,CACT,CAAC,EACI,CAAC,EACN,CAAC,cACNrI,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,wDAAS,CAAO,CAAC,cACxBvI,KAAA,WACEkB,IAAI,CAAC,aAAa,CAClBQ,KAAK,CAAEZ,QAAQ,CAACE,WAAY,CAC5ByH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACtC6D,QAAQ,MACRC,QAAQ,CAAErI,UAAU,CAACoE,MAAM,GAAK,CAAE,CAAA6D,QAAA,eAElCzI,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,yGAAkB,CAAQ,CAAC,CAC3CjI,UAAU,CAAC6D,GAAG,CAAEyE,QAAQ,eACvB9I,IAAA,WAA0B4B,KAAK,CAAEkH,QAAQ,CAACP,EAAG,CAAAE,QAAA,CAC1CK,QAAQ,CAACjF,OAAO,EADNiF,QAAQ,CAACP,EAEd,CACT,CAAC,EACI,CAAC,CACR/H,UAAU,CAACoE,MAAM,GAAK,CAAC,eAAI5E,IAAA,MAAAyI,QAAA,CAAG,oIAAyB,CAAG,CAAC,EACzD,CAAC,cACNvI,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,gCAAK,CAAO,CAAC,cACpBvI,KAAA,WACEkB,IAAI,CAAC,UAAU,CACfQ,KAAK,CAAEZ,QAAQ,CAACG,QAAS,CACzBwH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACtC6D,QAAQ,MACRC,QAAQ,CAAEnI,MAAM,CAACkE,MAAM,GAAK,CAAE,CAAA6D,QAAA,eAE9BzI,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,iFAAc,CAAQ,CAAC,CACvC/H,MAAM,CAAC2D,GAAG,CAAE0E,KAAK,eAChB/I,IAAA,WAAuB4B,KAAK,CAAEmH,KAAK,CAACR,EAAG,CAAAE,QAAA,CACpCM,KAAK,CAAC3H,IAAI,EADA2H,KAAK,CAACR,EAEX,CACT,CAAC,EACI,CAAC,CACR7H,MAAM,CAACkE,MAAM,GAAK,CAAC,eAAI5E,IAAA,MAAAyI,QAAA,CAAG,wHAAuB,CAAG,CAAC,EACnD,CAAC,cACNvI,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,gCAAK,CAAO,CAAC,cACpBzI,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXH,IAAI,CAAC,MAAM,CACXQ,KAAK,CAAEZ,QAAQ,CAACI,IAAK,CACrBuH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACtC6D,QAAQ,MACT,CAAC,EACC,CAAC,CACL5H,QAAQ,CAACM,MAAM,CAAC+C,GAAG,CAAC,CAACgD,KAAK,CAAErC,KAAK,gBAChC9E,KAAA,QAAiBsI,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eAC/DvI,KAAA,UAAAuI,QAAA,EAAO,+DAAW,CAACzD,KAAK,CAAG,CAAC,EAAQ,CAAC,cACrC9E,KAAA,QAAKsI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzI,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXyH,MAAM,CAAC,SAAS,CAChBL,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,OAAO,CAAE,OAAO,CAAE,CAChE,CAAC,cACF9E,KAAA,QAAKsI,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BzD,KAAK,GAAKhE,QAAQ,CAACM,MAAM,CAACsD,MAAM,CAAG,CAAC,EAAI5D,QAAQ,CAACM,MAAM,CAACsD,MAAM,CAAG,EAAE,eAClE1E,KAAA,CAAAE,SAAA,EAAAqI,QAAA,eACEzI,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,YAAY,CAACS,OAAO,CAAEvD,aAAc,CAAA+C,QAAA,CAAC,GAErE,CAAQ,CAAC,CACRzH,QAAQ,CAACM,MAAM,CAACsD,MAAM,CAAG,CAAC,eACzB5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMtD,gBAAgB,CAACX,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAExF,CAAQ,CACT,EACD,CACH,CACAzD,KAAK,GAAKhE,QAAQ,CAACM,MAAM,CAACsD,MAAM,CAAG,CAAC,eACnC5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMtD,gBAAgB,CAACX,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAExF,CAAQ,CACT,EACE,CAAC,EACH,CAAC,CACLpG,aAAa,CAAC2C,KAAK,CAAC,eACnBhF,IAAA,QAAKwI,SAAS,CAAC,eAAe,CAAAC,QAAA,cAC5BzI,IAAA,QAAKkJ,GAAG,CAAE7G,aAAa,CAAC2C,KAAK,CAAE,CAACmE,GAAG,CAAE,WAAWnE,KAAK,CAAG,CAAC,EAAG,CAAE,CAAC,CAC5D,CACN,GAhCOA,KAiCL,CACN,CAAC,cACF9E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,gCAAK,CAAO,CAAC,cACpBzI,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXH,IAAI,CAAC,QAAQ,CACbQ,KAAK,CAAEZ,QAAQ,CAACK,MAAO,CACvBsH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN7E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,oBAAG,CAAO,CAAC,cAClBzI,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXH,IAAI,CAAC,MAAM,CACXQ,KAAK,CAAEZ,QAAQ,CAACS,IAAK,CACrBkH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN/E,IAAA,OAAAyI,QAAA,CAAI,sFAAc,CAAI,CAAC,CACtBzH,QAAQ,CAACU,QAAQ,CAAC2C,GAAG,CAAC,CAACwC,OAAO,CAAE7B,KAAK,gBACpChF,IAAA,QAAiBwI,SAAS,CAAC,wCAAwC,CAAAC,QAAA,cACjEvI,KAAA,QAAKsI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCvI,KAAA,WACE0B,KAAK,CAAEiF,OAAO,CAAClF,GAAI,CACnBgH,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,KAAK,CAAE,SAAS,CAAE,CAAAyD,QAAA,eAE/DzI,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,uIAAuB,CAAQ,CAAC,CAChDT,0BAA0B,CAAChD,KAAK,CAAC,CAACX,GAAG,CAAE8D,MAAM,eAC5CnI,IAAA,WAAyB4B,KAAK,CAAEuG,MAAM,CAACxG,GAAI,CAAA8G,QAAA,CACxCN,MAAM,CAACJ,KAAK,EADFI,MAAM,CAACxG,GAEZ,CACT,CAAC,EACI,CAAC,cACT3B,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXK,KAAK,CAAEiF,OAAO,CAACjF,KAAM,CACrB+G,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,OAAO,CAAE,SAAS,CAAE,CACjEoE,WAAW,CAAC,kDAAU,CACvB,CAAC,cACFlJ,KAAA,QAAKsI,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BzD,KAAK,GAAKhE,QAAQ,CAACU,QAAQ,CAACkD,MAAM,CAAG,CAAC,EAAI5D,QAAQ,CAACU,QAAQ,CAACkD,MAAM,CAAG,EAAE,eACtE1E,KAAA,CAAAE,SAAA,EAAAqI,QAAA,eACEzI,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,YAAY,CAACS,OAAO,CAAEnD,eAAgB,CAAA2C,QAAA,CAAC,GAEvE,CAAQ,CAAC,CACRzH,QAAQ,CAACU,QAAQ,CAACkD,MAAM,CAAG,CAAC,eAC3B5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMlD,kBAAkB,CAACf,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAE1F,CAAQ,CACT,EACD,CACH,CACAzD,KAAK,GAAKhE,QAAQ,CAACU,QAAQ,CAACkD,MAAM,CAAG,CAAC,eACrC5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMlD,kBAAkB,CAACf,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAE1F,CAAQ,CACT,EACE,CAAC,EACH,CAAC,EAtCEzD,KAuCL,CACN,CAAC,cACF9E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,2EAAa,CAAO,CAAC,cAC5BzI,IAAA,aACEoB,IAAI,CAAC,aAAa,CAClBQ,KAAK,CAAEZ,QAAQ,CAACa,WAAY,CAC5B8G,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN7E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,+DAAW,CAAO,CAAC,cAC1BzI,IAAA,aACEoB,IAAI,CAAC,kBAAkB,CACvBQ,KAAK,CAAEZ,QAAQ,CAACc,gBAAiB,CACjC6G,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN7E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,gCAAK,CAAO,CAAC,cACpBzI,IAAA,aACEoB,IAAI,CAAC,aAAa,CAClBQ,KAAK,CAAEZ,QAAQ,CAACe,WAAY,CAC5B4G,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN7E,KAAA,QAAKsI,SAAS,CAAC,0BAA0B,CAAAC,QAAA,eACvCzI,IAAA,UAAAyI,QAAA,CAAO,0EAAY,CAAO,CAAC,cAC3BzI,IAAA,aACEoB,IAAI,CAAC,OAAO,CACZQ,KAAK,CAAEZ,QAAQ,CAACgB,KAAM,CACtB2G,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAE,CACvC,CAAC,EACC,CAAC,cACN/E,IAAA,OAAAyI,QAAA,CAAI,wFAAgB,CAAI,CAAC,CACxBzH,QAAQ,CAACiB,YAAY,CAACoC,GAAG,CAAC,CAAC4C,KAAK,CAAEjC,KAAK,gBACtChF,IAAA,QAAiBwI,SAAS,CAAC,4CAA4C,CAAAC,QAAA,cACrEvI,KAAA,QAAKsI,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCvI,KAAA,WACE0B,KAAK,CAAEqF,KAAK,CAAC/E,QAAS,CACtByG,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,UAAU,CAAE,aAAa,CAAE,CAAAyD,QAAA,eAExEzI,IAAA,WAAQ4B,KAAK,CAAC,EAAE,CAAA6G,QAAA,CAAC,6FAAgB,CAAQ,CAAC,CACzCL,wBAAwB,CAACpD,KAAK,CAAC,CAACX,GAAG,CAAE4C,KAAK,eACzCjH,IAAA,WAAuB4B,KAAK,CAAEqF,KAAK,CAACsB,EAAG,CAAAE,QAAA,CACpCxB,KAAK,CAAC7F,IAAI,EADA6F,KAAK,CAACsB,EAEX,CACT,CAAC,EACI,CAAC,cACTvI,IAAA,UACEuB,IAAI,CAAC,QAAQ,CACbK,KAAK,CAAEqF,KAAK,CAAC9E,KAAM,CACnBwG,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,OAAO,CAAE,aAAa,CAAE,CACrEoE,WAAW,CAAC,0BAAM,CAClBC,GAAG,CAAC,GAAG,CACPC,IAAI,CAAC,MAAM,CACZ,CAAC,cACFtJ,IAAA,UACEuB,IAAI,CAAC,MAAM,CACXK,KAAK,CAAEqF,KAAK,CAAC7E,IAAK,CAClBuG,QAAQ,CAAG5D,CAAC,EAAKD,iBAAiB,CAACC,CAAC,CAAEC,KAAK,CAAE,MAAM,CAAE,aAAa,CAAE,CACpEoE,WAAW,CAAC,wDAAW,CACxB,CAAC,cACFlJ,KAAA,QAAKsI,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BzD,KAAK,GAAKhE,QAAQ,CAACiB,YAAY,CAAC2C,MAAM,CAAG,CAAC,EAAI5D,QAAQ,CAACiB,YAAY,CAAC2C,MAAM,CAAG,EAAE,eAC9E1E,KAAA,CAAAE,SAAA,EAAAqI,QAAA,eACEzI,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,YAAY,CAACS,OAAO,CAAEjD,kBAAmB,CAAAyC,QAAA,CAAC,GAE1E,CAAQ,CAAC,CACRzH,QAAQ,CAACiB,YAAY,CAAC2C,MAAM,CAAG,CAAC,eAC/B5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMhD,qBAAqB,CAACjB,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAE7F,CAAQ,CACT,EACD,CACH,CACAzD,KAAK,GAAKhE,QAAQ,CAACiB,YAAY,CAAC2C,MAAM,CAAG,CAAC,eACzC5E,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,eAAe,CAACS,OAAO,CAAEA,CAAA,GAAMhD,qBAAqB,CAACjB,KAAK,CAAE,CAAAyD,QAAA,CAAC,GAE7F,CAAQ,CACT,EACE,CAAC,EACH,CAAC,EA9CEzD,KA+CL,CACN,CAAC,CACDzC,KAAK,eAAIvC,IAAA,QAAKwI,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAElG,KAAK,CAAM,CAAC,CACtEE,OAAO,eAAIzC,IAAA,QAAKwI,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAEhG,OAAO,CAAM,CAAC,cAC7EzC,IAAA,WAAQuB,IAAI,CAAC,QAAQ,CAACiH,SAAS,CAAC,2BAA2B,CAACK,QAAQ,CAAElG,SAAU,CAAA8F,QAAA,CAC7E9F,SAAS,CAAG,cAAc,CAAG,eAAe,CACvC,CAAC,EACL,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAtC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}