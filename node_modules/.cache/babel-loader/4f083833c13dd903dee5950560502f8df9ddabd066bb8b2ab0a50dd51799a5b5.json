{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback,useMemo}from'react';import{useParams,useLocation,Link}from'react-router-dom';import axios from'axios';import{useError}from'./ErrorContext';// Додаємо useError\nimport'./ProductList.css';import{categoryNames}from'./Header.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductList(_ref){var _appliedFilters$brand,_appliedFilters$price,_appliedFilters$volum,_appliedFilters$types,_appliedFilters$categ,_appliedFilters$categ2,_appliedFilters$brand2,_appliedFilters$price2,_appliedFilters$volum2,_appliedFilters$types2;let{searchTerm}=_ref;const{categoryId}=useParams();const location=useLocation();const{setError,clearError}=useError();// Використовуємо ErrorContext\n// Memoize queryParams and derived values\nconst queryParams=useMemo(()=>new URLSearchParams(location.search),[location.search]);const searchQuery=useMemo(()=>queryParams.get('query')||queryParams.get('search')||searchTerm||'',[queryParams,searchTerm]);const initialType=useMemo(()=>queryParams.get('type')||'',[queryParams]);const isSearchPage=useMemo(()=>location.pathname==='/search',[location.pathname]);// State for user, token, and admin check\nconst[user]=useState(()=>JSON.parse(localStorage.getItem('user'))||null);const[token]=useState(()=>localStorage.getItem('token')||null);const isAdmin=user&&user.is_admin;// State for filters\nconst[filters,setFilters]=useState({brands:[],priceRanges:[],volumes:[],types:[],categories:[]});// State for selected filters\nconst[selectedFilters,setSelectedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// State for applied filters\nconst[appliedFilters,setAppliedFilters]=useState({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});// State for products and pagination\nconst[allProducts,setAllProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);const[totalProducts,setTotalProducts]=useState(0);const[previewProductCount,setPreviewProductCount]=useState(0);const[currentPage,setCurrentPage]=useState(1);const productsPerPage=24;const[isPaginated,setIsPaginated]=useState(true);const[startPage,setStartPage]=useState(1);const[loadMorePages,setLoadMorePages]=useState(1);// State for brand search\nconst[brandSearch,setBrandSearch]=useState('');// State for custom price range\nconst[customPriceFrom,setCustomPriceFrom]=useState('');const[customPriceTo,setCustomPriceTo]=useState('');// State for active filter\nconst[activeFilter,setActiveFilter]=useState(null);// State for disabled filters\nconst[disabledFilters,setDisabledFilters]=useState({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});// State for \"Show More\"\nconst[showMore,setShowMore]=useState({brands:false,priceRanges:false,volumes:false,types:false,categories:false});// State for type buttons visibility\nconst[showTypeButtons,setShowTypeButtons]=useState(true);// State for top 5 types\nconst[topTypes,setTopTypes]=useState([]);// State for loading indicator\nconst[isLoading,setIsLoading]=useState(true);// State for saved products\nconst[savedProducts,setSavedProducts]=useState(new Set());// State for login prompt\nconst[showLoginPrompt,setShowLoginPrompt]=useState({});// State for delete confirmation modal\nconst[showDeleteModal,setShowDeleteModal]=useState(false);const[productToDelete,setProductToDelete]=useState(null);// Refs for filter positioning\nconst filterRefs=useRef({});const tagRef=useRef(null);const filterItemsRefs=useRef({});// Get minimum price from store_prices\nconst getMinPrice=storePrices=>{if(!storePrices||storePrices.length===0)return 0;return Math.min(...storePrices.map(sp=>sp.price));};// Handle heart click\nconst handleHeartClick=async(productId,event)=>{event.preventDefault();if(!user||!token){clearError();// Очищаємо помилки перед показом промпта\nsetError('Увійдіть в аккаунт, щоб додати до бажаного.');setShowLoginPrompt(prev=>({...prev,[productId]:true}));setTimeout(()=>{setShowLoginPrompt(prev=>({...prev,[productId]:false}));},3000);return;}const isSaved=savedProducts.has(productId);setSavedProducts(prev=>{const newSet=new Set(prev);if(isSaved){newSet.delete(productId);}else{newSet.add(productId);}return newSet;});clearError();// Очищаємо помилки перед запитом\ntry{if(isSaved){await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`,{headers:{Authorization:`Bearer ${token}`}});}else{await axios.post('https://price-ua-react-backend.onrender.com/saved-products',{productId},{headers:{Authorization:`Bearer ${token}`}});}}catch(error){setSavedProducts(prev=>{const newSet=new Set(prev);if(isSaved){newSet.add(productId);}else{newSet.delete(productId);}return newSet;});console.error('Помилка при зміні статусу збереження:',error);setError('Не вдалося оновити статус бажаного. Спробуйте ще раз.');}};// Handle trash can click\nconst handleTrashClick=(productId,event)=>{event.preventDefault();setProductToDelete(productId);setShowDeleteModal(true);};// Handle delete confirmation\nconst handleDeleteConfirm=async()=>{if(!productToDelete||!token)return;// Optimistic UI update\nsetAllProducts(prev=>prev.filter(product=>product.id!==productToDelete));setFilteredProducts(prev=>prev.filter(product=>product.id!==productToDelete));setTotalProducts(prev=>prev-1);setPreviewProductCount(prev=>prev-1);clearError();// Очищаємо помилки перед запитом\ntry{await axios.delete(`https://price-ua-react-backend.onrender.com/admin/product/${productToDelete}`,{headers:{Authorization:`Bearer ${token}`}});}catch(error){console.error('Помилка видалення товару:',error);setError('Не вдалося видалити товар. Спробуйте ще раз.');// Revert optimistic update on failure\nconst fetchProducts=async()=>{clearError();// Очищаємо помилки перед повторним запитом\ntry{const response=await axios.get('https://price-ua-react-backend.onrender.com/products',{params:{category:categoryId,search:searchQuery,limit:1000}});setAllProducts(response.data.products);setFilteredProducts(response.data.products);setTotalProducts(response.data.products.length);setPreviewProductCount(response.data.products.length);}catch(err){console.error('Помилка відновлення продуктів:',err);setError('Не вдалося відновити товари. Перевірте підключення до сервера.');}};fetchProducts();}finally{setShowDeleteModal(false);setProductToDelete(null);}};// Handle delete cancel\nconst handleDeleteCancel=()=>{setShowDeleteModal(false);setProductToDelete(null);};// Calculate filtered products\nconst calculateFilteredProducts=useCallback(tempFilters=>{let filtered=[...allProducts];if(searchQuery){filtered=filtered.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));}if(categoryId&&!isSearchPage){filtered=filtered.filter(product=>product.category_id===categoryId);}else if(tempFilters.categories.length>0&&isSearchPage){filtered=filtered.filter(product=>tempFilters.categories.includes(product.category_name));}if(tempFilters.brands.length>0){filtered=filtered.filter(product=>tempFilters.brands.includes(product.brand_name));}if(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return minPrice>=priceFrom&&minPrice<=priceTo;});}else if(tempFilters.priceRanges.length>0){filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return tempFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});});}if(tempFilters.volumes.length>0){filtered=filtered.filter(product=>tempFilters.volumes.includes(product.volume));}if(tempFilters.types.length>0){filtered=filtered.filter(product=>tempFilters.types.includes(product.feature_type));}return filtered;},[allProducts,searchQuery,categoryId,isSearchPage,customPriceFrom,customPriceTo]);// Calculate preview product count\nconst calculatePreviewProducts=useCallback(()=>{const filtered=calculateFilteredProducts(selectedFilters);return filtered.length;},[calculateFilteredProducts,selectedFilters]);// Update disabled filters\nconst updateDisabledFilters=useCallback(()=>{const newDisabledFilters={brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()};const baseFilters={brands:[...selectedFilters.brands],priceRanges:[...selectedFilters.priceRanges],volumes:[...selectedFilters.volumes],types:[...selectedFilters.types],categories:[...selectedFilters.categories]};filters.brands.forEach(brand=>{const tempFilters={...baseFilters,brands:[brand]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0)newDisabledFilters.brands.add(brand);});filters.priceRanges.forEach(range=>{const tempFilters={...baseFilters,priceRanges:[range.label]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0)newDisabledFilters.priceRanges.add(range.label);});filters.volumes.forEach(volume=>{const tempFilters={...baseFilters,volumes:[volume]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0)newDisabledFilters.volumes.add(volume);});filters.types.forEach(type=>{const tempFilters={...baseFilters,types:[type]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0)newDisabledFilters.types.add(type);});if(isSearchPage){filters.categories.forEach(category=>{const tempFilters={...baseFilters,categories:[category]};const filtered=calculateFilteredProducts(tempFilters);if(filtered.length===0)newDisabledFilters.categories.add(category);});}setDisabledFilters(newDisabledFilters);},[filters,selectedFilters,calculateFilteredProducts,isSearchPage]);// Fetch products and saved statuses\nuseEffect(()=>{const fetchProducts=async()=>{setIsLoading(true);clearError();// Очищаємо помилки перед запитом\ntry{const requestParams={search:searchQuery||undefined,category:categoryId&&!isSearchPage?categoryId:undefined,limit:1000};const productsResponse=await axios.get('https://price-ua-react-backend.onrender.com/products',{params:requestParams});let productsData=productsResponse.data.products||[];let savedProductIds=[];if(user&&token&&productsData.length>0){const productIds=productsData.map(p=>p.id);clearError();// Очищаємо помилки перед запитом\ntry{const savedResponse=await axios.post('https://price-ua-react-backend.onrender.com/saved-products/bulk',{productIds},{headers:{Authorization:`Bearer ${token}`}});savedProductIds=savedResponse.data.savedProductIds||[];}catch(error){console.error('Помилка завантаження статусів збереження:',error);setError('Не вдалося завантажити статуси збереження.');}}setSavedProducts(new Set(savedProductIds));const brandCounts={};const typeCounts={};const categoryCounts={};const allVolumes=new Set();const priceBuckets=new Set();productsData.forEach(product=>{const brand=product.brand_name;const type=product.feature_type;const category=product.category_name;const volume=product.volume;const minPrice=getMinPrice(product.store_prices);brandCounts[brand]=(brandCounts[brand]||0)+1;if(type)typeCounts[type]=(typeCounts[type]||0)+1;categoryCounts[category]=(categoryCounts[category]||0)+1;if(volume)allVolumes.add(volume);if(minPrice>0){if(minPrice<=100)priceBuckets.add('0-100');else if(minPrice<=200)priceBuckets.add('100-200');else if(minPrice<=300)priceBuckets.add('200-300');else if(minPrice<=400)priceBuckets.add('300-400');else if(minPrice<=500)priceBuckets.add('400-500');else if(minPrice<=600)priceBuckets.add('500-600');else if(minPrice<=700)priceBuckets.add('600-700');else if(minPrice<=800)priceBuckets.add('700-800');else if(minPrice<=900)priceBuckets.add('800-900');else if(minPrice<=1000)priceBuckets.add('900-1000');else priceBuckets.add('1000+');}});const allBrands=[...new Set(productsData.map(p=>p.brand_name))].sort((a,b)=>(brandCounts[b]||0)-(brandCounts[a]||0));const allPriceRanges=[{label:'0-100',min:0,max:100},{label:'100-200',min:100,max:200},{label:'200-300',min:200,max:300},{label:'300-400',min:300,max:400},{label:'400-500',min:400,max:500},{label:'500-600',min:500,max:600},{label:'600-700',min:600,max:700},{label:'700-800',min:700,max:800},{label:'800-900',min:800,max:900},{label:'900-1000',min:900,max:1000},{label:'1000+',min:1000,max:Infinity}].filter(range=>priceBuckets.has(range.label));const allVolumesSorted=[...allVolumes].sort((a,b)=>{const numA=parseFloat(a.replace(/[^0-9.]/g,''))||0;const numB=parseFloat(b.replace(/[^0-9.]/g,''))||0;return numA-numB;});const allTypes=[...new Set(productsData.map(p=>p.feature_type).filter(Boolean))].sort((a,b)=>(typeCounts[b]||0)-(typeCounts[a]||0));const topFiveTypes=allTypes.slice(0,5);const allCategories=isSearchPage?[...new Set(productsData.map(p=>p.category_name))].sort((a,b)=>(categoryCounts[b]||0)-(categoryCounts[a]||0)):[categoryId].filter(Boolean);setFilters({brands:allBrands,priceRanges:allPriceRanges,volumes:allVolumesSorted,types:allTypes,categories:allCategories});setTopTypes(topFiveTypes);setAllProducts(productsData);setFilteredProducts(productsData);setTotalProducts(productsData.length);setPreviewProductCount(productsData.length);setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setSelectedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setAppliedFilters({brands:[],priceRanges:[],volumes:[],types:initialType?[initialType]:[],categories:categoryId?[categoryId]:[]});setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});if(initialType){setTimeout(()=>{const typeCheckbox=document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);if(typeCheckbox)typeCheckbox.checked=true;},0);}}catch(error){console.error('Помилка завантаження продуктів:',error);setError('Не вдалося завантажити продукти. Перевірте підключення до сервера.');setAllProducts([]);setFilteredProducts([]);setTotalProducts(0);setPreviewProductCount(0);setSavedProducts(new Set());}finally{setIsLoading(false);}};fetchProducts();},[categoryId,searchQuery,initialType,isSearchPage,user,token,setError,clearError]);// Update preview count and disabled filters\nuseEffect(()=>{if(!isLoading){setPreviewProductCount(calculatePreviewProducts());updateDisabledFilters();}},[selectedFilters,customPriceFrom,customPriceTo,isLoading,calculatePreviewProducts,updateDisabledFilters]);// Client-side filtering\nuseEffect(()=>{if(!isLoading&&allProducts.length>0){let filtered=[...allProducts];if(searchQuery){filtered=filtered.filter(product=>product.name.toLowerCase().includes(searchQuery.toLowerCase()));}if(categoryId&&!isSearchPage){filtered=filtered.filter(product=>product.category_id===categoryId);}else if(appliedFilters.categories.length>0&&isSearchPage){filtered=filtered.filter(product=>appliedFilters.categories.includes(product.category_name));}if(appliedFilters.brands.length>0){filtered=filtered.filter(product=>appliedFilters.brands.includes(product.brand_name));}if(customPriceFrom!==''&&customPriceTo!==''){const priceFrom=parseFloat(customPriceFrom);const priceTo=parseFloat(customPriceTo);filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return minPrice>=priceFrom&&minPrice<=priceTo;});}else if(appliedFilters.priceRanges.length>0){filtered=filtered.filter(product=>{const minPrice=getMinPrice(product.store_prices);return appliedFilters.priceRanges.some(range=>{const[min,max]=range.includes('+')?[1000,Infinity]:range.split('-').map(Number);return minPrice>=min&&(max===Infinity||minPrice<=max);});});}if(appliedFilters.volumes.length>0){filtered=filtered.filter(product=>appliedFilters.volumes.includes(product.volume));}if(appliedFilters.types.length>0){filtered=filtered.filter(product=>appliedFilters.types.includes(product.feature_type));}setFilteredProducts(filtered);setTotalProducts(filtered.length);}},[allProducts,appliedFilters,customPriceFrom,customPriceTo,searchQuery,categoryId,isSearchPage,isLoading]);// Handle filter change\nconst handleFilterChange=(filterType,value)=>{setSelectedFilters(prev=>{const currentValues=prev[filterType]||[];let updatedValues;if(currentValues.includes(value)){updatedValues=currentValues.filter(v=>v!==value);}else{updatedValues=[...currentValues,value];}const updatedFilters={...prev,[filterType]:updatedValues};if(filterType==='priceRanges'){setCustomPriceFrom('');setCustomPriceTo('');}return updatedFilters;});setActiveFilter({type:filterType,value});};// Handle type button click\nconst handleTypeButtonClick=type=>{clearError();// Очищаємо помилки перед застосуванням фільтра\nsetSelectedFilters(prev=>({...prev,types:[type]}));setAppliedFilters(prev=>({...prev,types:[type]}));setShowTypeButtons(false);setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setActiveFilter(null);};// Remove a filter\nconst removeFilter=(filterType,value)=>{clearError();// Очищаємо помилки перед видаленням фільтра\nsetSelectedFilters(prev=>{const updatedValues=(prev[filterType]||[]).filter(v=>v!==value);const updatedFilters={...prev,[filterType]:updatedValues};setAppliedFilters({...prev,[filterType]:updatedValues});return updatedFilters;});};// Reset all filters\nconst resetAllFilters=()=>{clearError();// Очищаємо помилки перед скиданням\nconst emptyFilters={brands:[],priceRanges:[],volumes:[],types:[],categories:[]};setSelectedFilters(emptyFilters);setAppliedFilters(emptyFilters);setBrandSearch('');setCustomPriceFrom('');setCustomPriceTo('');setDisabledFilters({brands:new Set(),priceRanges:new Set(),volumes:new Set(),types:new Set(),categories:new Set()});setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setShowTypeButtons(true);};// Apply filters\nconst applyFilters=()=>{clearError();// Очищаємо помилки перед застосуванням\nsetAppliedFilters({...selectedFilters});setCurrentPage(1);setStartPage(1);setLoadMorePages(1);setIsPaginated(true);setActiveFilter(null);};// Toggle show more\nconst toggleShowMore=filterType=>{setShowMore(prev=>({...prev,[filterType]:!prev[filterType]}));};// Handle brand search\nconst handleBrandSearch=e=>{setBrandSearch(e.target.value);};// Handle custom price change\nconst handleCustomPriceChange=(field,value)=>{const numValue=value.replace(/[^0-9]/g,'');if(field==='from'){setCustomPriceFrom(numValue);}else{setCustomPriceTo(numValue);}if(numValue!==''){setSelectedFilters(prev=>({...prev,priceRanges:[]}));setAppliedFilters(prev=>({...prev,priceRanges:[]}));}};// Get visible filter items\nconst getVisibleItems=useCallback((items,filterType)=>{if(!items)return[];let filteredItems=items;if(filterType==='brands'){filteredItems=items.filter(brand=>brand.toLowerCase().includes(brandSearch.toLowerCase()));const topItems=filteredItems.slice(0,12);const remainingItems=filteredItems.slice(12);if(showMore.brands||filteredItems.length<=12){return[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='types'){const topItems=filteredItems.slice(0,6);const remainingItems=filteredItems.slice(6);if(showMore.types||filteredItems.length<=6){return[...topItems,...remainingItems.sort((a,b)=>a.localeCompare(b))];}return topItems;}if(filterType==='categories'){if(showMore.categories||items.length<=6){return[...items].sort((a,b)=>a.localeCompare(b));}return items.slice(0,6);}if(showMore[filterType]||items.length<=12){return items;}return items.slice(0,12);},[brandSearch,showMore]);// Get product name\nconst getProductName=product=>{return`${product.name} (${product.volume||'Об’єм не вказано'})`;};// Pagination\nconst totalPages=Math.ceil(totalProducts/productsPerPage);const handlePageChange=page=>{clearError();// Очищаємо помилки перед зміною сторінки\nsetCurrentPage(page);setStartPage(page);setLoadMorePages(1);setIsPaginated(true);window.scrollTo({top:0,behavior:'smooth'});};const handleLoadMore=()=>{clearError();// Очищаємо помилки перед завантаженням\nsetCurrentPage(prev=>prev+1);setLoadMorePages(prev=>prev+1);setIsPaginated(false);};const pageNumbers=[];for(let i=1;i<=totalPages;i++){pageNumbers.push(i);}const totalAppliedFilters=(((_appliedFilters$brand=appliedFilters.brands)===null||_appliedFilters$brand===void 0?void 0:_appliedFilters$brand.length)||0)+(((_appliedFilters$price=appliedFilters.priceRanges)===null||_appliedFilters$price===void 0?void 0:_appliedFilters$price.length)||0)+(((_appliedFilters$volum=appliedFilters.volumes)===null||_appliedFilters$volum===void 0?void 0:_appliedFilters$volum.length)||0)+(((_appliedFilters$types=appliedFilters.types)===null||_appliedFilters$types===void 0?void 0:_appliedFilters$types.length)||0)+(isSearchPage?((_appliedFilters$categ=appliedFilters.categories)===null||_appliedFilters$categ===void 0?void 0:_appliedFilters$categ.length)||0:0)+(customPriceFrom!==''&&customPriceTo!==''?1:0);// Update filter container heights\nuseEffect(()=>{Object.keys(showMore).forEach(filterType=>{const container=filterItemsRefs.current[filterType];if(container){const items=container.querySelector('.filter-items');if(items){const visibleItems=getVisibleItems(filters[filterType],filterType);const maxVisible=filterType==='brands'||filterType==='priceRanges'||filterType==='volumes'?12:6;const isExpanded=showMore[filterType]||visibleItems.length<=maxVisible;const collapsedHeight=visibleItems.length>maxVisible?items.scrollHeight*(maxVisible/filters[filterType].length):items.scrollHeight;container.style.maxHeight=isExpanded?`${items.scrollHeight}px`:`${collapsedHeight}px`;}}});},[showMore,filters,brandSearch,getVisibleItems]);return/*#__PURE__*/_jsxs(\"div\",{className:\"product-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:categoryId&&!isSearchPage?categoryNames[categoryId]||'Товари категорії':'Усі товари'}),showTypeButtons&&topTypes.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"type-buttons\",children:topTypes.map((type,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"type-button\",onClick:()=>handleTypeButtonClick(type),children:type},index))}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"spinner-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F...\"})]})}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"delete-modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"delete-modal\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u0438 \\u0442\\u043E\\u0447\\u043D\\u043E \\u0445\\u043E\\u0447\\u0435\\u0442\\u0435 \\u0432\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0446\\u0435\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"delete-modal-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"delete-confirm-btn\",onClick:handleDeleteConfirm,children:\"\\u0422\\u0430\\u043A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-cancel-btn\",onClick:handleDeleteCancel,children:\"\\u041D\\u0456\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-list-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`filters ${!isLoading?'loaded':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0424\\u0456\\u043B\\u044C\\u0442\\u0440\\u0438\"}),totalAppliedFilters>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filters\",children:[isSearchPage&&((_appliedFilters$categ2=appliedFilters.categories)===null||_appliedFilters$categ2===void 0?void 0:_appliedFilters$categ2.map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:categoryNames[category]||category}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('categories',category),children:\"\\xD7\"})]},`category-${category}`))),(_appliedFilters$brand2=appliedFilters.brands)===null||_appliedFilters$brand2===void 0?void 0:_appliedFilters$brand2.map(brand=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:brand}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('brands',brand),children:\"\\xD7\"})]},`brand-${brand}`)),customPriceFrom!==''&&customPriceTo!==''?/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[customPriceFrom,\"-\",customPriceTo,\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setCustomPriceFrom('');setCustomPriceTo('');applyFilters();},children:\"\\xD7\"})]},\"custom-price\"):(_appliedFilters$price2=appliedFilters.priceRanges)===null||_appliedFilters$price2===void 0?void 0:_appliedFilters$price2.map(range=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:range}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('priceRanges',range),children:\"\\xD7\"})]},`price-${range}`)),(_appliedFilters$volum2=appliedFilters.volumes)===null||_appliedFilters$volum2===void 0?void 0:_appliedFilters$volum2.map(volume=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:volume}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('volumes',volume),children:\"\\xD7\"})]},`volume-${volume}`)),(_appliedFilters$types2=appliedFilters.types)===null||_appliedFilters$types2===void 0?void 0:_appliedFilters$types2.map(type=>/*#__PURE__*/_jsxs(\"div\",{className:\"selected-filter-tag\",children:[/*#__PURE__*/_jsx(\"span\",{children:type}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeFilter('types',type),children:\"\\xD7\"})]},`type-${type}`)),totalAppliedFilters>1&&/*#__PURE__*/_jsx(\"button\",{className:\"reset-all-filters\",onClick:resetAllFilters,children:\"\\u0421\\u043A\\u0438\\u043D\\u0443\\u0442\\u0438 \\u0432\\u0441\\u0456\"})]})]}),isSearchPage&&searchQuery&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0456\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['categories']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.categories,'categories').map((category,index)=>{var _selectedFilters$cate;const isDisabled=disabledFilters.categories.has(category);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`categories-${category}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"category\",value:category,checked:((_selectedFilters$cate=selectedFilters.categories)===null||_selectedFilters$cate===void 0?void 0:_selectedFilters$cate.includes(category))||false,onChange:()=>handleFilterChange('categories',category),disabled:isDisabled}),categoryNames[category]||category]},index);})})}),filters.categories.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('categories'),children:showMore.categories?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"brand-search-input\",placeholder:\"\\u041F\\u043E\\u0448\\u0443\\u043A \\u0431\\u0440\\u0435\\u043D\\u0434\\u0443...\",value:brandSearch,onChange:handleBrandSearch}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['brands']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.brands,'brands').map((brand,index)=>{var _selectedFilters$bran;const isDisabled=disabledFilters.brands.has(brand);return/*#__PURE__*/_jsxs(\"label\",{className:`${brand.length>13?'span-two-columns':''} ${isDisabled?'disabled':''}`,ref:el=>filterRefs.current[`brands-${brand}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"brand\",value:brand,checked:((_selectedFilters$bran=selectedFilters.brands)===null||_selectedFilters$bran===void 0?void 0:_selectedFilters$bran.includes(brand))||false,onChange:()=>handleFilterChange('brands',brand),disabled:isDisabled}),brand]},index);})})}),filters.brands.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('brands'),children:showMore.brands?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0426\\u0456\\u043D\\u0430 (\\u0433\\u0440\\u043D)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-price-inputs\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0412\\u0456\\u0434\",value:customPriceFrom,onChange:e=>handleCustomPriceChange('from',e.target.value),className:\"price-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0414\\u043E\",value:customPriceTo,onChange:e=>handleCustomPriceChange('to',e.target.value),className:\"price-input\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['priceRanges']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.priceRanges,'priceRanges').map((range,index)=>{var _selectedFilters$pric;const isDisabled=disabledFilters.priceRanges.has(range.label);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`priceRanges-${range.label}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"priceRange\",value:range.label,checked:((_selectedFilters$pric=selectedFilters.priceRanges)===null||_selectedFilters$pric===void 0?void 0:_selectedFilters$pric.includes(range.label))||false,onChange:()=>handleFilterChange('priceRanges',range.label),disabled:isDisabled}),range.label]},index);})})}),filters.priceRanges.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('priceRanges'),children:showMore.priceRanges?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041E\\u0431\\u2019\\u0454\\u043C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['volumes']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items\",children:getVisibleItems(filters.volumes,'volumes').map((volume,index)=>{var _selectedFilters$volu;const isDisabled=disabledFilters.volumes.has(volume);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`volumes-${volume}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"volume\",value:volume,checked:((_selectedFilters$volu=selectedFilters.volumes)===null||_selectedFilters$volu===void 0?void 0:_selectedFilters$volu.includes(volume))||false,onChange:()=>handleFilterChange('volumes',volume),disabled:isDisabled}),volume]},index);})})}),filters.volumes.length>12&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('volumes'),children:showMore.volumes?'Менше ↑':'Більше ↓'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-items-container\",ref:el=>filterItemsRefs.current['types']=el,children:/*#__PURE__*/_jsx(\"div\",{className:\"filter-items filter-items-single-column\",children:getVisibleItems(filters.types,'types').map((type,index)=>{var _selectedFilters$type;const isDisabled=disabledFilters.types.has(type);return/*#__PURE__*/_jsxs(\"label\",{className:isDisabled?'disabled':'',ref:el=>filterRefs.current[`types-${type}`]=el,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"type\",value:type,checked:((_selectedFilters$type=selectedFilters.types)===null||_selectedFilters$type===void 0?void 0:_selectedFilters$type.includes(type))||false,onChange:()=>handleFilterChange('types',type),disabled:isDisabled}),type]},index);})})}),filters.types.length>6&&/*#__PURE__*/_jsx(\"button\",{className:\"show-more-btn\",onClick:()=>toggleShowMore('types'),children:showMore.types?'Менше ↑':'Більше ↓'})]}),activeFilter&&/*#__PURE__*/_jsxs(\"button\",{className:\"filter-tag\",ref:tagRef,onClick:applyFilters,style:{top:filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]?`${filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].getBoundingClientRect().top-filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].closest('.filters').getBoundingClientRect().top+filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].offsetHeight/2}px`:'0px'},children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"apply-filters-btn\",onClick:applyFilters,children:[\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0438 (\",previewProductCount,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"products\",children:[/*#__PURE__*/_jsx(\"div\",{className:`products-list ${!isLoading?'loaded':''}`,children:filteredProducts.length>0?filteredProducts.slice(isPaginated?(currentPage-1)*productsPerPage:(startPage-1)*productsPerPage,isPaginated?currentPage*productsPerPage:startPage*productsPerPage+loadMorePages*productsPerPage).map((product,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"product-card-container\",children:[/*#__PURE__*/_jsxs(Link,{to:`/product/${product.id}`,className:\"product-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:getProductName(product)}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.images&&product.images.length>0?product.images[0]:'/img/placeholder.webp',alt:product.name,onError:e=>e.target.src='/img/placeholder.webp'}),/*#__PURE__*/_jsx(\"div\",{className:`heart-icon ${savedProducts.has(product.id)?'saved':''}`,onClick:e=>handleHeartClick(product.id,e),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:savedProducts.has(product.id)?'#d32f2f':'none',stroke:\"#d32f2f\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"})})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"price\",children:[getMinPrice(product.store_prices),\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsx(\"p\",{children:product.description||'Опис відсутній'})]}),isAdmin&&/*#__PURE__*/_jsx(\"div\",{className:\"trash-icon\",onClick:e=>handleTrashClick(product.id,e),title:\"\\u0412\\u0438\\u0434\\u0430\\u043B\\u0438\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"#ff0000\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"3 6 5 6 21 6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"10\",y1:\"11\",x2:\"10\",y2:\"17\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"14\",y1:\"11\",x2:\"14\",y2:\"17\"})]})}),showLoginPrompt[product.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"login-prompt\",children:[\"\\u0423\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C \\u0432 \",/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"login-link\",children:\"\\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),\" \\u0449\\u043E\\u0431 \\u0434\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0434\\u043E \\u0431\\u0430\\u0436\\u0430\\u043D\\u043E\\u0433\\u043E\"]})]},`${product.id}-${index}`)):!isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u0438 \\u043D\\u0435 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"})}),!isLoading&&totalProducts>productsPerPage&&/*#__PURE__*/_jsxs(\"div\",{className:\"pagination-container\",children:[(startPage-1+loadMorePages)*productsPerPage<totalProducts&&/*#__PURE__*/_jsx(\"button\",{className:\"load-more-btn\",onClick:handleLoadMore,children:\"\\u0417\\u0430\\u0432\\u0430\\u043D\\u0442\\u0430\\u0436\\u0438\\u0442\\u0438 \\u0449\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage-1),disabled:currentPage===1,children:\"\\u041F\\u043E\\u043F\\u0435\\u0440\\u0435\\u0434\\u043D\\u044F\"}),pageNumbers.map(number=>/*#__PURE__*/_jsx(\"button\",{className:`pagination-btn ${currentPage===number?'active':''}`,onClick:()=>handlePageChange(number),children:number},number)),/*#__PURE__*/_jsx(\"button\",{className:\"pagination-btn\",onClick:()=>handlePageChange(currentPage+1),disabled:currentPage===totalPages,children:\"\\u041D\\u0430\\u0441\\u0442\\u0443\\u043F\\u043D\\u0430\"})]})]})]})]})]});}export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","useParams","useLocation","Link","axios","useError","categoryNames","jsx","_jsx","jsxs","_jsxs","ProductList","_ref","_appliedFilters$brand","_appliedFilters$price","_appliedFilters$volum","_appliedFilters$types","_appliedFilters$categ","_appliedFilters$categ2","_appliedFilters$brand2","_appliedFilters$price2","_appliedFilters$volum2","_appliedFilters$types2","searchTerm","categoryId","location","setError","clearError","queryParams","URLSearchParams","search","searchQuery","get","initialType","isSearchPage","pathname","user","JSON","parse","localStorage","getItem","token","isAdmin","is_admin","filters","setFilters","brands","priceRanges","volumes","types","categories","selectedFilters","setSelectedFilters","appliedFilters","setAppliedFilters","allProducts","setAllProducts","filteredProducts","setFilteredProducts","totalProducts","setTotalProducts","previewProductCount","setPreviewProductCount","currentPage","setCurrentPage","productsPerPage","isPaginated","setIsPaginated","startPage","setStartPage","loadMorePages","setLoadMorePages","brandSearch","setBrandSearch","customPriceFrom","setCustomPriceFrom","customPriceTo","setCustomPriceTo","activeFilter","setActiveFilter","disabledFilters","setDisabledFilters","Set","showMore","setShowMore","showTypeButtons","setShowTypeButtons","topTypes","setTopTypes","isLoading","setIsLoading","savedProducts","setSavedProducts","showLoginPrompt","setShowLoginPrompt","showDeleteModal","setShowDeleteModal","productToDelete","setProductToDelete","filterRefs","tagRef","filterItemsRefs","getMinPrice","storePrices","length","Math","min","map","sp","price","handleHeartClick","productId","event","preventDefault","prev","setTimeout","isSaved","has","newSet","delete","add","headers","Authorization","post","error","console","handleTrashClick","handleDeleteConfirm","filter","product","id","fetchProducts","response","params","category","limit","data","products","err","handleDeleteCancel","calculateFilteredProducts","tempFilters","filtered","name","toLowerCase","includes","category_id","category_name","brand_name","priceFrom","parseFloat","priceTo","minPrice","store_prices","some","range","max","Infinity","split","Number","volume","feature_type","calculatePreviewProducts","updateDisabledFilters","newDisabledFilters","baseFilters","forEach","brand","label","type","requestParams","undefined","productsResponse","productsData","savedProductIds","productIds","p","savedResponse","brandCounts","typeCounts","categoryCounts","allVolumes","priceBuckets","allBrands","sort","a","b","allPriceRanges","allVolumesSorted","numA","replace","numB","allTypes","Boolean","topFiveTypes","slice","allCategories","typeCheckbox","document","querySelector","checked","handleFilterChange","filterType","value","currentValues","updatedValues","v","updatedFilters","handleTypeButtonClick","removeFilter","resetAllFilters","emptyFilters","applyFilters","toggleShowMore","handleBrandSearch","e","target","handleCustomPriceChange","field","numValue","getVisibleItems","items","filteredItems","topItems","remainingItems","localeCompare","getProductName","totalPages","ceil","handlePageChange","page","window","scrollTo","top","behavior","handleLoadMore","pageNumbers","i","push","totalAppliedFilters","Object","keys","container","current","visibleItems","maxVisible","isExpanded","collapsedHeight","scrollHeight","style","maxHeight","className","children","index","onClick","ref","el","_selectedFilters$cate","isDisabled","onChange","disabled","placeholder","_selectedFilters$bran","_selectedFilters$pric","_selectedFilters$volu","_selectedFilters$type","getBoundingClientRect","closest","offsetHeight","to","src","images","alt","onError","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","description","title","points","x1","y1","x2","y2","number"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { useParams, useLocation, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useError } from './ErrorContext'; // Додаємо useError\r\nimport './ProductList.css';\r\nimport { categoryNames } from './Header.js';\r\n\r\nfunction ProductList({ searchTerm }) {\r\n  const { categoryId } = useParams();\r\n  const location = useLocation();\r\n  const { setError, clearError } = useError(); // Використовуємо ErrorContext\r\n\r\n  // Memoize queryParams and derived values\r\n  const queryParams = useMemo(() => new URLSearchParams(location.search), [location.search]);\r\n  const searchQuery = useMemo(\r\n    () => queryParams.get('query') || queryParams.get('search') || searchTerm || '',\r\n    [queryParams, searchTerm]\r\n  );\r\n  const initialType = useMemo(() => queryParams.get('type') || '', [queryParams]);\r\n  const isSearchPage = useMemo(() => location.pathname === '/search', [location.pathname]);\r\n\r\n  // State for user, token, and admin check\r\n  const [user] = useState(() => JSON.parse(localStorage.getItem('user')) || null);\r\n  const [token] = useState(() => localStorage.getItem('token') || null);\r\n  const isAdmin = user && user.is_admin;\r\n\r\n  // State for filters\r\n  const [filters, setFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: [],\r\n    categories: [],\r\n  });\r\n\r\n  // State for selected filters\r\n  const [selectedFilters, setSelectedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // State for applied filters\r\n  const [appliedFilters, setAppliedFilters] = useState({\r\n    brands: [],\r\n    priceRanges: [],\r\n    volumes: [],\r\n    types: initialType ? [initialType] : [],\r\n    categories: categoryId ? [categoryId] : [],\r\n  });\r\n\r\n  // State for products and pagination\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [totalProducts, setTotalProducts] = useState(0);\r\n  const [previewProductCount, setPreviewProductCount] = useState(0);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const productsPerPage = 24;\r\n  const [isPaginated, setIsPaginated] = useState(true);\r\n  const [startPage, setStartPage] = useState(1);\r\n  const [loadMorePages, setLoadMorePages] = useState(1);\r\n\r\n  // State for brand search\r\n  const [brandSearch, setBrandSearch] = useState('');\r\n\r\n  // State for custom price range\r\n  const [customPriceFrom, setCustomPriceFrom] = useState('');\r\n  const [customPriceTo, setCustomPriceTo] = useState('');\r\n\r\n  // State for active filter\r\n  const [activeFilter, setActiveFilter] = useState(null);\r\n\r\n  // State for disabled filters\r\n  const [disabledFilters, setDisabledFilters] = useState({\r\n    brands: new Set(),\r\n    priceRanges: new Set(),\r\n    volumes: new Set(),\r\n    types: new Set(),\r\n    categories: new Set(),\r\n  });\r\n\r\n  // State for \"Show More\"\r\n  const [showMore, setShowMore] = useState({\r\n    brands: false,\r\n    priceRanges: false,\r\n    volumes: false,\r\n    types: false,\r\n    categories: false,\r\n  });\r\n\r\n  // State for type buttons visibility\r\n  const [showTypeButtons, setShowTypeButtons] = useState(true);\r\n\r\n  // State for top 5 types\r\n  const [topTypes, setTopTypes] = useState([]);\r\n\r\n  // State for loading indicator\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // State for saved products\r\n  const [savedProducts, setSavedProducts] = useState(new Set());\r\n\r\n  // State for login prompt\r\n  const [showLoginPrompt, setShowLoginPrompt] = useState({});\r\n\r\n  // State for delete confirmation modal\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [productToDelete, setProductToDelete] = useState(null);\r\n\r\n  // Refs for filter positioning\r\n  const filterRefs = useRef({});\r\n  const tagRef = useRef(null);\r\n  const filterItemsRefs = useRef({});\r\n\r\n  // Get minimum price from store_prices\r\n  const getMinPrice = (storePrices) => {\r\n    if (!storePrices || storePrices.length === 0) return 0;\r\n    return Math.min(...storePrices.map(sp => sp.price));\r\n  };\r\n\r\n  // Handle heart click\r\n  const handleHeartClick = async (productId, event) => {\r\n    event.preventDefault();\r\n    if (!user || !token) {\r\n      clearError(); // Очищаємо помилки перед показом промпта\r\n      setError('Увійдіть в аккаунт, щоб додати до бажаного.');\r\n      setShowLoginPrompt(prev => ({ ...prev, [productId]: true }));\r\n      setTimeout(() => {\r\n        setShowLoginPrompt(prev => ({ ...prev, [productId]: false }));\r\n      }, 3000);\r\n      return;\r\n    }\r\n\r\n    const isSaved = savedProducts.has(productId);\r\n    setSavedProducts(prev => {\r\n      const newSet = new Set(prev);\r\n      if (isSaved) {\r\n        newSet.delete(productId);\r\n      } else {\r\n        newSet.add(productId);\r\n      }\r\n      return newSet;\r\n    });\r\n\r\n    clearError(); // Очищаємо помилки перед запитом\r\n    try {\r\n      if (isSaved) {\r\n        await axios.delete(`https://price-ua-react-backend.onrender.com/saved-products/${productId}`, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      } else {\r\n        await axios.post(\r\n          'https://price-ua-react-backend.onrender.com/saved-products',\r\n          { productId },\r\n          { headers: { Authorization: `Bearer ${token}` } }\r\n        );\r\n      }\r\n    } catch (error) {\r\n      setSavedProducts(prev => {\r\n        const newSet = new Set(prev);\r\n        if (isSaved) {\r\n          newSet.add(productId);\r\n        } else {\r\n          newSet.delete(productId);\r\n        }\r\n        return newSet;\r\n      });\r\n      console.error('Помилка при зміні статусу збереження:', error);\r\n      setError('Не вдалося оновити статус бажаного. Спробуйте ще раз.');\r\n    }\r\n  };\r\n\r\n  // Handle trash can click\r\n  const handleTrashClick = (productId, event) => {\r\n    event.preventDefault();\r\n    setProductToDelete(productId);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  // Handle delete confirmation\r\n  const handleDeleteConfirm = async () => {\r\n    if (!productToDelete || !token) return;\r\n\r\n    // Optimistic UI update\r\n    setAllProducts(prev => prev.filter(product => product.id !== productToDelete));\r\n    setFilteredProducts(prev => prev.filter(product => product.id !== productToDelete));\r\n    setTotalProducts(prev => prev - 1);\r\n    setPreviewProductCount(prev => prev - 1);\r\n\r\n    clearError(); // Очищаємо помилки перед запитом\r\n    try {\r\n      await axios.delete(`https://price-ua-react-backend.onrender.com/admin/product/${productToDelete}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n    } catch (error) {\r\n      console.error('Помилка видалення товару:', error);\r\n      setError('Не вдалося видалити товар. Спробуйте ще раз.');\r\n      // Revert optimistic update on failure\r\n      const fetchProducts = async () => {\r\n        clearError(); // Очищаємо помилки перед повторним запитом\r\n        try {\r\n          const response = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n            params: { category: categoryId, search: searchQuery, limit: 1000 },\r\n          });\r\n          setAllProducts(response.data.products);\r\n          setFilteredProducts(response.data.products);\r\n          setTotalProducts(response.data.products.length);\r\n          setPreviewProductCount(response.data.products.length);\r\n        } catch (err) {\r\n          console.error('Помилка відновлення продуктів:', err);\r\n          setError('Не вдалося відновити товари. Перевірте підключення до сервера.');\r\n        }\r\n      };\r\n      fetchProducts();\r\n    } finally {\r\n      setShowDeleteModal(false);\r\n      setProductToDelete(null);\r\n    }\r\n  };\r\n\r\n  // Handle delete cancel\r\n  const handleDeleteCancel = () => {\r\n    setShowDeleteModal(false);\r\n    setProductToDelete(null);\r\n  };\r\n\r\n  // Calculate filtered products\r\n  const calculateFilteredProducts = useCallback((tempFilters) => {\r\n    let filtered = [...allProducts];\r\n\r\n    if (searchQuery) {\r\n      filtered = filtered.filter(product =>\r\n        product.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n      );\r\n    }\r\n\r\n    if (categoryId && !isSearchPage) {\r\n      filtered = filtered.filter(product => product.category_id === categoryId);\r\n    } else if (tempFilters.categories.length > 0 && isSearchPage) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.categories.includes(product.category_name)\r\n      );\r\n    }\r\n\r\n    if (tempFilters.brands.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.brands.includes(product.brand_name)\r\n      );\r\n    }\r\n\r\n    if (customPriceFrom !== '' && customPriceTo !== '') {\r\n      const priceFrom = parseFloat(customPriceFrom);\r\n      const priceTo = parseFloat(customPriceTo);\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return minPrice >= priceFrom && minPrice <= priceTo;\r\n      });\r\n    } else if (tempFilters.priceRanges.length > 0) {\r\n      filtered = filtered.filter(product => {\r\n        const minPrice = getMinPrice(product.store_prices);\r\n        return tempFilters.priceRanges.some(range => {\r\n          const [min, max] = range.includes('+')\r\n            ? [1000, Infinity]\r\n            : range.split('-').map(Number);\r\n          return minPrice >= min && (max === Infinity || minPrice <= max);\r\n        });\r\n      });\r\n    }\r\n\r\n    if (tempFilters.volumes.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.volumes.includes(product.volume)\r\n      );\r\n    }\r\n\r\n    if (tempFilters.types.length > 0) {\r\n      filtered = filtered.filter(product =>\r\n        tempFilters.types.includes(product.feature_type)\r\n      );\r\n    }\r\n\r\n    return filtered;\r\n  }, [allProducts, searchQuery, categoryId, isSearchPage, customPriceFrom, customPriceTo]);\r\n\r\n  // Calculate preview product count\r\n  const calculatePreviewProducts = useCallback(() => {\r\n    const filtered = calculateFilteredProducts(selectedFilters);\r\n    return filtered.length;\r\n  }, [calculateFilteredProducts, selectedFilters]);\r\n\r\n  // Update disabled filters\r\n  const updateDisabledFilters = useCallback(() => {\r\n    const newDisabledFilters = {\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    };\r\n\r\n    const baseFilters = {\r\n      brands: [...selectedFilters.brands],\r\n      priceRanges: [...selectedFilters.priceRanges],\r\n      volumes: [...selectedFilters.volumes],\r\n      types: [...selectedFilters.types],\r\n      categories: [...selectedFilters.categories],\r\n    };\r\n\r\n    filters.brands.forEach(brand => {\r\n      const tempFilters = { ...baseFilters, brands: [brand] };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) newDisabledFilters.brands.add(brand);\r\n    });\r\n\r\n    filters.priceRanges.forEach(range => {\r\n      const tempFilters = { ...baseFilters, priceRanges: [range.label] };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) newDisabledFilters.priceRanges.add(range.label);\r\n    });\r\n\r\n    filters.volumes.forEach(volume => {\r\n      const tempFilters = { ...baseFilters, volumes: [volume] };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) newDisabledFilters.volumes.add(volume);\r\n    });\r\n\r\n    filters.types.forEach(type => {\r\n      const tempFilters = { ...baseFilters, types: [type] };\r\n      const filtered = calculateFilteredProducts(tempFilters);\r\n      if (filtered.length === 0) newDisabledFilters.types.add(type);\r\n    });\r\n\r\n    if (isSearchPage) {\r\n      filters.categories.forEach(category => {\r\n        const tempFilters = { ...baseFilters, categories: [category] };\r\n        const filtered = calculateFilteredProducts(tempFilters);\r\n        if (filtered.length === 0) newDisabledFilters.categories.add(category);\r\n      });\r\n    }\r\n\r\n    setDisabledFilters(newDisabledFilters);\r\n  }, [filters, selectedFilters, calculateFilteredProducts, isSearchPage]);\r\n\r\n  // Fetch products and saved statuses\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setIsLoading(true);\r\n      clearError(); // Очищаємо помилки перед запитом\r\n      try {\r\n        const requestParams = {\r\n          search: searchQuery || undefined,\r\n          category: categoryId && !isSearchPage ? categoryId : undefined,\r\n          limit: 1000,\r\n        };\r\n        const productsResponse = await axios.get('https://price-ua-react-backend.onrender.com/products', {\r\n          params: requestParams,\r\n        });\r\n\r\n        let productsData = productsResponse.data.products || [];\r\n        let savedProductIds = [];\r\n        if (user && token && productsData.length > 0) {\r\n          const productIds = productsData.map(p => p.id);\r\n          clearError(); // Очищаємо помилки перед запитом\r\n          try {\r\n            const savedResponse = await axios.post(\r\n              'https://price-ua-react-backend.onrender.com/saved-products/bulk',\r\n              { productIds },\r\n              { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n            savedProductIds = savedResponse.data.savedProductIds || [];\r\n          } catch (error) {\r\n            console.error('Помилка завантаження статусів збереження:', error);\r\n            setError('Не вдалося завантажити статуси збереження.');\r\n          }\r\n        }\r\n\r\n        setSavedProducts(new Set(savedProductIds));\r\n\r\n        const brandCounts = {};\r\n        const typeCounts = {};\r\n        const categoryCounts = {};\r\n        const allVolumes = new Set();\r\n        const priceBuckets = new Set();\r\n        productsData.forEach(product => {\r\n          const brand = product.brand_name;\r\n          const type = product.feature_type;\r\n          const category = product.category_name;\r\n          const volume = product.volume;\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          brandCounts[brand] = (brandCounts[brand] || 0) + 1;\r\n          if (type) typeCounts[type] = (typeCounts[type] || 0) + 1;\r\n          categoryCounts[category] = (categoryCounts[category] || 0) + 1;\r\n          if (volume) allVolumes.add(volume);\r\n          if (minPrice > 0) {\r\n            if (minPrice <= 100) priceBuckets.add('0-100');\r\n            else if (minPrice <= 200) priceBuckets.add('100-200');\r\n            else if (minPrice <= 300) priceBuckets.add('200-300');\r\n            else if (minPrice <= 400) priceBuckets.add('300-400');\r\n            else if (minPrice <= 500) priceBuckets.add('400-500');\r\n            else if (minPrice <= 600) priceBuckets.add('500-600');\r\n            else if (minPrice <= 700) priceBuckets.add('600-700');\r\n            else if (minPrice <= 800) priceBuckets.add('700-800');\r\n            else if (minPrice <= 900) priceBuckets.add('800-900');\r\n            else if (minPrice <= 1000) priceBuckets.add('900-1000');\r\n            else priceBuckets.add('1000+');\r\n          }\r\n        });\r\n\r\n        const allBrands = [...new Set(productsData.map(p => p.brand_name))].sort(\r\n          (a, b) => (brandCounts[b] || 0) - (brandCounts[a] || 0)\r\n        );\r\n        const allPriceRanges = [\r\n          { label: '0-100', min: 0, max: 100 },\r\n          { label: '100-200', min: 100, max: 200 },\r\n          { label: '200-300', min: 200, max: 300 },\r\n          { label: '300-400', min: 300, max: 400 },\r\n          { label: '400-500', min: 400, max: 500 },\r\n          { label: '500-600', min: 500, max: 600 },\r\n          { label: '600-700', min: 600, max: 700 },\r\n          { label: '700-800', min: 700, max: 800 },\r\n          { label: '800-900', min: 800, max: 900 },\r\n          { label: '900-1000', min: 900, max: 1000 },\r\n          { label: '1000+', min: 1000, max: Infinity },\r\n        ].filter(range => priceBuckets.has(range.label));\r\n        const allVolumesSorted = [...allVolumes].sort((a, b) => {\r\n          const numA = parseFloat(a.replace(/[^0-9.]/g, '')) || 0;\r\n          const numB = parseFloat(b.replace(/[^0-9.]/g, '')) || 0;\r\n          return numA - numB;\r\n        });\r\n        const allTypes = [...new Set(productsData.map(p => p.feature_type).filter(Boolean))].sort(\r\n          (a, b) => (typeCounts[b] || 0) - (typeCounts[a] || 0)\r\n        );\r\n        const topFiveTypes = allTypes.slice(0, 5);\r\n        const allCategories = isSearchPage\r\n          ? [...new Set(productsData.map(p => p.category_name))].sort(\r\n              (a, b) => (categoryCounts[b] || 0) - (categoryCounts[a] || 0)\r\n            )\r\n          : [categoryId].filter(Boolean);\r\n\r\n        setFilters({\r\n          brands: allBrands,\r\n          priceRanges: allPriceRanges,\r\n          volumes: allVolumesSorted,\r\n          types: allTypes,\r\n          categories: allCategories,\r\n        });\r\n        setTopTypes(topFiveTypes);\r\n\r\n        setAllProducts(productsData);\r\n        setFilteredProducts(productsData);\r\n        setTotalProducts(productsData.length);\r\n        setPreviewProductCount(productsData.length);\r\n        setCurrentPage(1);\r\n        setStartPage(1);\r\n        setLoadMorePages(1);\r\n        setIsPaginated(true);\r\n\r\n        setSelectedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n        setAppliedFilters({\r\n          brands: [],\r\n          priceRanges: [],\r\n          volumes: [],\r\n          types: initialType ? [initialType] : [],\r\n          categories: categoryId ? [categoryId] : [],\r\n        });\r\n\r\n        setBrandSearch('');\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n\r\n        setDisabledFilters({\r\n          brands: new Set(),\r\n          priceRanges: new Set(),\r\n          volumes: new Set(),\r\n          types: new Set(),\r\n          categories: new Set(),\r\n        });\r\n\r\n        if (initialType) {\r\n          setTimeout(() => {\r\n            const typeCheckbox = document.querySelector(`input[name=\"type\"][value=\"${initialType}\"]`);\r\n            if (typeCheckbox) typeCheckbox.checked = true;\r\n          }, 0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Помилка завантаження продуктів:', error);\r\n        setError('Не вдалося завантажити продукти. Перевірте підключення до сервера.');\r\n        setAllProducts([]);\r\n        setFilteredProducts([]);\r\n        setTotalProducts(0);\r\n        setPreviewProductCount(0);\r\n        setSavedProducts(new Set());\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [categoryId, searchQuery, initialType, isSearchPage, user, token, setError, clearError]);\r\n\r\n  // Update preview count and disabled filters\r\n  useEffect(() => {\r\n    if (!isLoading) {\r\n      setPreviewProductCount(calculatePreviewProducts());\r\n      updateDisabledFilters();\r\n    }\r\n  }, [selectedFilters, customPriceFrom, customPriceTo, isLoading, calculatePreviewProducts, updateDisabledFilters]);\r\n\r\n  // Client-side filtering\r\n  useEffect(() => {\r\n    if (!isLoading && allProducts.length > 0) {\r\n      let filtered = [...allProducts];\r\n\r\n      if (searchQuery) {\r\n        filtered = filtered.filter(product => product.name.toLowerCase().includes(searchQuery.toLowerCase()));\r\n      }\r\n\r\n      if (categoryId && !isSearchPage) {\r\n        filtered = filtered.filter(product => product.category_id === categoryId);\r\n      } else if (appliedFilters.categories.length > 0 && isSearchPage) {\r\n        filtered = filtered.filter(product => appliedFilters.categories.includes(product.category_name));\r\n      }\r\n\r\n      if (appliedFilters.brands.length > 0) {\r\n        filtered = filtered.filter(product => appliedFilters.brands.includes(product.brand_name));\r\n      }\r\n\r\n      if (customPriceFrom !== '' && customPriceTo !== '') {\r\n        const priceFrom = parseFloat(customPriceFrom);\r\n        const priceTo = parseFloat(customPriceTo);\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          return minPrice >= priceFrom && minPrice <= priceTo;\r\n        });\r\n      } else if (appliedFilters.priceRanges.length > 0) {\r\n        filtered = filtered.filter(product => {\r\n          const minPrice = getMinPrice(product.store_prices);\r\n          return appliedFilters.priceRanges.some(range => {\r\n            const [min, max] = range.includes('+') ? [1000, Infinity] : range.split('-').map(Number);\r\n            return minPrice >= min && (max === Infinity || minPrice <= max);\r\n          });\r\n        });\r\n      }\r\n\r\n      if (appliedFilters.volumes.length > 0) {\r\n        filtered = filtered.filter(product => appliedFilters.volumes.includes(product.volume));\r\n      }\r\n\r\n      if (appliedFilters.types.length > 0) {\r\n        filtered = filtered.filter(product => appliedFilters.types.includes(product.feature_type));\r\n      }\r\n\r\n      setFilteredProducts(filtered);\r\n      setTotalProducts(filtered.length);\r\n    }\r\n  }, [allProducts, appliedFilters, customPriceFrom, customPriceTo, searchQuery, categoryId, isSearchPage, isLoading]);\r\n\r\n  // Handle filter change\r\n  const handleFilterChange = (filterType, value) => {\r\n    setSelectedFilters((prev) => {\r\n      const currentValues = prev[filterType] || [];\r\n      let updatedValues;\r\n      if (currentValues.includes(value)) {\r\n        updatedValues = currentValues.filter((v) => v !== value);\r\n      } else {\r\n        updatedValues = [...currentValues, value];\r\n      }\r\n      const updatedFilters = { ...prev, [filterType]: updatedValues };\r\n      if (filterType === 'priceRanges') {\r\n        setCustomPriceFrom('');\r\n        setCustomPriceTo('');\r\n      }\r\n      return updatedFilters;\r\n    });\r\n    setActiveFilter({ type: filterType, value });\r\n  };\r\n\r\n  // Handle type button click\r\n  const handleTypeButtonClick = (type) => {\r\n    clearError(); // Очищаємо помилки перед застосуванням фільтра\r\n    setSelectedFilters((prev) => ({\r\n      ...prev,\r\n      types: [type],\r\n    }));\r\n    setAppliedFilters((prev) => ({\r\n      ...prev,\r\n      types: [type],\r\n    }));\r\n    setShowTypeButtons(false);\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setActiveFilter(null);\r\n  };\r\n\r\n  // Remove a filter\r\n  const removeFilter = (filterType, value) => {\r\n    clearError(); // Очищаємо помилки перед видаленням фільтра\r\n    setSelectedFilters((prev) => {\r\n      const updatedValues = (prev[filterType] || []).filter((v) => v !== value);\r\n      const updatedFilters = { ...prev, [filterType]: updatedValues };\r\n      setAppliedFilters({ ...prev, [filterType]: updatedValues });\r\n      return updatedFilters;\r\n    });\r\n  };\r\n\r\n  // Reset all filters\r\n  const resetAllFilters = () => {\r\n    clearError(); // Очищаємо помилки перед скиданням\r\n    const emptyFilters = {\r\n      brands: [],\r\n      priceRanges: [],\r\n      volumes: [],\r\n      types: [],\r\n      categories: [],\r\n    };\r\n    setSelectedFilters(emptyFilters);\r\n    setAppliedFilters(emptyFilters);\r\n    setBrandSearch('');\r\n    setCustomPriceFrom('');\r\n    setCustomPriceTo('');\r\n    setDisabledFilters({\r\n      brands: new Set(),\r\n      priceRanges: new Set(),\r\n      volumes: new Set(),\r\n      types: new Set(),\r\n      categories: new Set(),\r\n    });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setShowTypeButtons(true);\r\n  };\r\n\r\n  // Apply filters\r\n  const applyFilters = () => {\r\n    clearError(); // Очищаємо помилки перед застосуванням\r\n    setAppliedFilters({ ...selectedFilters });\r\n    setCurrentPage(1);\r\n    setStartPage(1);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    setActiveFilter(null);\r\n  };\r\n\r\n  // Toggle show more\r\n  const toggleShowMore = (filterType) => {\r\n    setShowMore((prev) => ({ ...prev, [filterType]: !prev[filterType] }));\r\n  };\r\n\r\n  // Handle brand search\r\n  const handleBrandSearch = (e) => {\r\n    setBrandSearch(e.target.value);\r\n  };\r\n\r\n  // Handle custom price change\r\n  const handleCustomPriceChange = (field, value) => {\r\n    const numValue = value.replace(/[^0-9]/g, '');\r\n    if (field === 'from') {\r\n      setCustomPriceFrom(numValue);\r\n    } else {\r\n      setCustomPriceTo(numValue);\r\n    }\r\n    if (numValue !== '') {\r\n      setSelectedFilters((prev) => ({ ...prev, priceRanges: [] }));\r\n      setAppliedFilters((prev) => ({ ...prev, priceRanges: [] }));\r\n    }\r\n  };\r\n\r\n  // Get visible filter items\r\n  const getVisibleItems = useCallback((items, filterType) => {\r\n    if (!items) return [];\r\n\r\n    let filteredItems = items;\r\n\r\n    if (filterType === 'brands') {\r\n      filteredItems = items.filter((brand) =>\r\n        brand.toLowerCase().includes(brandSearch.toLowerCase())\r\n      );\r\n      const topItems = filteredItems.slice(0, 12);\r\n      const remainingItems = filteredItems.slice(12);\r\n      if (showMore.brands || filteredItems.length <= 12) {\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'types') {\r\n      const topItems = filteredItems.slice(0, 6);\r\n      const remainingItems = filteredItems.slice(6);\r\n      if (showMore.types || filteredItems.length <= 6) {\r\n        return [...topItems, ...remainingItems.sort((a, b) => a.localeCompare(b))];\r\n      }\r\n      return topItems;\r\n    }\r\n\r\n    if (filterType === 'categories') {\r\n      if (showMore.categories || items.length <= 6) {\r\n        return [...items].sort((a, b) => a.localeCompare(b));\r\n      }\r\n      return items.slice(0, 6);\r\n    }\r\n\r\n    if (showMore[filterType] || items.length <= 12) {\r\n      return items;\r\n    }\r\n    return items.slice(0, 12);\r\n  }, [brandSearch, showMore]);\r\n\r\n  // Get product name\r\n  const getProductName = (product) => {\r\n    return `${product.name} (${product.volume || 'Об’єм не вказано'})`;\r\n  };\r\n\r\n  // Pagination\r\n  const totalPages = Math.ceil(totalProducts / productsPerPage);\r\n\r\n  const handlePageChange = (page) => {\r\n    clearError(); // Очищаємо помилки перед зміною сторінки\r\n    setCurrentPage(page);\r\n    setStartPage(page);\r\n    setLoadMorePages(1);\r\n    setIsPaginated(true);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    clearError(); // Очищаємо помилки перед завантаженням\r\n    setCurrentPage((prev) => prev + 1);\r\n    setLoadMorePages((prev) => prev + 1);\r\n    setIsPaginated(false);\r\n  };\r\n\r\n  const pageNumbers = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pageNumbers.push(i);\r\n  }\r\n\r\n  const totalAppliedFilters =\r\n    (appliedFilters.brands?.length || 0) +\r\n    (appliedFilters.priceRanges?.length || 0) +\r\n    (appliedFilters.volumes?.length || 0) +\r\n    (appliedFilters.types?.length || 0) +\r\n    (isSearchPage ? (appliedFilters.categories?.length || 0) : 0) +\r\n    (customPriceFrom !== '' && customPriceTo !== '' ? 1 : 0);\r\n\r\n  // Update filter container heights\r\n  useEffect(() => {\r\n    Object.keys(showMore).forEach((filterType) => {\r\n      const container = filterItemsRefs.current[filterType];\r\n      if (container) {\r\n        const items = container.querySelector('.filter-items');\r\n        if (items) {\r\n          const visibleItems = getVisibleItems(filters[filterType], filterType);\r\n          const maxVisible = filterType === 'brands' || filterType === 'priceRanges' || filterType === 'volumes' ? 12 : 6;\r\n          const isExpanded = showMore[filterType] || visibleItems.length <= maxVisible;\r\n          const collapsedHeight = visibleItems.length > maxVisible\r\n            ? items.scrollHeight * (maxVisible / filters[filterType].length)\r\n            : items.scrollHeight;\r\n          container.style.maxHeight = isExpanded\r\n            ? `${items.scrollHeight}px`\r\n            : `${collapsedHeight}px`;\r\n        }\r\n      }\r\n    });\r\n  }, [showMore, filters, brandSearch, getVisibleItems]);\r\n\r\n  return (\r\n    <div className=\"product-list\">\r\n      <h2>{categoryId && !isSearchPage ? categoryNames[categoryId] || 'Товари категорії' : 'Усі товари'}</h2>\r\n      {showTypeButtons && topTypes.length > 0 && (\r\n        <div className=\"type-buttons\">\r\n          {topTypes.map((type, index) => (\r\n            <button\r\n              key={index}\r\n              className=\"type-button\"\r\n              onClick={() => handleTypeButtonClick(type)}\r\n            >\r\n              {type}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {isLoading && (\r\n        <div className=\"loading-overlay\">\r\n          <div className=\"spinner-container\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Завантаження...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {showDeleteModal && (\r\n        <div className=\"delete-modal-overlay\">\r\n          <div className=\"delete-modal\">\r\n            <p>Ви точно хочете видалити цей товар?</p>\r\n            <div className=\"delete-modal-buttons\">\r\n              <button className=\"delete-confirm-btn\" onClick={handleDeleteConfirm}>Так</button>\r\n              <button className=\"delete-cancel-btn\" onClick={handleDeleteCancel}>Ні</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      <div className=\"product-list-container\">\r\n        <div className={`filters ${!isLoading ? 'loaded' : ''}`}>\r\n          <div className=\"filters-header\">\r\n            <h3>Фільтри</h3>\r\n            {totalAppliedFilters > 0 && (\r\n              <div className=\"selected-filters\">\r\n                {isSearchPage &&\r\n                  appliedFilters.categories?.map((category) => (\r\n                    <div key={`category-${category}`} className=\"selected-filter-tag\">\r\n                      <span>{categoryNames[category] || category}</span>\r\n                      <button onClick={() => removeFilter('categories', category)}>×</button>\r\n                    </div>\r\n                  ))}\r\n                {appliedFilters.brands?.map((brand) => (\r\n                  <div key={`brand-${brand}`} className=\"selected-filter-tag\">\r\n                    <span>{brand}</span>\r\n                    <button onClick={() => removeFilter('brands', brand)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {customPriceFrom !== '' && customPriceTo !== '' ? (\r\n                  <div key=\"custom-price\" className=\"selected-filter-tag\">\r\n                    <span>{customPriceFrom}-{customPriceTo} грн</span>\r\n                    <button onClick={() => { setCustomPriceFrom(''); setCustomPriceTo(''); applyFilters(); }}>×</button>\r\n                  </div>\r\n                ) : (\r\n                  appliedFilters.priceRanges?.map((range) => (\r\n                    <div key={`price-${range}`} className=\"selected-filter-tag\">\r\n                      <span>{range}</span>\r\n                      <button onClick={() => removeFilter('priceRanges', range)}>×</button>\r\n                    </div>\r\n                  ))\r\n                )}\r\n                {appliedFilters.volumes?.map((volume) => (\r\n                  <div key={`volume-${volume}`} className=\"selected-filter-tag\">\r\n                    <span>{volume}</span>\r\n                    <button onClick={() => removeFilter('volumes', volume)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {appliedFilters.types?.map((type) => (\r\n                  <div key={`type-${type}`} className=\"selected-filter-tag\">\r\n                    <span>{type}</span>\r\n                    <button onClick={() => removeFilter('types', type)}>×</button>\r\n                  </div>\r\n                ))}\r\n                {totalAppliedFilters > 1 && (\r\n                  <button className=\"reset-all-filters\" onClick={resetAllFilters}>Скинути всі</button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {isSearchPage && searchQuery && (\r\n            <div className=\"filter-section\">\r\n              <h4>Категорія</h4>\r\n              <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['categories'] = el)}>\r\n                <div className=\"filter-items filter-items-single-column\">\r\n                  {getVisibleItems(filters.categories, 'categories').map((category, index) => {\r\n                    const isDisabled = disabledFilters.categories.has(category);\r\n                    return (\r\n                      <label key={index} className={isDisabled ? 'disabled' : ''} ref={(el) => (filterRefs.current[`categories-${category}`] = el)}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          name=\"category\"\r\n                          value={category}\r\n                          checked={selectedFilters.categories?.includes(category) || false}\r\n                          onChange={() => handleFilterChange('categories', category)}\r\n                          disabled={isDisabled}\r\n                        />\r\n                        {categoryNames[category] || category}\r\n                      </label>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n              {filters.categories.length > 6 && (\r\n                <button className=\"show-more-btn\" onClick={() => toggleShowMore('categories')}>\r\n                  {showMore.categories ? 'Менше ↑' : 'Більше ↓'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"filter-section\">\r\n            <h4>Бренд</h4>\r\n            <input\r\n              type=\"text\"\r\n              className=\"brand-search-input\"\r\n              placeholder=\"Пошук бренду...\"\r\n              value={brandSearch}\r\n              onChange={handleBrandSearch}\r\n            />\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['brands'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.brands, 'brands').map((brand, index) => {\r\n                  const isDisabled = disabledFilters.brands.has(brand);\r\n                  return (\r\n                    <label\r\n                      key={index}\r\n                      className={`${brand.length > 13 ? 'span-two-columns' : ''} ${isDisabled ? 'disabled' : ''}`}\r\n                      ref={(el) => (filterRefs.current[`brands-${brand}`] = el)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"brand\"\r\n                        value={brand}\r\n                        checked={selectedFilters.brands?.includes(brand) || false}\r\n                        onChange={() => handleFilterChange('brands', brand)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {brand}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.brands.length > 12 && (\r\n              <button className=\"show-more-btn\" onClick={() => toggleShowMore('brands')}>\r\n                {showMore.brands ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"filter-section\">\r\n            <h4>Ціна (грн)</h4>\r\n            <div className=\"custom-price-inputs\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Від\"\r\n                value={customPriceFrom}\r\n                onChange={(e) => handleCustomPriceChange('from', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"До\"\r\n                value={customPriceTo}\r\n                onChange={(e) => handleCustomPriceChange('to', e.target.value)}\r\n                className=\"price-input\"\r\n              />\r\n            </div>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['priceRanges'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.priceRanges, 'priceRanges').map((range, index) => {\r\n                  const isDisabled = disabledFilters.priceRanges.has(range.label);\r\n                  return (\r\n                    <label key={index} className={isDisabled ? 'disabled' : ''} ref={(el) => (filterRefs.current[`priceRanges-${range.label}`] = el)}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"priceRange\"\r\n                        value={range.label}\r\n                        checked={selectedFilters.priceRanges?.includes(range.label) || false}\r\n                        onChange={() => handleFilterChange('priceRanges', range.label)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {range.label}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.priceRanges.length > 12 && (\r\n              <button className=\"show-more-btn\" onClick={() => toggleShowMore('priceRanges')}>\r\n                {showMore.priceRanges ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"filter-section\">\r\n            <h4>Об’єм</h4>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['volumes'] = el)}>\r\n              <div className=\"filter-items\">\r\n                {getVisibleItems(filters.volumes, 'volumes').map((volume, index) => {\r\n                  const isDisabled = disabledFilters.volumes.has(volume);\r\n                  return (\r\n                    <label key={index} className={isDisabled ? 'disabled' : ''} ref={(el) => (filterRefs.current[`volumes-${volume}`] = el)}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"volume\"\r\n                        value={volume}\r\n                        checked={selectedFilters.volumes?.includes(volume) || false}\r\n                        onChange={() => handleFilterChange('volumes', volume)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {volume}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.volumes.length > 12 && (\r\n              <button className=\"show-more-btn\" onClick={() => toggleShowMore('volumes')}>\r\n                {showMore.volumes ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"filter-section\">\r\n            <h4>Тип</h4>\r\n            <div className=\"filter-items-container\" ref={(el) => (filterItemsRefs.current['types'] = el)}>\r\n              <div className=\"filter-items filter-items-single-column\">\r\n                {getVisibleItems(filters.types, 'types').map((type, index) => {\r\n                  const isDisabled = disabledFilters.types.has(type);\r\n                  return (\r\n                    <label key={index} className={isDisabled ? 'disabled' : ''} ref={(el) => (filterRefs.current[`types-${type}`] = el)}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        name=\"type\"\r\n                        value={type}\r\n                        checked={selectedFilters.types?.includes(type) || false}\r\n                        onChange={() => handleFilterChange('types', type)}\r\n                        disabled={isDisabled}\r\n                      />\r\n                      {type}\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            {filters.types.length > 6 && (\r\n              <button className=\"show-more-btn\" onClick={() => toggleShowMore('types')}>\r\n                {showMore.types ? 'Менше ↑' : 'Більше ↓'}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {activeFilter && (\r\n            <button\r\n              className=\"filter-tag\"\r\n              ref={tagRef}\r\n              onClick={applyFilters}\r\n              style={{\r\n                top: filterRefs.current[`${activeFilter.type}-${activeFilter.value}`]\r\n                  ? `${filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].getBoundingClientRect().top -\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].closest('.filters').getBoundingClientRect().top +\r\n                      filterRefs.current[`${activeFilter.type}-${activeFilter.value}`].offsetHeight / 2}px`\r\n                  : '0px',\r\n              }}\r\n            >\r\n              Показати товари ({previewProductCount})\r\n            </button>\r\n          )}\r\n\r\n          <button className=\"apply-filters-btn\" onClick={applyFilters}>\r\n            Показати товари ({previewProductCount})\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"products\">\r\n          <div className={`products-list ${!isLoading ? 'loaded' : ''}`}>\r\n            {filteredProducts.length > 0 ? (\r\n              filteredProducts\r\n                .slice(\r\n                  isPaginated ? (currentPage - 1) * productsPerPage : (startPage - 1) * productsPerPage,\r\n                  isPaginated ? currentPage * productsPerPage : startPage * productsPerPage + loadMorePages * productsPerPage\r\n                )\r\n                .map((product, index) => (\r\n                  <div key={`${product.id}-${index}`} className=\"product-card-container\">\r\n                    <Link to={`/product/${product.id}`} className=\"product-card\">\r\n                      <h3>{getProductName(product)}</h3>\r\n                      <div className=\"image-container\">\r\n                        <img\r\n                          src={product.images && product.images.length > 0 ? product.images[0] : '/img/placeholder.webp'}\r\n                          alt={product.name}\r\n                          onError={(e) => (e.target.src = '/img/placeholder.webp')}\r\n                        />\r\n                        <div\r\n                          className={`heart-icon ${savedProducts.has(product.id) ? 'saved' : ''}`}\r\n                          onClick={(e) => handleHeartClick(product.id, e)}\r\n                        >\r\n                          <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            width=\"24\"\r\n                            height=\"24\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            fill={savedProducts.has(product.id) ? '#d32f2f' : 'none'}\r\n                            stroke=\"#d32f2f\"\r\n                            strokeWidth=\"2\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                          >\r\n                            <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\" />\r\n                          </svg>\r\n                        </div>\r\n                      </div>\r\n                      <p className=\"price\">{getMinPrice(product.store_prices)} грн</p>\r\n                      <p>{product.description || 'Опис відсутній'}</p>\r\n                    </Link>\r\n                    {isAdmin && (\r\n                      <div\r\n                        className=\"trash-icon\"\r\n                        onClick={(e) => handleTrashClick(product.id, e)}\r\n                        title=\"Видалити товар\"\r\n                      >\r\n                        <svg\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          width=\"24\"\r\n                          height=\"24\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          fill=\"none\"\r\n                          stroke=\"#ff0000\"\r\n                          strokeWidth=\"2\"\r\n                          strokeLinecap=\"round\"\r\n                          strokeLinejoin=\"round\"\r\n                        >\r\n                          <polyline points=\"3 6 5 6 21 6\" />\r\n                          <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\r\n                          <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" />\r\n                          <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" />\r\n                        </svg>\r\n                      </div>\r\n                    )}\r\n                    {showLoginPrompt[product.id] && (\r\n                      <div className=\"login-prompt\">\r\n                        Увійдіть в <Link to=\"/login\" className=\"login-link\">аккаунт</Link> щоб додати до бажаного\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))\r\n            ) : (\r\n              !isLoading && <p>Товари не знайдено</p>\r\n            )}\r\n          </div>\r\n          {!isLoading && totalProducts > productsPerPage && (\r\n            <div className=\"pagination-container\">\r\n              {((startPage - 1 + loadMorePages) * productsPerPage) < totalProducts && (\r\n                <button className=\"load-more-btn\" onClick={handleLoadMore}>Завантажити ще</button>\r\n              )}\r\n              <div className=\"pagination\">\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  Попередня\r\n                </button>\r\n                {pageNumbers.map((number) => (\r\n                  <button\r\n                    key={number}\r\n                    className={`pagination-btn ${currentPage === number ? 'active' : ''}`}\r\n                    onClick={() => handlePageChange(number)}\r\n                  >\r\n                    {number}\r\n                  </button>\r\n                ))}\r\n                <button\r\n                  className=\"pagination-btn\"\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                >\r\n                  Наступна\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}