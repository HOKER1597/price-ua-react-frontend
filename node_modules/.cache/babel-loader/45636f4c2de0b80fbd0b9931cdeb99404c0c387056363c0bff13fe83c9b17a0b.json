{"ast":null,"code":"import React,{useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import'./AdminDashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const navigate=useNavigate();// Check token validity on component mount\nuseEffect(()=>{const checkToken=async()=>{const token=localStorage.getItem('token');if(!token){console.log('No token found, redirecting to login');navigate('/login');return;}try{// Make a test API call to verify token\nawait axios.get('https://price-ua-react-backend.onrender.com/profile',{headers:{Authorization:`Bearer ${token}`}});}catch(err){var _err$response,_err$response2,_err$response3,_err$response3$data,_err$response3$data$m,_err$response4,_err$response4$data,_err$response4$data$e;console.error('Error validating token:',err);// Check for 401/403 or specific JWT expiration error\nif(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.status)===401||((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.status)===403||(_err$response3=err.response)!==null&&_err$response3!==void 0&&(_err$response3$data=_err$response3.data)!==null&&_err$response3$data!==void 0&&(_err$response3$data$m=_err$response3$data.message)!==null&&_err$response3$data$m!==void 0&&_err$response3$data$m.toLowerCase().includes('jwt expired')||(_err$response4=err.response)!==null&&_err$response4!==void 0&&(_err$response4$data=_err$response4.data)!==null&&_err$response4$data!==void 0&&(_err$response4$data$e=_err$response4$data.error)!==null&&_err$response4$data$e!==void 0&&_err$response4$data$e.toLowerCase().includes('jwt expired')){console.log('Invalid or expired token, redirecting to login');localStorage.removeItem('token');// Clear invalid token\nnavigate('/login');}else{console.error('Unexpected error during token validation:',err);}}};checkToken();},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard animate-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0410\\u0434\\u043C\\u0456\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/brand-create\",className:\"admin-button\",children:\"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u0431\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/brand-edit\",className:\"admin-button\",children:\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0431\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/store-create\",className:\"admin-button\",children:\"\\u0414\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/store-edit\",className:\"admin-button\",children:\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u0442\\u0438 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product-create\",className:\"admin-button\",children:\"\\u0421\\u0442\\u0432\\u043E\\u0440\\u0438\\u0442\\u0438 \\u043D\\u043E\\u0432\\u0438\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin/product-edit\",className:\"admin-button\",children:\"\\u0420\\u0435\\u0434\\u0430\\u0433\\u0443\\u0432\\u0430\\u0442\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\"})]})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","AdminDashboard","navigate","checkToken","token","localStorage","getItem","console","log","get","headers","Authorization","err","_err$response","_err$response2","_err$response3","_err$response3$data","_err$response3$data$m","_err$response4","_err$response4$data","_err$response4$data$e","error","response","status","data","message","toLowerCase","includes","removeItem","className","children","to"],"sources":["C:/Users/pushy/Documents/GitHub/price-ua-react/price-ua-react-frontend/src/components/Admin/AdminDashboard.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './AdminDashboard.css';\r\n\r\nfunction AdminDashboard() {\r\n  const navigate = useNavigate();\r\n\r\n  // Check token validity on component mount\r\n  useEffect(() => {\r\n    const checkToken = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        console.log('No token found, redirecting to login');\r\n        navigate('/login');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Make a test API call to verify token\r\n        await axios.get('https://price-ua-react-backend.onrender.com/profile', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      } catch (err) {\r\n        console.error('Error validating token:', err);\r\n        // Check for 401/403 or specific JWT expiration error\r\n        if (\r\n          err.response?.status === 401 ||\r\n          err.response?.status === 403 ||\r\n          err.response?.data?.message?.toLowerCase().includes('jwt expired') ||\r\n          err.response?.data?.error?.toLowerCase().includes('jwt expired')\r\n        ) {\r\n          console.log('Invalid or expired token, redirecting to login');\r\n          localStorage.removeItem('token'); // Clear invalid token\r\n          navigate('/login');\r\n        } else {\r\n          console.error('Unexpected error during token validation:', err);\r\n        }\r\n      }\r\n    };\r\n\r\n    checkToken();\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <div className=\"admin-dashboard animate-page\">\r\n      <h2>Адмін-панель</h2>\r\n      <div className=\"button-container\">\r\n        <Link to=\"/admin/brand-create\" className=\"admin-button\">\r\n          Додати бренд\r\n        </Link>\r\n        <Link to=\"/admin/brand-edit\" className=\"admin-button\">\r\n          Редагувати бренд\r\n        </Link>\r\n        <Link to=\"/admin/store-create\" className=\"admin-button\">\r\n          Додати магазин\r\n        </Link>\r\n        <Link to=\"/admin/store-edit\" className=\"admin-button\">\r\n          Редагувати магазин\r\n        </Link>\r\n        <Link to=\"/admin/product-create\" className=\"admin-button\">\r\n          Створити новий товар\r\n        </Link>\r\n        <Link to=\"/admin/product-edit\" className=\"admin-button\">\r\n          Редагувати товар\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}